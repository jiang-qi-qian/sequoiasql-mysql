create database test_alter;
use test_alter;
create table t1(a int key);
insert into t1 values(1),(2);
alter table t1 comment "string", ALGORITHM=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='string'
alter table t1 comment "string",ALGORITHM=COPY;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='string'
alter table t1 comment "{table_options:{ShardingKey:{a:1}},ShardingType:'range',Compressed:true,CompressionType:'lzw',ReplSize:3}", ALGORITHM=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='{table_options:{ShardingKey:{a:1}},ShardingType:''range'',Compressed:true,CompressionType:''lzw'',ReplSize:3}'
alter table t1 comment "string, sequoiadb:{ table_options: { AutoIndexId: false, Compressed: false } }", ALGORITHM=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='string, sequoiadb:{ table_options: { AutoIndexId: false, Compressed: false } }'
select * from t1;
a
1
2
drop table t1;
create table t1(a int, b char(16));
insert into t1 values(1,'a'),(2,'b');
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a: 1 }, ShardingType: \"range\",  other: \"other\" } }", ALGORITHM=inplace;
ERROR HY000: Invalid Argument
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1 order by a;
a	b
1	a
2	b
drop table t1;
create table t1(a int, b char(16));
create table t2(a int, b char(16));
insert into t1 values(1,'a'),(2,'b');
insert into t2 values(1,'a'),(2,'b');
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a: 1 }, IsMainCL: true } }", ALGORITHM=inplace;
ERROR HY000: Invalid Argument
alter table t2 comment = "sequoiadb:{ table_options: { Group: \"group4\" } }", ALGORITHM=inplace;
ERROR HY000: Invalid Argument
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a: 1 }, ShardingType: \"hash\", Partition: 1024, ReplSize:2, Compressed: true, CompressionType: \"lzw\", AutoSplit: true, EnsureShardingIndex: false } }", ALGORITHM=inplace;
alter table t2 comment = "sequoiadb:{ table_options: { ShardingKey: { a: 1 }, ShardingType: \"range\", AutoIndexId: false, StrictDataMode:true } }", ALGORITHM=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { a: 1 }, ShardingType: "hash", Partition: 1024, ReplSize:2, Compressed: true, CompressionType: "lzw", AutoSplit: true, EnsureShardingIndex: false } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { a: 1 }, ShardingType: "range", AutoIndexId: false, StrictDataMode:true } }'
select * from t1 order by a;
a	b
1	a
2	b
select * from t2 order by a;
a	b
1	a
2	b
drop table t1,t2;
create table t1(a int, b char(16)) comment = "sequoiadb:{ table_options: { ReplSize:2, Compressed: true, CompressionType: \"snappy\" } }";
create table t2(a int, b char(16)) comment = "sequoiadb:{ table_options: { AutoIndexId: false, StrictDataMode:true, ReplSize:2, Compressed: true, CompressionType: \"snappy\" } }";
insert into t1 values(1,'a'),(2,'b');
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a: 1 }, ReplSize:2, Compressed: true, CompressionType: \"snappy\", IsMainCL: true } }", ALGORITHM=inplace;
ERROR HY000: Invalid Argument
alter table t2 comment = "sequoiadb:{ table_options: { Group: \"group4\", AutoIndexId: false, StrictDataMode:true, ReplSize:2, Compressed: true, CompressionType: \"snappy\" } }", ALGORITHM=inplace;
ERROR HY000: Invalid Argument
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ReplSize:2, Compressed: true, CompressionType: "snappy" } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { AutoIndexId: false, StrictDataMode:true, ReplSize:2, Compressed: true, CompressionType: "snappy" } }'
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a: 1 }, ShardingType: \"range\", EnsureShardingIndex: false, AutoIndexId: true, StrictDataMode: true, ReplSize: 2, Compressed: true, CompressionType: \"snappy\" } }", ALGORITHM=inplace;
alter table t2 comment = "sequoiadb:{ table_options: { AutoIndexId: true, StrictDataMode: false, ReplSize: 4, Compressed: true, CompressionType: \"lzw\" } }", ALGORITHM=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { a: 1 }, ShardingType: "range", EnsureShardingIndex: false, AutoIndexId: true, StrictDataMode: true, ReplSize: 2, Compressed: true, CompressionType: "snappy" } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { AutoIndexId: true, StrictDataMode: false, ReplSize: 4, Compressed: true, CompressionType: "lzw" } }'
select * from t1 order by a;
a	b
1	a
2	b
select * from t2 order by a;
a	b
drop table t1,t2;
create table t1(a int primary key, b char(16));
insert into t1 values(1,'a'),(2,'b');
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a: 1 }, ShardingType: \"range\" } }", ALGORITHM=inplace;
ERROR HY000: Option is not supported yet
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a: 1 }, IsMainCL: true } }", ALGORITHM=inplace;
ERROR HY000: Invalid Argument
alter table t1 comment = "sequoiadb:{ table_options: { Group: \"group4\" } }";
ERROR HY000: Invalid Argument
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  `b` char(16) DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 comment = "sequoiadb:{ table_options: { AutoIndexId: true, StrictDataMode: true, ReplSize: 2, Compressed: true, CompressionType: \"snappy\" } }", ALGORITHM=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  `b` char(16) DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { AutoIndexId: true, StrictDataMode: true, ReplSize: 2, Compressed: true, CompressionType: "snappy" } }'
select * from t1 order by a;
a	b
1	a
2	b
drop table t1;
create table t1(a int primary key, b char(16)) comment = "sequoiadb:{ table_options: { ShardingKey: { a : 1 }, ReplSize:2, Compressed: true, CompressionType: \"snappy\" } }";
create table t2(a int, b char(16)) comment = "sequoiadb:{ table_options: { Compressed: false, ShardingKey: { a: 1 }, ShardingType: \"range\" } }";
insert into t1 values(1,'a'),(2,'b');
insert into t2 values(1,'a'),(2,'b');
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a : 1 }, ShardingType: \"range\", ReplSize: 2, Compressed: true, AutoIndexId:false } }", ALGORITHM=inplace;
ERROR 0A000: Cannot delete table options of comment
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a : 1 }, Compressed: true, CompressionType: \"lzw\" } }";
ERROR 0A000: Cannot delete table options of comment
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a : 1 }, ShardingType: \"range\", ReplSize: 2, Compressed: true, CompressionType: \"snappy\" } }", ALGORITHM=inplace;
ERROR HY000: Option is not supported yet
alter table t2 comment = "sequoiadb:{ table_options: { Compressed: false, ShardingKey: { a: 1 }, ShardingType: \"range\", IsMainCL: true} }", ALGORITHM=inplace;
ERROR HY000: Invalid Argument
alter table t2 comment = "sequoiadb:{ table_options: { ShardingKey: { a: 1 },  ShardingType: \"range\", Compressed: true, IsMainCL: true, EnsureShardingIndex: false } }", ALGORITHM=inplace;
ERROR HY000: Invalid Argument
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  `b` char(16) DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { a : 1 }, ReplSize:2, Compressed: true, CompressionType: "snappy" } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { Compressed: false, ShardingKey: { a: 1 }, ShardingType: "range" } }'
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a : 1 }, ReplSize:2, Compressed: true, CompressionType: \"snappy\", StrictDataMode: true } }", ALGORITHM=inplace;
alter table t2 comment = "sequoiadb:{ table_options: { Compressed: false, ShardingKey: { a: 1 }, ShardingType: \"range\", StrictDataMode: true, ReplSize: 4, AutoIndexId: false } }", ALGORITHM=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  `b` char(16) DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { a : 1 }, ReplSize:2, Compressed: true, CompressionType: "snappy", StrictDataMode: true } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { Compressed: false, ShardingKey: { a: 1 }, ShardingType: "range", StrictDataMode: true, ReplSize: 4, AutoIndexId: false } }'
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a : 1 }, ReplSize:5, Compressed: true, CompressionType: \"lzw\", StrictDataMode: false, AutoIndexId:false  } }", ALGORITHM=inplace;
alter table t2 comment = "sequoiadb:{ table_options: { Compressed: false, ShardingKey: { a: 1 }, ShardingType: \"range\", StrictDataMode: false, ReplSize: 3, AutoIndexId: true } }", ALGORITHM=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  `b` char(16) DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { a : 1 }, ReplSize:5, Compressed: true, CompressionType: "lzw", StrictDataMode: false, AutoIndexId:false  } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { Compressed: false, ShardingKey: { a: 1 }, ShardingType: "range", StrictDataMode: false, ReplSize: 3, AutoIndexId: true } }'
select * from t1 order by a;
a	b
1	a
2	b
select * from t2 order by a;
a	b
1	a
2	b
drop table t1,t2;
create table t1(a int, b char(16)) comment = "sequoiadb:{ table_options: { ShardingKey: { a: 1 }, IsMainCL: true } }";
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: { a: 1 }, IsMainCL: false, EnsureShardingIndex: false } }", ALGORITHM=inplace;
ERROR HY000: Invalid Argument
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { a: 1 }, IsMainCL: true } }'
drop table t1;
create table t1(a int, b char(16));
create table t2(a int primary key, b char(16));
create table t3(a int primary key, b char(16)) comment = "sequoiadb:{ auto_partition: false }";
insert into t1 values(1,'a'),(2,'b');
insert into t2 values(1,'a'),(2,'b');
insert into t3 values(1,'a'),(2,'b');
alter table t1 comment = "sequoiadb:{ table_options: { Compressed: false, StrictDataMode: true, AutoIndexId: false, ReplSize: 4 }, auto_partition: true }", ALGORITHM=inplace;
alter table t2 comment = "sequoiadb:{ table_options: { Compressed: false, StrictDataMode: true, AutoIndexId: false, ReplSize: 4 }, auto_partition: false }", ALGORITHM=inplace;
ERROR 0A000: Can't support alter auto partition
alter table t3 comment = "sequoiadb:{ auto_partition: true }", ALGORITHM=inplace;
ERROR 0A000: Can't support alter auto partition
show create table t3;
Table	Create Table
t3	CREATE TABLE `t3` (
  `a` int(11) NOT NULL,
  `b` char(16) DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ auto_partition: false }'
alter table t3 comment = "sequoiadb:{ auto_partition: false }", ALGORITHM=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { Compressed: false, StrictDataMode: true, AutoIndexId: false, ReplSize: 4 }, auto_partition: true }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` int(11) NOT NULL,
  `b` char(16) DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
show create table t3;
Table	Create Table
t3	CREATE TABLE `t3` (
  `a` int(11) NOT NULL,
  `b` char(16) DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ auto_partition: false }'
select * from t1 order by a;
a	b
1	a
2	b
select * from t2 order by a;
a	b
1	a
2	b
select * from t3 order by a;
a	b
1	a
2	b
drop table t1,t2,t3;
create table t1(a int, b char(16)) comment = "sequoiadb:{ table_options: { ShardingKey: { a : 1 }, ShardingType:\"hash\" } }";
insert into t1 values(1,'a'),(2,'b');
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: \"123\", ShardingType:\"hash\"} }";
ERROR HY000: Invalid Argument
alter table t1 comment = "sequoiadb:{ table_options: { ShardingKey: {a:1}, ShardingType:true} }";
ERROR HY000: Invalid Argument
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { a : 1 }, ShardingType:"hash" } }'
select * from t1 order by a;
a	b
1	a
2	b
drop table t1;
create table t1(a varchar(255) key);
insert into t1 values('a'),('b');
alter table t1 character set = 'ucs2';
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=ucs2 COLLATE=ucs2_general_ci
insert into t1 values ('c');
select * from t1;
a
a
b
c
alter table t1 character set = 'utf8', ALGORITHM=COPY;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(255) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci
insert into t1 values ('d');
select * from t1;
a
a
b
c
d
alter table t1 convert to character set 'UTF8';
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(255) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci
insert into t1 values ('e');
select * from t1;
a
a
b
c
d
e
alter table t1 convert to character set 'cp1251',ALGORITHM=COPY;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(255) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=cp1251 COLLATE=cp1251_general_ci
insert into t1 values ('f');
select * from t1;
a
a
b
c
d
e
f
drop table t1;
create table t1(a int key);
insert into t1 values(1),(2);
alter table t1 rename t2,force;
insert into t2 values(3);
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t2;
a
1
2
3
alter table t2 rename t3,ALGORITHM=COPY;
insert into t3 values(4);
show create table t3;
Table	Create Table
t3	CREATE TABLE `t3` (
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t3;
a
1
2
3
4
drop table if exists t1,t2,t3;
Warnings:
Note	1051	Unknown table 'test_alter.t1'
Note	1051	Unknown table 'test_alter.t2'
create table t1(a int key);
insert into t1 values(1),(2);
alter table t1 engine myisam;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1;
a
1
2
alter table t1 engine sequoiadb;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1;
a
1
2
alter table t1 engine myisam,ALGORITHM=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported for this operation. Try ALGORITHM=COPY
alter table t1 engine sequoiadb,ALGORITHM=inplace;
drop table t1;
create table t1(a int key);
insert into t1 values(1),(2);
alter table t1 tablespace ts,ALGORITHM=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1;
a
1
2
alter table t1 tablespace ts,ALGORITHM=copy;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1;
a
1
2
optimize table t1;
Table	Op	Msg_type	Msg_text
test_alter.t1	optimize	status	OK
alter table t1 MIN_ROWS 10 MAX_ROWS 100 AVG_ROW_LENGTH 50 PACK_KEYS 1 CHECKSUM 1 ROW_FORMAT COMPRESSED DELAY_KEY_WRITE 1 INSERT_METHOD first UNION (t3) DATA DIRECTORY "/tmp" INDEX DIRECTORY "/tmp" PASSWORD "12345" CONNECTION "12345" STATS_PERSISTENT 1 STATS_AUTO_RECALC 1 STATS_SAMPLE_PAGES 1 TABLESPACE ts STORAGE disk;
Warnings:
Warning	1618	<DATA DIRECTORY> option ignored
Warning	1618	<INDEX DIRECTORY> option ignored
alter table t1 rename t2,character set = 'utf8';
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci MIN_ROWS=10 MAX_ROWS=100 AVG_ROW_LENGTH=50 PACK_KEYS=1 STATS_PERSISTENT=1 STATS_AUTO_RECALC=1 STATS_SAMPLE_PAGES=1 CHECKSUM=1 DELAY_KEY_WRITE=1 ROW_FORMAT=COMPRESSED CONNECTION='12345'
select * from t2;
a
1
2
alter table t2 rename t1, MIN_ROWS 10 MAX_ROWS 100;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci MIN_ROWS=10 MAX_ROWS=100 AVG_ROW_LENGTH=50 PACK_KEYS=1 STATS_PERSISTENT=1 STATS_AUTO_RECALC=1 STATS_SAMPLE_PAGES=1 CHECKSUM=1 DELAY_KEY_WRITE=1 ROW_FORMAT=COMPRESSED CONNECTION='12345'
select * from t1;
a
1
2
alter table t1 rename t2, comment "rename table and add comment";
select * from t2;
a
1
2
alter table t2 rename t1;
alter table t1 comment "alter comment" MIN_ROWS 10 MAX_ROWS 100;
select * from t1;
a
1
2
drop table if exists t1,t2;
Warnings:
Note	1051	Unknown table 'test_alter.t2'
create table t1(a char(255) default null);
insert into t1 values ('a'),('1'),('c'),(NULL);
alter table t1 add primary key(a);
ERROR 22004: Invalid use of NULL value
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
delete from t1 where a is null;
select * from t1;
a
1
a
c
alter table t1 add primary key(a);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 drop primary key,add primary key(a);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 drop primary key;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) NOT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 add unique key a(a);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) NOT NULL,
  UNIQUE KEY `a` (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 drop key a;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) NOT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
drop table t1;
create table t1(a char(255) default null);
insert into t1 values ('a'),('c'),(NULL),(NULL),(NULL);
alter table t1 add unique index a(a);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) DEFAULT NULL,
  UNIQUE KEY `a` (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1 where a > '';
a
a
c
alter table t1 drop index a;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
drop table t1;
create table t1(a char(255), b bigint, primary key(a));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) NOT NULL,
  `b` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (NULL, 1);
ERROR 23000: Column 'a' cannot be null
insert into t1 values ('a', 2),('1', 3),('c', 4);
alter table t1 drop primary key, add primary key(b);
ERROR HY000: The unique index must include all fields in sharding key
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) NOT NULL,
  `b` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 drop primary key, add primary key(b,a);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) NOT NULL,
  `b` bigint(20) NOT NULL,
  PRIMARY KEY (`b`,`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1 where a > '' and b >= 1 order by b;
a	b
a	2
1	3
c	4
alter table t1 drop primary key;
alter table t1 add unique index b(b);
ERROR HY000: The unique index must include all fields in sharding key
alter table t1 add unique index b(b,a);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) NOT NULL,
  `b` bigint(20) NOT NULL,
  UNIQUE KEY `b` (`b`,`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1 where a > '' and b >= 1 order by b;
a	b
a	2
1	3
c	4
alter table t1 drop index b;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` char(255) NOT NULL,
  `b` bigint(20) NOT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
drop table t1;
create table t1(a int);
alter table t1 add fulltext index a(a);
ERROR HY000: The storage engine SequoiaDB doesn't support FULLTEXT indexes
alter table t1 add spatial index a(a);
ERROR HY000: The storage engine SequoiaDB doesn't support SPATIAL indexes
drop table t1;
create table t1(a int unique key, b char(16), c float);
alter table t1 drop index a, add index a(a) comment 'recreate index' using hash;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL,
  `c` float DEFAULT NULL,
  KEY `a` (`a`) USING HASH COMMENT 'recreate index'
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 drop index a, add index b(b) key_block_size=2 using btree;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL,
  `c` float DEFAULT NULL,
  KEY `b` (`b`) USING BTREE KEY_BLOCK_SIZE=2
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 drop index b,add index b(a) key_block_size=101 using hash;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL,
  `c` float DEFAULT NULL,
  KEY `b` (`a`) USING HASH KEY_BLOCK_SIZE=101
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 drop index b,add index b_new(a) using hash;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL,
  `c` float DEFAULT NULL,
  KEY `b_new` (`a`) USING HASH
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 drop index b_new, add index ab(b,a) using btree;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL,
  `c` float DEFAULT NULL,
  KEY `ab` (`b`,`a`) USING BTREE
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 drop index ab, add index ab(a,b), add index b(b);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL,
  `c` float DEFAULT NULL,
  KEY `ab` (`a`,`b`),
  KEY `b` (`b`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 drop index ab;
alter table t1 drop index b;
alter table t1 add index a(a), add index b(b), add index c(c), add index abc(a,b,c);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL,
  `c` float DEFAULT NULL,
  KEY `a` (`a`),
  KEY `b` (`b`),
  KEY `c` (`c`),
  KEY `abc` (`a`,`b`,`c`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
drop table t1;
create table t1 (a int not null auto_increment, b int, c int, index(a) )comment="sequoiadb:{ table_options: { ShardingKey: { c: 1 }, ShardingType: 'hash', AutoSplit:true } }";
insert into t1 values(1,1,1);
insert into t1 values(2,2,2);
select * from t1 order by a;
a	b	c
1	1	1
2	2	2
alter table t1 drop b;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL AUTO_INCREMENT,
  `c` int(11) DEFAULT NULL,
  KEY `a` (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { c: 1 }, ShardingType: ''hash'', AutoSplit:true } }'
insert into t1 values();
select * from t1 order by a;
a	c
1	1
2	2
3	NULL
alter table t1 drop a;
insert into t1 values();
select * from t1 order by c;
c
NULL
NULL
1
2
drop table t1;
CREATE TABLE t1 (a INT PRIMARY KEY);
CREATE TABLE t2 (b INT);
ALTER TABLE t2 ADD CONSTRAINT FOREIGN KEY(b) REFERENCES t1(a),ALGORITHM=inplace;
drop table if exists t1,t2;
CREATE TABLE t1 (a VARCHAR(100));
ALTER TABLE t1 ADD INDEX char_idx(a);
ALTER TABLE t1 MODIFY a VARCHAR(200),ALGORITHM=inplace;
drop table if exists t1;
CREATE TABLE t1 ( id INT(11) NOT NULL, num INT(11) NOT NULL, agent_org_no VARCHAR(200), agent_name VARCHAR(200), create_time DATETIME, update_time DATETIME, PRIMARY KEY(id), UNIQUE KEY `判断添加还是修改` (id, agent_org_no) USING BTREE, KEY `代>理商名` (agent_name) USING BTREE ) ENGINE=SEQUOIADB COMMENT='sequoiadb:{"table_options":{"ShardingType":"hash","ShardingKey":{"id":1},"Partition":4096,"ReplSize":2,"Compressed":true,"CompressionType":"lzw","AutoSplit":true,"EnsureShardingIndex":true}}';
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `num` int(11) NOT NULL,
  `agent_org_no` varchar(200) DEFAULT NULL,
  `agent_name` varchar(200) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `update_time` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `判断添加还是修改` (`id`,`agent_org_no`) USING BTREE,
  KEY `代>理商名` (`agent_name`) USING BTREE
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{"table_options":{"ShardingType":"hash","ShardingKey":{"id":1},"Partition":4096,"ReplSize":2,"Compressed":true,"CompressionType":"lzw","AutoSplit":true,"EnsureShardingIndex":true}}'
INSERT INTO t1 VALUES (10,10,'a','a','2019-01-01 00:00:00','2019-01-02 00:00:00'),(20,20,'b','b','2019-11-11 00:00:00','2019-12-12 00:00:00');
ALTER TABLE t1 CHANGE id id INT AUTO_INCREMENT;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `num` int(11) NOT NULL,
  `agent_org_no` varchar(200) DEFAULT NULL,
  `agent_name` varchar(200) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `update_time` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `判断添加还是修改` (`id`,`agent_org_no`) USING BTREE,
  KEY `代>理商名` (`agent_name`) USING BTREE
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{"table_options":{"ShardingType":"hash","ShardingKey":{"id":1},"Partition":4096,"ReplSize":2,"Compressed":true,"CompressionType":"lzw","AutoSplit":true,"EnsureShardingIndex":true}}'
INSERT INTO t1(num, agent_org_no, agent_name, create_time, update_time) values (21,'ab','ab','2019-01-01 00:00:00','2019-01-02 00:00:00'),(22,'cd','cd','2019-11-11 00:00:00','2019-12-12 00:00:00'), (23,'ef','ef','2020-09-09 00:00:00','2020-07-07 00:00:00');
SELECT * FROM t1;
id	num	agent_org_no	agent_name	create_time	update_time
10	10	a	a	2019-01-01 00:00:00	2019-01-02 00:00:00
20	20	b	b	2019-11-11 00:00:00	2019-12-12 00:00:00
21	21	ab	ab	2019-01-01 00:00:00	2019-01-02 00:00:00
22	22	cd	cd	2019-11-11 00:00:00	2019-12-12 00:00:00
23	23	ef	ef	2020-09-09 00:00:00	2020-07-07 00:00:00
ALTER TABLE t1 ADD INDEX idx_num(num);
ALTER TABLE t1 CHANGE id id int, CHANGE num num int AUTO_INCREMENT;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `num` int(11) NOT NULL AUTO_INCREMENT,
  `agent_org_no` varchar(200) DEFAULT NULL,
  `agent_name` varchar(200) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `update_time` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `判断添加还是修改` (`id`,`agent_org_no`) USING BTREE,
  KEY `代>理商名` (`agent_name`) USING BTREE,
  KEY `idx_num` (`num`)
) ENGINE=SequoiaDB AUTO_INCREMENT=2001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{"table_options":{"ShardingType":"hash","ShardingKey":{"id":1},"Partition":4096,"ReplSize":2,"Compressed":true,"CompressionType":"lzw","AutoSplit":true,"EnsureShardingIndex":true}}'
INSERT INTO t1(id, agent_org_no, agent_name, create_time, update_time) values (31,'ab','ab','2019-01-01 00:00:00','2019-01-02 00:00:00'),(32,'cd','cd','2019-11-11 00:00:00','2019-12-12 00:00:00'), (33,'ef','ef','2020-09-09 00:00:00','2020-07-07 00:00:00');
SELECT * FROM t1;
id	num	agent_org_no	agent_name	create_time	update_time
10	10	a	a	2019-01-01 00:00:00	2019-01-02 00:00:00
20	20	b	b	2019-11-11 00:00:00	2019-12-12 00:00:00
21	21	ab	ab	2019-01-01 00:00:00	2019-01-02 00:00:00
22	22	cd	cd	2019-11-11 00:00:00	2019-12-12 00:00:00
23	23	ef	ef	2020-09-09 00:00:00	2020-07-07 00:00:00
31	1001	ab	ab	2019-01-01 00:00:00	2019-01-02 00:00:00
32	1002	cd	cd	2019-11-11 00:00:00	2019-12-12 00:00:00
33	1003	ef	ef	2020-09-09 00:00:00	2020-07-07 00:00:00
ALTER TABLE t1 MODIFY num INT DEFAULT 0;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `num` int(11) DEFAULT 0,
  `agent_org_no` varchar(200) DEFAULT NULL,
  `agent_name` varchar(200) DEFAULT NULL,
  `create_time` datetime DEFAULT NULL,
  `update_time` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `判断添加还是修改` (`id`,`agent_org_no`) USING BTREE,
  KEY `代>理商名` (`agent_name`) USING BTREE,
  KEY `idx_num` (`num`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{"table_options":{"ShardingType":"hash","ShardingKey":{"id":1},"Partition":4096,"ReplSize":2,"Compressed":true,"CompressionType":"lzw","AutoSplit":true,"EnsureShardingIndex":true}}'
INSERT INTO t1(id, agent_org_no, agent_name, create_time, update_time) VALUES (40,'C','C','2019-01-01 00:00:00','2019-01-02 00:00:00'),(41,'D','D','2031-01-11 00:00:00','2019-08-30 00:00:00');
SELECT * FROM t1;
id	num	agent_org_no	agent_name	create_time	update_time
10	10	a	a	2019-01-01 00:00:00	2019-01-02 00:00:00
20	20	b	b	2019-11-11 00:00:00	2019-12-12 00:00:00
21	21	ab	ab	2019-01-01 00:00:00	2019-01-02 00:00:00
22	22	cd	cd	2019-11-11 00:00:00	2019-12-12 00:00:00
23	23	ef	ef	2020-09-09 00:00:00	2020-07-07 00:00:00
31	1001	ab	ab	2019-01-01 00:00:00	2019-01-02 00:00:00
32	1002	cd	cd	2019-11-11 00:00:00	2019-12-12 00:00:00
33	1003	ef	ef	2020-09-09 00:00:00	2020-07-07 00:00:00
40	0	C	C	2019-01-01 00:00:00	2019-01-02 00:00:00
41	0	D	D	2031-01-11 00:00:00	2019-08-30 00:00:00
DROP TABLE t1;
create table t1 (a int);
insert into t1(a) values(1);
alter table t1 add i int key;
select * from t1;
a	i
1	0
alter table t1 drop primary key;
select * from t1;
a	i
1	0
alter table t1 add j int unique key;
select * from t1;
a	i	j
1	0	NULL
drop table t1;
create table t1(id int auto_increment key, a int, b int, c int);
insert into t1(a, b, c) values(1,1,1),(2,2,2),(3,3,3),(4,4,4),(5,5,5),(6,6,6),(7,7,7),(8,8,8),(9,9,9),(10,10,10);
ALTER TABLE t1 ADD d int FIRST,algorithm = inplace;
ALTER TABLE t1 ADD e int after a, algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `d` int(11) DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` int(11) DEFAULT NULL,
  `e` int(11) DEFAULT NULL,
  `b` int(11) DEFAULT NULL,
  `c` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a, b, c, d, e) values(11,11,11,11,11);
select * from t1 order by id;
d	id	a	e	b	c
NULL	1	1	NULL	1	1
NULL	2	2	NULL	2	2
NULL	3	3	NULL	3	3
NULL	4	4	NULL	4	4
NULL	5	5	NULL	5	5
NULL	6	6	NULL	6	6
NULL	7	7	NULL	7	7
NULL	8	8	NULL	8	8
NULL	9	9	NULL	9	9
NULL	10	10	NULL	10	10
11	11	11	11	11	11
ALTER TABLE t1 ADD (f int, g int), algorithm = inplace;
insert into t1(a, b, c, d, e, f, g) values(12,12,12,12,12,12,12);
select * from t1 order by id;
d	id	a	e	b	c	f	g
NULL	1	1	NULL	1	1	NULL	NULL
NULL	2	2	NULL	2	2	NULL	NULL
NULL	3	3	NULL	3	3	NULL	NULL
NULL	4	4	NULL	4	4	NULL	NULL
NULL	5	5	NULL	5	5	NULL	NULL
NULL	6	6	NULL	6	6	NULL	NULL
NULL	7	7	NULL	7	7	NULL	NULL
NULL	8	8	NULL	8	8	NULL	NULL
NULL	9	9	NULL	9	9	NULL	NULL
NULL	10	10	NULL	10	10	NULL	NULL
11	11	11	11	11	11	NULL	NULL
12	12	12	12	12	12	12	12
alter table t1 drop column g, algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `d` int(11) DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` int(11) DEFAULT NULL,
  `e` int(11) DEFAULT NULL,
  `b` int(11) DEFAULT NULL,
  `c` int(11) DEFAULT NULL,
  `f` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a, b, c, d, e, f) values(13,13,13,13,13,13);
select * from t1 order by id;
d	id	a	e	b	c	f
NULL	1	1	NULL	1	1	NULL
NULL	2	2	NULL	2	2	NULL
NULL	3	3	NULL	3	3	NULL
NULL	4	4	NULL	4	4	NULL
NULL	5	5	NULL	5	5	NULL
NULL	6	6	NULL	6	6	NULL
NULL	7	7	NULL	7	7	NULL
NULL	8	8	NULL	8	8	NULL
NULL	9	9	NULL	9	9	NULL
NULL	10	10	NULL	10	10	NULL
11	11	11	11	11	11	NULL
12	12	12	12	12	12	12
13	13	13	13	13	13	13
drop table t1;
set sql_mode = 'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION';
create table t1(id int auto_increment key);
insert into t1 values(),(),(),(),(),(),(),(),(),();
ALTER TABLE t1 ADD (col1 int NOT NULL, col2 float NOT NULL, col3 decimal(10,2) NOT NULL, col4 bit(2) NOT NULL, col8 time NOT NULL, col9 year NOT NULL, col10 char NOT NULL, col11 varchar(255) NOT NULL, col12 binary NOT NULL, col13 varbinary(255) NOT NULL, col14 text NOT NULL, col15 blob NOT NULL, col16 enum('one', 'two', 'three') NOT NULL, col17 set('one', 'two', 'three') NOT NULL, col18 json NOT NULL), algorithm = inplace;
alter table t1 ADD(col5 date NOT NULL),algorithm = inplace;
alter table t1 ADD(col6 datetime NOT NULL),algorithm = inplace;
alter table t1 ADD(col7 timestamp NOT NULL),algorithm = inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: DEFAULT CURRENT_TIMESTAMP is unsupported.. Try ALGORITHM=COPY
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `col1` int(11) NOT NULL,
  `col2` float NOT NULL,
  `col3` decimal(10,2) NOT NULL,
  `col4` bit(2) NOT NULL,
  `col8` time NOT NULL,
  `col9` year(4) NOT NULL,
  `col10` char(1) NOT NULL,
  `col11` varchar(255) NOT NULL,
  `col12` binary(1) NOT NULL,
  `col13` varbinary(255) NOT NULL,
  `col14` text NOT NULL,
  `col15` blob NOT NULL,
  `col16` enum('one','two','three') NOT NULL,
  `col17` set('one','two','three') NOT NULL,
  `col18` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`col18`)),
  `col5` date NOT NULL,
  `col6` datetime NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(col1, col2, col3, col4, col5, col6, col8, col9, col10, col11, col12, col13, col14, col15, col16, col17, col18) values(100, 12.12, 15.15, 3, '2019-09-20', '2019-09-20 17:39:30', '10:10:10', '2019', 'a', 'abc', 'a', 'abc', 'abc', 'abc', 'two', 'two', '{"a":1}');
select * from t1 order by id;
id	col1	col2	col3	col4	col8	col9	col10	col11	col12	col13	col14	col15	col16	col17	col18	col5	col6
1	0	0	0.00	 	00:00:00	0000			 				one			0000-00-00	0000-00-00 00:00:00
2	0	0	0.00	 	00:00:00	0000			 				one			0000-00-00	0000-00-00 00:00:00
3	0	0	0.00	 	00:00:00	0000			 				one			0000-00-00	0000-00-00 00:00:00
4	0	0	0.00	 	00:00:00	0000			 				one			0000-00-00	0000-00-00 00:00:00
5	0	0	0.00	 	00:00:00	0000			 				one			0000-00-00	0000-00-00 00:00:00
6	0	0	0.00	 	00:00:00	0000			 				one			0000-00-00	0000-00-00 00:00:00
7	0	0	0.00	 	00:00:00	0000			 				one			0000-00-00	0000-00-00 00:00:00
8	0	0	0.00	 	00:00:00	0000			 				one			0000-00-00	0000-00-00 00:00:00
9	0	0	0.00	 	00:00:00	0000			 				one			0000-00-00	0000-00-00 00:00:00
10	0	0	0.00	 	00:00:00	0000			 				one			0000-00-00	0000-00-00 00:00:00
11	100	12.12	15.15		10:10:10	2019	a	abc	a	abc	abc	abc	two	two	{"a":1}	2019-09-20	2019-09-20 17:39:30
set sql_mode = default;
alter table t1 drop column col1,algorithm = inplace;
alter table t1 drop column col2,algorithm = inplace;
alter table t1 drop column col3,algorithm = inplace;
alter table t1 drop column col4,algorithm = inplace;
alter table t1 drop column col5,algorithm = inplace;
alter table t1 drop column col6,algorithm = inplace;
alter table t1 drop column col8,algorithm = inplace;
alter table t1 drop column col9,algorithm = inplace;
alter table t1 drop column col10,algorithm = inplace;
alter table t1 drop column col11,algorithm = inplace;
alter table t1 drop column col12,algorithm = inplace;
alter table t1 drop column col13,algorithm = inplace;
alter table t1 drop column col14,algorithm = inplace;
alter table t1 drop column col15,algorithm = inplace;
alter table t1 drop column col16,algorithm = inplace;
alter table t1 drop column col17,algorithm = inplace;
alter table t1 drop column col18,algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values();
select * from t1 order by id;
id
1
2
3
4
5
6
7
8
9
10
11
12
set sql_mode = "NO_ZERO_DATE,NO_ZERO_IN_DATE";
ALTER TABLE t1 ADD (col1 int NOT NULL default 100, col2 float NOT NULL default 100.2, col3 decimal(10,2) NOT NULL default 30.23, col4 bit(2) NOT NULL default 2, col5 date NOT NULL default '2019-09-21', col6 datetime NOT NULL default '2019-09-21 11:06:31', col7 timestamp NOT NULL default '2019-09-21 11:06:31', col8 time NOT NULL default '11:04:31', col9 year NOT NULL default 2019, col10 char(255) NOT NULL default 'char', col11 varchar(255) NOT NULL default 'varchar', col12 binary(255) NOT NULL default 'binary', col13 varbinary(255) NOT NULL default 'varbinary', col16 enum('one', 'two', 'three') NOT NULL default 'three', col17 set('one', 'two', 'three') NOT NULL default 'two'), algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `col1` int(11) NOT NULL DEFAULT 100,
  `col2` float NOT NULL DEFAULT 100.2,
  `col3` decimal(10,2) NOT NULL DEFAULT 30.23,
  `col4` bit(2) NOT NULL DEFAULT b'10',
  `col5` date NOT NULL DEFAULT '2019-09-21',
  `col6` datetime NOT NULL DEFAULT '2019-09-21 11:06:31',
  `col7` timestamp NOT NULL DEFAULT '2019-09-21 11:06:31',
  `col8` time NOT NULL DEFAULT '11:04:31',
  `col9` year(4) NOT NULL DEFAULT 2019,
  `col10` char(255) NOT NULL DEFAULT 'char',
  `col11` varchar(255) NOT NULL DEFAULT 'varchar',
  `col12` binary(255) NOT NULL DEFAULT 'binary\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0',
  `col13` varbinary(255) NOT NULL DEFAULT 'varbinary',
  `col16` enum('one','two','three') NOT NULL DEFAULT 'three',
  `col17` set('one','two','three') NOT NULL DEFAULT 'two',
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values();
insert into t1(col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col16, col17) values(100, 12.12, 15.15, 3, '2019-09-20', '2019-09-21 17:39:30', '2019-09-20 17:39:30', '10:10:10', '2019', 'a', 'abc', 'a', 'abc', 'two', 'three');
select * from t1 order by id;
id	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col16	col17
1	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
2	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
3	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
4	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
5	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
6	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
7	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
8	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
9	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
10	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
11	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
12	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
13	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
14	100	12.12	15.15		2019-09-20	2019-09-21 17:39:30	2019-09-20 17:39:30	10:10:10	2019	a	abc	a                                                                                                                                                                                                                                                              	abc	two	three
alter table t1 drop column col1,algorithm = inplace;
alter table t1 drop column col2,algorithm = inplace;
alter table t1 drop column col3,algorithm = inplace;
alter table t1 drop column col4,algorithm = inplace;
alter table t1 drop column col5,algorithm = inplace;
alter table t1 drop column col6,algorithm = inplace;
alter table t1 drop column col7,algorithm = inplace;
alter table t1 drop column col8,algorithm = inplace;
alter table t1 drop column col9,algorithm = inplace;
alter table t1 drop column col10,algorithm = inplace;
alter table t1 drop column col11,algorithm = inplace;
alter table t1 drop column col12,algorithm = inplace;
alter table t1 drop column col13,algorithm = inplace;
alter table t1 drop column col16,algorithm = inplace;
alter table t1 drop column col17,algorithm = inplace;
ALTER TABLE t1 ADD (col1 int default 100, col2 float default 100.2, col3 decimal(10,2) default 30.23, col4 bit(2) default 2, col5 date default '2019-09-21', col6 datetime default '2019-09-21 11:06:31', col7 timestamp default '2019-09-21 11:06:31', col8 time default '11:04:31', col9 year default 2019, col10 char(255) default 'char', col11 varchar(255) default 'varchar', col12 binary(255) default 'binary', col13 varbinary(255) default 'varbinary', col16 enum('one', 'two', 'three') default 'three', col17 set('one', 'two', 'three') default 'two'), algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `col1` int(11) DEFAULT 100,
  `col2` float DEFAULT 100.2,
  `col3` decimal(10,2) DEFAULT 30.23,
  `col4` bit(2) DEFAULT b'10',
  `col5` date DEFAULT '2019-09-21',
  `col6` datetime DEFAULT '2019-09-21 11:06:31',
  `col7` timestamp NOT NULL DEFAULT '2019-09-21 11:06:31',
  `col8` time DEFAULT '11:04:31',
  `col9` year(4) DEFAULT 2019,
  `col10` char(255) DEFAULT 'char',
  `col11` varchar(255) DEFAULT 'varchar',
  `col12` binary(255) DEFAULT 'binary\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0',
  `col13` varbinary(255) DEFAULT 'varbinary',
  `col16` enum('one','two','three') DEFAULT 'three',
  `col17` set('one','two','three') DEFAULT 'two',
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values();
insert into t1(col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col16, col17) values(100, 12.12, 15.15, 3, '2019-09-20', '2019-09-21 17:39:30', '2019-09-20 17:39:30', '10:10:10', '2019', 'a', 'abc', 'a', 'abc', 'two', 'three');
select * from t1 order by id;
id	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col16	col17
1	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
2	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
3	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
4	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
5	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
6	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
7	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
8	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
9	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
10	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
11	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
12	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
13	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
14	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
15	100	100.2	30.23		2019-09-21	2019-09-21 11:06:31	2019-09-21 11:06:31	11:04:31	2019	char	varchar	binary                                                                                                                                                                                                                                                         	varbinary	three	two
16	100	12.12	15.15		2019-09-20	2019-09-21 17:39:30	2019-09-20 17:39:30	10:10:10	2019	a	abc	a                                                                                                                                                                                                                                                              	abc	two	three
delete from t1;
insert into t1(col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col16, col17) values(NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
select * from t1;
id	col1	col2	col3	col4	col5	col6	col7	col8	col9	col10	col11	col12	col13	col16	col17
17	NULL	NULL	NULL	NULL	NULL	NULL	x	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
drop table t1;
set sql_mode = default;
create table t1(id int, col1 int AUTO_INCREMENT key)comment="sequoiadb:{ auto_partition: false }";
insert into t1(id) values(1), (2), (3), (4), (5), (6), (7), (8), (9), (10);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) DEFAULT NULL,
  `col1` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`col1`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ auto_partition: false }'
select * from t1 order by id;
id	col1
1	1
2	2
3	3
4	4
5	5
6	6
7	7
8	8
9	9
10	10
ALTER TABLE t1 DROP col1, algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ auto_partition: false }'
insert into t1 values(11);
select * from t1 order by id;
id
1
2
3
4
5
6
7
8
9
10
11
drop table t1;
create table t1(id int, col1 int AUTO_INCREMENT, col2 varchar(255), primary key(col2, id, col1))comment="sequoiadb:{ table_options: { ShardingKey: { id: 1 }, ShardingType: 'hash', AutoSplit:true } }";
insert into t1(id, col2) values(1, 'var1'), (2, 'var2'), (3, 'var3'), (4, 'var4'), (5, 'var5'), (6, 'var6'), (7, 'var7'), (8, 'var8'), (9, 'var9'), (10, 'var10');
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `col1` int(11) NOT NULL AUTO_INCREMENT,
  `col2` varchar(255) NOT NULL,
  PRIMARY KEY (`col2`,`id`,`col1`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { id: 1 }, ShardingType: ''hash'', AutoSplit:true } }'
select * from t1 order by col1;
id	col1	col2
1	1	var1
2	2	var2
3	3	var3
4	4	var4
5	5	var5
6	6	var6
7	7	var7
8	8	var8
9	9	var9
10	10	var10
ALTER TABLE t1 DROP col1, algorithm = inplace;
ERROR 42000: Key column 'col1' doesn't exist in table
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `col1` int(11) NOT NULL AUTO_INCREMENT,
  `col2` varchar(255) NOT NULL,
  PRIMARY KEY (`col2`,`id`,`col1`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { id: 1 }, ShardingType: ''hash'', AutoSplit:true } }'
insert into t1(id, col2) values(11, 'var11');
select * from t1 order by id;
id	col1	col2
1	1	var1
2	2	var2
3	3	var3
4	4	var4
5	5	var5
6	6	var6
7	7	var7
8	8	var8
9	9	var9
10	10	var10
11	11	var11
drop table t1;
create table t1(id int, col1 int AUTO_INCREMENT unique key)COMMENT='sequoiadb:{ auto_partition: false }';
insert into t1(id) values(1), (2), (3), (4), (5), (6), (7), (8), (9), (10);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) DEFAULT NULL,
  `col1` int(11) NOT NULL AUTO_INCREMENT,
  UNIQUE KEY `col1` (`col1`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ auto_partition: false }'
select * from t1 order by id;
id	col1
1	1
2	2
3	3
4	4
5	5
6	6
7	7
8	8
9	9
10	10
ALTER TABLE t1 DROP col1, algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ auto_partition: false }'
insert into t1 values(11);
select * from t1 order by id;
id
1
2
3
4
5
6
7
8
9
10
11
drop table t1;
create table t1(id int not null, col1 int AUTO_INCREMENT, col2 varchar(255) not null, unique key(col2, id, col1))comment="sequoiadb:{ table_options: { ShardingKey: { id: 1 }, ShardingType: 'hash', AutoSplit:true } }";
insert into t1(id, col2) values(1, 'var1'), (2, 'var2'), (3, 'var3'), (4, 'var4'), (5, 'var5'), (6, 'var6'), (7, 'var7'), (8, 'var8'), (9, 'var9'), (10, 'var10');
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `col1` int(11) NOT NULL AUTO_INCREMENT,
  `col2` varchar(255) NOT NULL,
  UNIQUE KEY `col2` (`col2`,`id`,`col1`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { id: 1 }, ShardingType: ''hash'', AutoSplit:true } }'
select * from t1 order by col1;
id	col1	col2
1	1	var1
2	2	var2
3	3	var3
4	4	var4
5	5	var5
6	6	var6
7	7	var7
8	8	var8
9	9	var9
10	10	var10
ALTER TABLE t1 DROP col1, algorithm = inplace;
ERROR 42000: Key column 'col1' doesn't exist in table
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `col1` int(11) NOT NULL AUTO_INCREMENT,
  `col2` varchar(255) NOT NULL,
  UNIQUE KEY `col2` (`col2`,`id`,`col1`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { id: 1 }, ShardingType: ''hash'', AutoSplit:true } }'
insert into t1(id, col2) values(11, 'var11');
select * from t1 order by id;
id	col1	col2
1	1	var1
2	2	var2
3	3	var3
4	4	var4
5	5	var5
6	6	var6
7	7	var7
8	8	var8
9	9	var9
10	10	var10
11	11	var11
drop table t1;
create table t1(id int, col1 int AUTO_INCREMENT ,index(col1));
insert into t1(id) values(1), (2), (3), (4), (5), (6), (7), (8), (9), (10);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) DEFAULT NULL,
  `col1` int(11) NOT NULL AUTO_INCREMENT,
  KEY `col1` (`col1`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1 order by id;
id	col1
1	1
2	2
3	3
4	4
5	5
6	6
7	7
8	8
9	9
10	10
ALTER TABLE t1 DROP col1, algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values(11);
select * from t1 order by id;
id
1
2
3
4
5
6
7
8
9
10
11
drop table t1;
create table t1(id int not null, col1 int AUTO_INCREMENT, col2 varchar(255) not null, index(col2, id, col1))comment="sequoiadb:{ table_options: { ShardingKey: { id: 1 }, ShardingType: 'hash', AutoSplit:true } }";
insert into t1(id, col2) values(1, 'var1'), (2, 'var2'), (3, 'var3'), (4, 'var4'), (5, 'var5'), (6, 'var6'), (7, 'var7'), (8, 'var8'), (9, 'var9'), (10, 'var10');
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `col1` int(11) NOT NULL AUTO_INCREMENT,
  `col2` varchar(255) NOT NULL,
  KEY `col2` (`col2`,`id`,`col1`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { id: 1 }, ShardingType: ''hash'', AutoSplit:true } }'
select * from t1 order by col1;
id	col1	col2
1	1	var1
2	2	var2
3	3	var3
4	4	var4
5	5	var5
6	6	var6
7	7	var7
8	8	var8
9	9	var9
10	10	var10
ALTER TABLE t1 DROP col1, algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `col2` varchar(255) NOT NULL,
  KEY `col2` (`col2`,`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ table_options: { ShardingKey: { id: 1 }, ShardingType: ''hash'', AutoSplit:true } }'
insert into t1(id, col2) values(11, 'var11');
select * from t1 order by id;
id	col2
1	var1
2	var2
3	var3
4	var4
5	var5
6	var6
7	var7
8	var8
9	var9
10	var10
11	var11
drop table t1;
create table t2(id int AUTO_INCREMENT KEY);
create table t1(id int AUTO_INCREMENT KEY);
insert into t1() values(), (), (), (), (), (), (), (), (), ();
ALTER TABLE t1 ADD (col1 varchar(255) COMMENT 'string' COLLATE utf8_bin, col2 int, foreign key (col2) references t2(id)), algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `col1` varchar(255) CHARACTER SET utf8 COLLATE utf8_bin DEFAULT NULL COMMENT 'string',
  `col2` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `col2` (`col2`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(col1, col2) values('string1', 100);
select * from t1 order by id;
id	col1	col2
1	NULL	NULL
2	NULL	NULL
3	NULL	NULL
4	NULL	NULL
5	NULL	NULL
6	NULL	NULL
7	NULL	NULL
8	NULL	NULL
9	NULL	NULL
10	NULL	NULL
11	string1	100
ALTER TABLE t1 DROP col1, algorithm = inplace;
ALTER TABLE t1 DROP col2, algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values();
select * from t1 order by id;
id
1
2
3
4
5
6
7
8
9
10
11
12
drop table t1,t2;
create table t1(id int AUTO_INCREMENT KEY);
insert into t1() values(), (), (), (), (), (), (), (), (), ();
ALTER TABLE t1 ADD(col1 DATETIME not null DEFAULT CURRENT_TIMESTAMP), algorithm = inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: DEFAULT CURRENT_TIMESTAMP is unsupported.. Try ALGORITHM=COPY
ALTER TABLE t1 ADD(col1 TIMESTAMP not null DEFAULT CURRENT_TIMESTAMP), algorithm = inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: DEFAULT CURRENT_TIMESTAMP is unsupported.. Try ALGORITHM=COPY
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1 order by id;
id
1
2
3
4
5
6
7
8
9
10
drop table t1;
set sql_mode = "ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION";
create table t1(id int AUTO_INCREMENT KEY);
insert into t1() values(), (), (), (), (), (), (), (), (), ();
ALTER TABLE t1 ADD(col1 DATETIME DEFAULT 0), algorithm = inplace;
ERROR 42000: Invalid default value for 'col1'
ALTER TABLE t1 ADD(col2 DATE DEFAULT 0), algorithm = inplace;
ERROR 42000: Invalid default value for 'col2'
ALTER TABLE t1 ADD(col3 TIMESTAMP DEFAULT 0), algorithm = inplace;
ERROR 42000: Invalid default value for 'col3'
ALTER TABLE t1 ADD(col1 DATETIME NOT NULL), algorithm = inplace;
ERROR 22007: Incorrect datetime value: '0000-00-00 00:00:00' for column `test_alter`.`t1`.`col1` at row 1
ALTER TABLE t1 ADD(col2 DATETIME NOT NULL), algorithm = inplace;
ERROR 22007: Incorrect datetime value: '0000-00-00 00:00:00' for column `test_alter`.`t1`.`col2` at row 1
ALTER TABLE t1 ADD(col3 DATETIME NOT NULL), algorithm = inplace;
ERROR 22007: Incorrect datetime value: '0000-00-00 00:00:00' for column `test_alter`.`t1`.`col3` at row 1
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1 order by id;
id
1
2
3
4
5
6
7
8
9
10
drop table t1;
set sql_mode = default;
create table t1(id int KEY, col1 int);
insert into t1 values(1,1),(2,2),(3,3),(4,4),(5,5),(6,6),(7,7),(8,8),(9,9),(10,10);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `col1` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1 order by id;
id	col1
1	1
2	2
3	3
4	4
5	5
6	6
7	7
8	8
9	9
10	10
ALTER TABLE t1 DROP id, algorithm = inplace;
ERROR HY000: Sharding key cannot be updated
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `col1` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select * from t1 order by id;
id	col1
1	1
2	2
3	3
4	4
5	5
6	6
7	7
8	8
9	9
10	10
drop table t1;
create table t1 ( id int auto_increment primary key, a tinyint default 1, b smallint default 1, c int default 1, d bigint default 1 );
insert into t1 values (),(),(),(),(),(),(),(),(),();
insert into t1(a,b,c,d) values (2,3,4,5), (6,7,8,9), (10,11,12,13);
insert into t1 values (),(),(),(),();
select * from t1 order by id;
id	a	b	c	d
1	1	1	1	1
2	1	1	1	1
3	1	1	1	1
4	1	1	1	1
5	1	1	1	1
6	1	1	1	1
7	1	1	1	1
8	1	1	1	1
9	1	1	1	1
10	1	1	1	1
11	2	3	4	5
12	6	7	8	9
13	10	11	12	13
14	1	1	1	1
15	1	1	1	1
16	1	1	1	1
17	1	1	1	1
18	1	1	1	1
alter table t1 change a a tinyint default -10, algorithm=inplace;
alter table t1 change b b smallint default -10, algorithm=inplace;
alter table t1 change c c int default -10, algorithm=inplace;
alter table t1 change d d bigint default -10, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` tinyint(4) DEFAULT -10,
  `b` smallint(6) DEFAULT -10,
  `c` int(11) DEFAULT -10,
  `d` bigint(20) DEFAULT -10,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (),(),(),(),();
insert into t1(a,b,c,d) values (-10,-10,-10,-10), (1,1,1,1);
insert into t1 values ();
select * from t1 order by id;
id	a	b	c	d
1	1	1	1	1
2	1	1	1	1
3	1	1	1	1
4	1	1	1	1
5	1	1	1	1
6	1	1	1	1
7	1	1	1	1
8	1	1	1	1
9	1	1	1	1
10	1	1	1	1
11	2	3	4	5
12	6	7	8	9
13	10	11	12	13
14	1	1	1	1
15	1	1	1	1
16	1	1	1	1
17	1	1	1	1
18	1	1	1	1
19	-10	-10	-10	-10
20	-10	-10	-10	-10
21	-10	-10	-10	-10
22	-10	-10	-10	-10
23	-10	-10	-10	-10
24	-10	-10	-10	-10
25	1	1	1	1
26	-10	-10	-10	-10
alter table t1 modify a tinyint, algorithm=inplace;
alter table t1 modify b smallint, algorithm=inplace;
alter table t1 modify c int, algorithm=inplace;
alter table t1 modify d bigint, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` tinyint(4) DEFAULT NULL,
  `b` smallint(6) DEFAULT NULL,
  `c` int(11) DEFAULT NULL,
  `d` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d) values (-10,-10,-10,-10), (1,1,1,1);
insert into t1 values ();
select * from t1 order by id;
id	a	b	c	d
1	1	1	1	1
2	1	1	1	1
3	1	1	1	1
4	1	1	1	1
5	1	1	1	1
6	1	1	1	1
7	1	1	1	1
8	1	1	1	1
9	1	1	1	1
10	1	1	1	1
11	2	3	4	5
12	6	7	8	9
13	10	11	12	13
14	1	1	1	1
15	1	1	1	1
16	1	1	1	1
17	1	1	1	1
18	1	1	1	1
19	-10	-10	-10	-10
20	-10	-10	-10	-10
21	-10	-10	-10	-10
22	-10	-10	-10	-10
23	-10	-10	-10	-10
24	-10	-10	-10	-10
25	1	1	1	1
26	-10	-10	-10	-10
27	-10	-10	-10	-10
28	1	1	1	1
29	NULL	NULL	NULL	NULL
drop table t1;
create table t1 ( id int auto_increment primary key, a char(10) default 'a', b varchar(10) default 'a', c binary(8) default 'a', d varbinary(8) );
insert into t1 values (),(),(),(),(),(),(),(),(),();
insert into t1(a,b,c,d) values ('bcdef','bcdef','bcdef','bcdef'), ('opqrst','opqrst','opqrst','opqrst');
insert into t1 values (),(),(),(),();
select * from t1 order by id;
id	a	b	c	d
1	a	a	a       	NULL
2	a	a	a       	NULL
3	a	a	a       	NULL
4	a	a	a       	NULL
5	a	a	a       	NULL
6	a	a	a       	NULL
7	a	a	a       	NULL
8	a	a	a       	NULL
9	a	a	a       	NULL
10	a	a	a       	NULL
11	bcdef	bcdef	bcdef   	bcdef
12	opqrst	opqrst	opqrst  	opqrst
13	a	a	a       	NULL
14	a	a	a       	NULL
15	a	a	a       	NULL
16	a	a	a       	NULL
17	a	a	a       	NULL
alter table t1 change a a char(10) default '#!*()', algorithm=inplace;
alter table t1 change b b varchar(10) default -1, algorithm=inplace;
alter table t1 change c c binary(8) default '#!*()', algorithm=inplace;
alter table t1 change d d varbinary(8) default -1, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` char(10) DEFAULT '#!*()',
  `b` varchar(10) DEFAULT '-1',
  `c` binary(8) DEFAULT '#!*()\0\0\0',
  `d` varbinary(8) DEFAULT '-1',
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (),(),(),(),();
insert into t1(a,b,c,d) values ('#!*()', -1, '#!*()', -1), ('a', 'a', 'a', 'a');
insert into t1 values ();
select * from t1 order by id;
id	a	b	c	d
1	a	a	a       	NULL
2	a	a	a       	NULL
3	a	a	a       	NULL
4	a	a	a       	NULL
5	a	a	a       	NULL
6	a	a	a       	NULL
7	a	a	a       	NULL
8	a	a	a       	NULL
9	a	a	a       	NULL
10	a	a	a       	NULL
11	bcdef	bcdef	bcdef   	bcdef
12	opqrst	opqrst	opqrst  	opqrst
13	a	a	a       	NULL
14	a	a	a       	NULL
15	a	a	a       	NULL
16	a	a	a       	NULL
17	a	a	a       	NULL
18	#!*()	-1	#!*()   	-1
19	#!*()	-1	#!*()   	-1
20	#!*()	-1	#!*()   	-1
21	#!*()	-1	#!*()   	-1
22	#!*()	-1	#!*()   	-1
23	#!*()	-1	#!*()   	-1
24	a	a	a       	a
25	#!*()	-1	#!*()   	-1
alter table t1 modify a char(10), algorithm=inplace;
alter table t1 modify b varchar(10), algorithm=inplace;
alter table t1 modify c binary(8), algorithm=inplace;
alter table t1 modify d varbinary(8), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` char(10) DEFAULT NULL,
  `b` varchar(10) DEFAULT NULL,
  `c` binary(8) DEFAULT NULL,
  `d` varbinary(8) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d) values ('#!*()', -1, '#!*()', -1), ('a', 'a', 'a', 'a');
insert into t1 values ();
select * from t1 order by id;
id	a	b	c	d
1	a	a	a       	NULL
2	a	a	a       	NULL
3	a	a	a       	NULL
4	a	a	a       	NULL
5	a	a	a       	NULL
6	a	a	a       	NULL
7	a	a	a       	NULL
8	a	a	a       	NULL
9	a	a	a       	NULL
10	a	a	a       	NULL
11	bcdef	bcdef	bcdef   	bcdef
12	opqrst	opqrst	opqrst  	opqrst
13	a	a	a       	NULL
14	a	a	a       	NULL
15	a	a	a       	NULL
16	a	a	a       	NULL
17	a	a	a       	NULL
18	#!*()	-1	#!*()   	-1
19	#!*()	-1	#!*()   	-1
20	#!*()	-1	#!*()   	-1
21	#!*()	-1	#!*()   	-1
22	#!*()	-1	#!*()   	-1
23	#!*()	-1	#!*()   	-1
24	a	a	a       	a
25	#!*()	-1	#!*()   	-1
26	#!*()	-1	#!*()   	-1
27	a	a	a       	a
28	NULL	NULL	NULL	NULL
drop table t1;
create table t1 ( id int auto_increment primary key, a float default 1.0001, b double default 1.0001, c decimal default 1.0001 );
Warnings:
Note	1265	Data truncated for column 'c' at row 1
insert into t1 values (),(),(),(),(),(),(),(),(),();
insert into t1(a,b,c) values (1e1, 1e1, 1e1), (123.23E+02, 123.23E+02, 123.23E+02);
insert into t1 values (),(),(),();
select * from t1 order by id;
id	a	b	c
1	1.0001	1.0001	1
2	1.0001	1.0001	1
3	1.0001	1.0001	1
4	1.0001	1.0001	1
5	1.0001	1.0001	1
6	1.0001	1.0001	1
7	1.0001	1.0001	1
8	1.0001	1.0001	1
9	1.0001	1.0001	1
10	1.0001	1.0001	1
11	10	10	10
12	12323	12323	12323
13	1.0001	1.0001	1
14	1.0001	1.0001	1
15	1.0001	1.0001	1
16	1.0001	1.0001	1
alter table t1 change a a float default 6e-16, algorithm=inplace;
alter table t1 change b b double default 6e-16, algorithm=inplace;
alter table t1 change c c decimal default 6e-16, algorithm=inplace;
Warnings:
Note	1265	Data truncated for column 'c' at row 1
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` float DEFAULT 6e-16,
  `b` double DEFAULT 6e-16,
  `c` decimal(10,0) DEFAULT 0,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (),(),(),();
insert into t1(a,b,c) values (6e-16, 6e-16, 6e-16), (1.0001, 1.0001, 1.0001);
Warnings:
Note	1265	Data truncated for column 'c' at row 1
Note	1265	Data truncated for column 'c' at row 2
insert into t1 values ();
select * from t1 order by id;
id	a	b	c
1	1.0001	1.0001	1
2	1.0001	1.0001	1
3	1.0001	1.0001	1
4	1.0001	1.0001	1
5	1.0001	1.0001	1
6	1.0001	1.0001	1
7	1.0001	1.0001	1
8	1.0001	1.0001	1
9	1.0001	1.0001	1
10	1.0001	1.0001	1
11	10	10	10
12	12323	12323	12323
13	1.0001	1.0001	1
14	1.0001	1.0001	1
15	1.0001	1.0001	1
16	1.0001	1.0001	1
17	6e-16	6e-16	0
18	6e-16	6e-16	0
19	6e-16	6e-16	0
20	6e-16	6e-16	0
21	6e-16	6e-16	0
22	1.0001	1.0001	1
23	6e-16	6e-16	0
alter table t1 modify a float, algorithm=inplace;
alter table t1 modify b double, algorithm=inplace;
alter table t1 modify c decimal, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` float DEFAULT NULL,
  `b` double DEFAULT NULL,
  `c` decimal(10,0) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (),(),(),();
insert into t1(a,b,c) values (6e-16, 6e-16, 6e-16), (1.0001, 1.0001, 1.0001);
Warnings:
Note	1265	Data truncated for column 'c' at row 1
Note	1265	Data truncated for column 'c' at row 2
insert into t1 values ();
select * from t1 order by id;
id	a	b	c
1	1.0001	1.0001	1
2	1.0001	1.0001	1
3	1.0001	1.0001	1
4	1.0001	1.0001	1
5	1.0001	1.0001	1
6	1.0001	1.0001	1
7	1.0001	1.0001	1
8	1.0001	1.0001	1
9	1.0001	1.0001	1
10	1.0001	1.0001	1
11	10	10	10
12	12323	12323	12323
13	1.0001	1.0001	1
14	1.0001	1.0001	1
15	1.0001	1.0001	1
16	1.0001	1.0001	1
17	6e-16	6e-16	0
18	6e-16	6e-16	0
19	6e-16	6e-16	0
20	6e-16	6e-16	0
21	6e-16	6e-16	0
22	1.0001	1.0001	1
23	6e-16	6e-16	0
24	NULL	NULL	NULL
25	NULL	NULL	NULL
26	NULL	NULL	NULL
27	NULL	NULL	NULL
28	6e-16	6e-16	0
29	1.0001	1.0001	1
30	NULL	NULL	NULL
drop table t1;
create table t1 ( id int auto_increment primary key, a year default 1999, b date default '2030-12-14', c time default '01:01:01', d datetime default CURRENT_TIMESTAMP, e timestamp default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP);
insert into t1 values (),(),(),(),(),(),(),(),(),();
insert into t1(a,b,c,d,e) values(2000, "2002-03-04",'09:00:00','2003-03-01 00:00:00', "19990102030405"), (2001, "2002-03-05",'10:11:00','2004-04-01 00:00:00', "2004-12-31 23:59:59");
insert into t1 values (),(),(),();
select * from t1 order by id;
id	a	b	c	d	e
1	1999	2030-12-14	01:01:01	x	x
2	1999	2030-12-14	01:01:01	x	x
3	1999	2030-12-14	01:01:01	x	x
4	1999	2030-12-14	01:01:01	x	x
5	1999	2030-12-14	01:01:01	x	x
6	1999	2030-12-14	01:01:01	x	x
7	1999	2030-12-14	01:01:01	x	x
8	1999	2030-12-14	01:01:01	x	x
9	1999	2030-12-14	01:01:01	x	x
10	1999	2030-12-14	01:01:01	x	x
11	2000	2002-03-04	09:00:00	x	x
12	2001	2002-03-05	10:11:00	x	x
13	1999	2030-12-14	01:01:01	x	x
14	1999	2030-12-14	01:01:01	x	x
15	1999	2030-12-14	01:01:01	x	x
16	1999	2030-12-14	01:01:01	x	x
alter table t1 change a a year default 2056, algorithm=inplace;
alter table t1 change b b date default "2019-01-01", algorithm=inplace;
alter table t1 change c c time default '00:00:00', algorithm=inplace;
alter table t1 change d d datetime default '9999-12-31 00:00:00', algorithm=inplace;
alter table t1 change e e timestamp default "19990102030405", algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` year(4) DEFAULT 2056,
  `b` date DEFAULT '2019-01-01',
  `c` time DEFAULT '00:00:00',
  `d` datetime DEFAULT '9999-12-31 00:00:00',
  `e` timestamp NOT NULL DEFAULT '1999-01-02 03:04:05',
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (),(),(),();
insert into t1(a,b,c,d,e) values(2000, "2002-03-04",'09:00:00','2003-03-01 00:00:00', "19990102030405"), (2001, "2002-03-05",'10:11:00','2004-04-01 00:00:00', "2004-12-31 23:59:59");
insert into t1 values ();
select * from t1 order by id;
id	a	b	c	d	e
1	1999	2030-12-14	01:01:01	x	x
2	1999	2030-12-14	01:01:01	x	x
3	1999	2030-12-14	01:01:01	x	x
4	1999	2030-12-14	01:01:01	x	x
5	1999	2030-12-14	01:01:01	x	x
6	1999	2030-12-14	01:01:01	x	x
7	1999	2030-12-14	01:01:01	x	x
8	1999	2030-12-14	01:01:01	x	x
9	1999	2030-12-14	01:01:01	x	x
10	1999	2030-12-14	01:01:01	x	x
11	2000	2002-03-04	09:00:00	x	x
12	2001	2002-03-05	10:11:00	x	x
13	1999	2030-12-14	01:01:01	x	x
14	1999	2030-12-14	01:01:01	x	x
15	1999	2030-12-14	01:01:01	x	x
16	1999	2030-12-14	01:01:01	x	x
17	2056	2019-01-01	00:00:00	x	x
18	2056	2019-01-01	00:00:00	x	x
19	2056	2019-01-01	00:00:00	x	x
20	2056	2019-01-01	00:00:00	x	x
21	2000	2002-03-04	09:00:00	x	x
22	2001	2002-03-05	10:11:00	x	x
23	2056	2019-01-01	00:00:00	x	x
alter table t1 modify a year default 1999, algorithm=inplace;
alter table t1 modify d datetime default CURRENT_TIMESTAMP, algorithm=inplace;
alter table t1 modify e timestamp default CURRENT_TIMESTAMP, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` year(4) DEFAULT 1999,
  `b` date DEFAULT '2019-01-01',
  `c` time DEFAULT '00:00:00',
  `d` datetime DEFAULT current_timestamp(),
  `e` timestamp NOT NULL DEFAULT current_timestamp(),
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values ();
select * from t1 order by id;
id	a	b	c	d	e
1	1999	2030-12-14	01:01:01	x	x
2	1999	2030-12-14	01:01:01	x	x
3	1999	2030-12-14	01:01:01	x	x
4	1999	2030-12-14	01:01:01	x	x
5	1999	2030-12-14	01:01:01	x	x
6	1999	2030-12-14	01:01:01	x	x
7	1999	2030-12-14	01:01:01	x	x
8	1999	2030-12-14	01:01:01	x	x
9	1999	2030-12-14	01:01:01	x	x
10	1999	2030-12-14	01:01:01	x	x
11	2000	2002-03-04	09:00:00	x	x
12	2001	2002-03-05	10:11:00	x	x
13	1999	2030-12-14	01:01:01	x	x
14	1999	2030-12-14	01:01:01	x	x
15	1999	2030-12-14	01:01:01	x	x
16	1999	2030-12-14	01:01:01	x	x
17	2056	2019-01-01	00:00:00	x	x
18	2056	2019-01-01	00:00:00	x	x
19	2056	2019-01-01	00:00:00	x	x
20	2056	2019-01-01	00:00:00	x	x
21	2000	2002-03-04	09:00:00	x	x
22	2001	2002-03-05	10:11:00	x	x
23	2056	2019-01-01	00:00:00	x	x
24	1999	2019-01-01	00:00:00	x	x
alter table t1 modify a year, algorithm=inplace;
alter table t1 modify b date, algorithm=inplace;
alter table t1 modify c time, algorithm=inplace;
alter table t1 modify d datetime, algorithm=inplace;
alter table t1 modify e timestamp, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` year(4) DEFAULT NULL,
  `b` date DEFAULT NULL,
  `c` time DEFAULT NULL,
  `d` datetime DEFAULT NULL,
  `e` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values ();
insert into t1(a,b,c,d,e) values(2020, "2020-02-02",'10:00:00','2020-02-10 00:00:00', "19990102030405"), (2021, "2021-1-02",'10:11:00','2020-03-01 00:00:00', "2021-12-31 23:59:59");
select * from t1 order by id;
id	a	b	c	d	e
1	1999	2030-12-14	01:01:01	x	x
2	1999	2030-12-14	01:01:01	x	x
3	1999	2030-12-14	01:01:01	x	x
4	1999	2030-12-14	01:01:01	x	x
5	1999	2030-12-14	01:01:01	x	x
6	1999	2030-12-14	01:01:01	x	x
7	1999	2030-12-14	01:01:01	x	x
8	1999	2030-12-14	01:01:01	x	x
9	1999	2030-12-14	01:01:01	x	x
10	1999	2030-12-14	01:01:01	x	x
11	2000	2002-03-04	09:00:00	x	x
12	2001	2002-03-05	10:11:00	x	x
13	1999	2030-12-14	01:01:01	x	x
14	1999	2030-12-14	01:01:01	x	x
15	1999	2030-12-14	01:01:01	x	x
16	1999	2030-12-14	01:01:01	x	x
17	2056	2019-01-01	00:00:00	x	x
18	2056	2019-01-01	00:00:00	x	x
19	2056	2019-01-01	00:00:00	x	x
20	2056	2019-01-01	00:00:00	x	x
21	2000	2002-03-04	09:00:00	x	x
22	2001	2002-03-05	10:11:00	x	x
23	2056	2019-01-01	00:00:00	x	x
24	1999	2019-01-01	00:00:00	x	x
25	NULL	NULL	NULL	x	x
26	2020	2020-02-02	10:00:00	x	x
27	2021	2021-01-02	10:11:00	x	x
drop table t1;
create table t1 ( id int auto_increment primary key, a bit(8) default 1, b bool default false, c enum('a','c','d') default 'd', d set('a','b','c','d','e') default 'a,b,e');
insert into t1 values (),(),(),(),(),(),(),(),(),();
insert into t1(a,b,c,d) values (1, true, 'a', 'a,b'), (2, true, 'c', 'b,c'), (3, false, 'd', 'a,b,e');
insert into t1 values (),(),(),();
select * from t1 order by id;
id	a	b	c	d
1		0	d	a,b,e
2		0	d	a,b,e
3		0	d	a,b,e
4		0	d	a,b,e
5		0	d	a,b,e
6		0	d	a,b,e
7		0	d	a,b,e
8		0	d	a,b,e
9		0	d	a,b,e
10		0	d	a,b,e
11		1	a	a,b
12		1	c	b,c
13		0	d	a,b,e
14		0	d	a,b,e
15		0	d	a,b,e
16		0	d	a,b,e
17		0	d	a,b,e
alter table t1 change a a bit(8) default 7, algorithm=inplace;
alter table t1 change b b bool default false, algorithm=inplace;
alter table t1 change c c enum('a','c','d') default 'a', algorithm=inplace;
alter table t1 change d d set('a','b','c','d','e') default 'b,a,e', algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` bit(8) DEFAULT b'111',
  `b` tinyint(1) DEFAULT 0,
  `c` enum('a','c','d') DEFAULT 'a',
  `d` set('a','b','c','d','e') DEFAULT 'a,b,e',
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values ();
insert into t1(a,b,c,d) values (1, false, 'a', 'b,c'), (7, true, 'c', 'b,a,e');
select * from t1 order by id;
id	a	b	c	d
1		0	d	a,b,e
2		0	d	a,b,e
3		0	d	a,b,e
4		0	d	a,b,e
5		0	d	a,b,e
6		0	d	a,b,e
7		0	d	a,b,e
8		0	d	a,b,e
9		0	d	a,b,e
10		0	d	a,b,e
11		1	a	a,b
12		1	c	b,c
13		0	d	a,b,e
14		0	d	a,b,e
15		0	d	a,b,e
16		0	d	a,b,e
17		0	d	a,b,e
18		0	a	a,b,e
19		0	a	b,c
20		1	c	a,b,e
alter table t1 modify a bit(8), algorithm=inplace;
alter table t1 modify b bool, algorithm=inplace;
alter table t1 modify c enum('a','c','d'), algorithm=inplace;
alter table t1 modify d set('a','b','c','d','e'), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` bit(8) DEFAULT NULL,
  `b` tinyint(1) DEFAULT NULL,
  `c` enum('a','c','d') DEFAULT NULL,
  `d` set('a','b','c','d','e') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values ();
insert into t1(a,b,c,d) values (1, false, 'a', 'b,c'), (7, true, 'c', 'b,a,e');
select * from t1 order by id;
id	a	b	c	d
1		0	d	a,b,e
2		0	d	a,b,e
3		0	d	a,b,e
4		0	d	a,b,e
5		0	d	a,b,e
6		0	d	a,b,e
7		0	d	a,b,e
8		0	d	a,b,e
9		0	d	a,b,e
10		0	d	a,b,e
11		1	a	a,b
12		1	c	b,c
13		0	d	a,b,e
14		0	d	a,b,e
15		0	d	a,b,e
16		0	d	a,b,e
17		0	d	a,b,e
18		0	a	a,b,e
19		0	a	b,c
20		1	c	a,b,e
21	NULL	NULL	NULL	NULL
22		0	a	b,c
23		1	c	a,b,e
drop table t1;
create table t1 ( id int auto_increment primary key, a tinyint, b smallint, c int, d bigint );
insert into t1(a,b,c,d) values (2,2,2,2),(3,3,3,3), (5,5,5,5), (9,9,9,9), (4,4,4,4), (7,7,7,7), (10,10,10,10), (17,17,17,17),(21,21,21,21);
select * from t1 order by id;
id	a	b	c	d
1	2	2	2	2
2	3	3	3	3
3	5	5	5	5
4	9	9	9	9
5	4	4	4	4
6	7	7	7	7
7	10	10	10	10
8	17	17	17	17
9	21	21	21	21
alter table t1 change a a tinyint not null, algorithm=inplace;
alter table t1 change b b smallint not null, algorithm=inplace;
alter table t1 change c c int not null, algorithm=inplace;
alter table t1 change d d bigint not null, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` tinyint(4) NOT NULL,
  `b` smallint(6) NOT NULL,
  `c` int(11) NOT NULL,
  `d` bigint(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d) values (-10,-10,-10,-10), (1,1,1,1);
select * from t1 order by id;
id	a	b	c	d
1	2	2	2	2
2	3	3	3	3
3	5	5	5	5
4	9	9	9	9
5	4	4	4	4
6	7	7	7	7
7	10	10	10	10
8	17	17	17	17
9	21	21	21	21
10	-10	-10	-10	-10
11	1	1	1	1
alter table t1 modify a tinyint, algorithm=inplace;
alter table t1 modify b smallint, algorithm=inplace;
alter table t1 modify c int, algorithm=inplace;
alter table t1 modify d bigint, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` tinyint(4) DEFAULT NULL,
  `b` smallint(6) DEFAULT NULL,
  `c` int(11) DEFAULT NULL,
  `d` bigint(20) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d) values (-10,-10,-10,-10), (1,1,1,1), (-101,-101,-101,-101);
insert into t1 values (),();
select * from t1 order by id;
id	a	b	c	d
1	2	2	2	2
2	3	3	3	3
3	5	5	5	5
4	9	9	9	9
5	4	4	4	4
6	7	7	7	7
7	10	10	10	10
8	17	17	17	17
9	21	21	21	21
10	-10	-10	-10	-10
11	1	1	1	1
12	-10	-10	-10	-10
13	1	1	1	1
14	-101	-101	-101	-101
15	NULL	NULL	NULL	NULL
16	NULL	NULL	NULL	NULL
set sql_mode = "STRICT_TRANS_TABLES";
alter table t1 change a a tinyint not null;
ERROR 22004: Invalid use of NULL value
set sql_mode = "STRICT_ALL_TABLES";
alter table t1 change a a tinyint not null;
ERROR 22004: Invalid use of NULL value
select * from t1 order by id;
id	a	b	c	d
1	2	2	2	2
2	3	3	3	3
3	5	5	5	5
4	9	9	9	9
5	4	4	4	4
6	7	7	7	7
7	10	10	10	10
8	17	17	17	17
9	21	21	21	21
10	-10	-10	-10	-10
11	1	1	1	1
12	-10	-10	-10	-10
13	1	1	1	1
14	-101	-101	-101	-101
15	NULL	NULL	NULL	NULL
16	NULL	NULL	NULL	NULL
set sql_mode = default;
drop table t1;
set sql_mode = "STRICT_ALL_TABLES";
create table t1(id int auto_increment primary key, a bigint, b char(255), c varchar(255));
alter table t1 modify a mediumint not null,algorithm=inplace;
insert into t1(a,b,c) values(1,'a','a');
alter table t1 modify b char(100) not null,algorithm=inplace;
insert into t1(a,b,c) values(1,'a','aaaaa'),(1,'a',null);
alter table t1 modify c varchar(5) not null,algorithm=inplace;
ERROR 22004: Invalid use of NULL value
select * from t1 order by id;
id	a	b	c
1	1	a	a
2	1	a	aaaaa
3	1	a	NULL
set sql_mode= "";
alter table t1 modify c varchar(255) not null,algorithm=inplace;
Warnings:
Warning	1263	Column set to default value; NULL supplied to NOT NULL column 'c' at row 1
select * from t1 order by id;
id	a	b	c
1	1	a	a
2	1	a	aaaaa
3	1	a	
drop table t1;
set sql_mode = default;
create table t1 ( id int auto_increment primary key, a char(10), b varchar(10), c binary(8), d varbinary(8) );
insert into t1(a,b,c,d) values ('bcdef','bcdef','bcdef','bcdef'),('opqrst','opqrst','opqrst','opqrst'), ('xyo', 'xyo', 'xyo', 'xyo'), ('bibubibu', 'bibubibu','bibubibu', 'bibubibu'), ('aaa', 'aaa', 'aaa', 'aaa'), ('ccc', 'ccc', 'ccc', 'ccc');
select * from t1 order by id;
id	a	b	c	d
1	bcdef	bcdef	bcdef   	bcdef
2	opqrst	opqrst	opqrst  	opqrst
3	xyo	xyo	xyo     	xyo
4	bibubibu	bibubibu	bibubibu	bibubibu
5	aaa	aaa	aaa     	aaa
6	ccc	ccc	ccc     	ccc
alter table t1 change a a char(10) not null, algorithm=inplace;
alter table t1 change b b varchar(10) not null, algorithm=inplace;
alter table t1 change c c binary(8) not null, algorithm=inplace;
alter table t1 change d d varbinary(8) not null, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` char(10) NOT NULL,
  `b` varchar(10) NOT NULL,
  `c` binary(8) NOT NULL,
  `d` varbinary(8) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d) values ('a', 'a', 'a', 'a'),('b', 'b', 'b', 'b'),('c', 'c', 'c', 'c'), ('#!*()', -1, '#!*()', -1);
select * from t1 order by id;
id	a	b	c	d
1	bcdef	bcdef	bcdef   	bcdef
2	opqrst	opqrst	opqrst  	opqrst
3	xyo	xyo	xyo     	xyo
4	bibubibu	bibubibu	bibubibu	bibubibu
5	aaa	aaa	aaa     	aaa
6	ccc	ccc	ccc     	ccc
7	a	a	a       	a
8	b	b	b       	b
9	c	c	c       	c
10	#!*()	-1	#!*()   	-1
alter table t1 modify a char(10), algorithm=inplace;
alter table t1 modify b varchar(10), algorithm=inplace;
alter table t1 modify c binary(8), algorithm=inplace;
alter table t1 modify d varbinary(8), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` char(10) DEFAULT NULL,
  `b` varchar(10) DEFAULT NULL,
  `c` binary(8) DEFAULT NULL,
  `d` varbinary(8) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d) values ('#!*()', -1, '#!*()', -1), (NULL,NULL,NULL,NULL), ('a', 'a', 'a', 'a');
insert into t1 values ();
select * from t1 order by id;
id	a	b	c	d
1	bcdef	bcdef	bcdef   	bcdef
2	opqrst	opqrst	opqrst  	opqrst
3	xyo	xyo	xyo     	xyo
4	bibubibu	bibubibu	bibubibu	bibubibu
5	aaa	aaa	aaa     	aaa
6	ccc	ccc	ccc     	ccc
7	a	a	a       	a
8	b	b	b       	b
9	c	c	c       	c
10	#!*()	-1	#!*()   	-1
11	#!*()	-1	#!*()   	-1
12	NULL	NULL	NULL	NULL
13	a	a	a       	a
14	NULL	NULL	NULL	NULL
drop table t1;
create table t1 ( id int auto_increment primary key, a tinytext, b mediumtext, c text, d longtext );
insert into t1(a,b,c,d) values ('bcdef','bcdef','bcdef','bcdef'), ('opqrst','opqrst','opqrst','opqrst'), ('xyo', 'xyo', 'xyo', 'xyo'), ('bibubibu', 'bibubibu','bibubibu', 'bibubibu'), ('aaa', 'aaa', 'aaa', 'aaa'), ('ccc', 'ccc', 'ccc', 'ccc');
select * from t1 order by id;
id	a	b	c	d
1	bcdef	bcdef	bcdef	bcdef
2	opqrst	opqrst	opqrst	opqrst
3	xyo	xyo	xyo	xyo
4	bibubibu	bibubibu	bibubibu	bibubibu
5	aaa	aaa	aaa	aaa
6	ccc	ccc	ccc	ccc
alter table t1 change a a tinytext not null, algorithm=inplace;
alter table t1 change b b mediumtext not null, algorithm=inplace;
alter table t1 change c c text not null, algorithm=inplace;
alter table t1 change d d longtext not null, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` tinytext NOT NULL,
  `b` mediumtext NOT NULL,
  `c` text NOT NULL,
  `d` longtext NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d) values ('a', 'a', 'a', 'a'),('b', 'b', 'b', 'b'),('c', 'c', 'c', 'c'), ('#!*()', -1, '#!*()', -1);
select * from t1 order by id;
id	a	b	c	d
1	bcdef	bcdef	bcdef	bcdef
2	opqrst	opqrst	opqrst	opqrst
3	xyo	xyo	xyo	xyo
4	bibubibu	bibubibu	bibubibu	bibubibu
5	aaa	aaa	aaa	aaa
6	ccc	ccc	ccc	ccc
7	a	a	a	a
8	b	b	b	b
9	c	c	c	c
10	#!*()	-1	#!*()	-1
alter table t1 modify a tinytext, algorithm=inplace;
alter table t1 modify b mediumtext, algorithm=inplace;
alter table t1 modify c text, algorithm=inplace;
alter table t1 modify d longtext, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` tinytext DEFAULT NULL,
  `b` mediumtext DEFAULT NULL,
  `c` text DEFAULT NULL,
  `d` longtext DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d) values ('#!*()', -1, '#!*()', -1), (NULL,NULL,NULL,NULL), ('a', 'a', 'a', 'a');
insert into t1 values ();
select * from t1 order by id;
id	a	b	c	d
1	bcdef	bcdef	bcdef	bcdef
2	opqrst	opqrst	opqrst	opqrst
3	xyo	xyo	xyo	xyo
4	bibubibu	bibubibu	bibubibu	bibubibu
5	aaa	aaa	aaa	aaa
6	ccc	ccc	ccc	ccc
7	a	a	a	a
8	b	b	b	b
9	c	c	c	c
10	#!*()	-1	#!*()	-1
11	#!*()	-1	#!*()	-1
12	NULL	NULL	NULL	NULL
13	a	a	a	a
14	NULL	NULL	NULL	NULL
drop table t1;
create table t1 ( id int auto_increment primary key, a tinyblob, b mediumblob, c blob, d longblob );
insert into t1(a,b,c,d) values ('bcdef','bcdef','bcdef','bcdef'), ('opqrst','opqrst','opqrst','opqrst'), ('xyo', 'xyo', 'xyo', 'xyo'), ('bibubibu', 'bibubibu','bibubibu', 'bibubibu'), ('aaa', 'aaa', 'aaa', 'aaa'), ('ccc', 'ccc', 'ccc', 'ccc');
select * from t1 order by id;
id	a	b	c	d
1	bcdef	bcdef	bcdef	bcdef
2	opqrst	opqrst	opqrst	opqrst
3	xyo	xyo	xyo	xyo
4	bibubibu	bibubibu	bibubibu	bibubibu
5	aaa	aaa	aaa	aaa
6	ccc	ccc	ccc	ccc
alter table t1 change a a tinyblob not null, algorithm=inplace;
alter table t1 change b b mediumblob not null, algorithm=inplace;
alter table t1 change c c blob not null, algorithm=inplace;
alter table t1 change d d longblob not null, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` tinyblob NOT NULL,
  `b` mediumblob NOT NULL,
  `c` blob NOT NULL,
  `d` longblob NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d) values ('a', 'a', 'a', 'a'),('b', 'b', 'b', 'b'),('c', 'c', 'c', 'c'), ('#!*()', -1, '#!*()', -1);
select * from t1 order by id;
id	a	b	c	d
1	bcdef	bcdef	bcdef	bcdef
2	opqrst	opqrst	opqrst	opqrst
3	xyo	xyo	xyo	xyo
4	bibubibu	bibubibu	bibubibu	bibubibu
5	aaa	aaa	aaa	aaa
6	ccc	ccc	ccc	ccc
7	a	a	a	a
8	b	b	b	b
9	c	c	c	c
10	#!*()	-1	#!*()	-1
alter table t1 modify a tinyblob, algorithm=inplace;
alter table t1 modify b mediumblob, algorithm=inplace;
alter table t1 modify c blob, algorithm=inplace;
alter table t1 modify d longblob, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` tinyblob DEFAULT NULL,
  `b` mediumblob DEFAULT NULL,
  `c` blob DEFAULT NULL,
  `d` longblob DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d) values ('#!*()', -1, '#!*()', -1), (NULL,NULL,NULL,NULL), ('a', 'a', 'a', 'a');
insert into t1 values ();
select * from t1 order by id;
id	a	b	c	d
1	bcdef	bcdef	bcdef	bcdef
2	opqrst	opqrst	opqrst	opqrst
3	xyo	xyo	xyo	xyo
4	bibubibu	bibubibu	bibubibu	bibubibu
5	aaa	aaa	aaa	aaa
6	ccc	ccc	ccc	ccc
7	a	a	a	a
8	b	b	b	b
9	c	c	c	c
10	#!*()	-1	#!*()	-1
11	#!*()	-1	#!*()	-1
12	NULL	NULL	NULL	NULL
13	a	a	a	a
14	NULL	NULL	NULL	NULL
drop table t1;
create table t1 ( id int auto_increment primary key, a float, b double, c decimal );
insert into t1(a,b,c) values (1e1, 1e1, 1e1),(123.23E+02, 123.23E+02, 123.23E+02),(2e2, 2e2, 2e2),(123.333,123.333,123.333),(8E+01,8E+01,8E+01);
Warnings:
Note	1265	Data truncated for column 'c' at row 4
select * from t1 order by id;
id	a	b	c
1	10	10	10
2	12323	12323	12323
3	200	200	200
4	123.333	123.333	123
5	80	80	80
alter table t1 change a a float not null, algorithm=inplace;
alter table t1 change b b double not null, algorithm=inplace;
alter table t1 change c c decimal not null, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` float NOT NULL,
  `b` double NOT NULL,
  `c` decimal(10,0) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c) values (6e-16, 6e-16, 6e-16), (1.0001, 1.0001, 1.0001);
Warnings:
Note	1265	Data truncated for column 'c' at row 1
Note	1265	Data truncated for column 'c' at row 2
select * from t1 order by id;
id	a	b	c
1	10	10	10
2	12323	12323	12323
3	200	200	200
4	123.333	123.333	123
5	80	80	80
6	6e-16	6e-16	0
7	1.0001	1.0001	1
alter table t1 modify a float, algorithm=inplace;
alter table t1 modify b double, algorithm=inplace;
alter table t1 modify c decimal, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` float DEFAULT NULL,
  `b` double DEFAULT NULL,
  `c` decimal(10,0) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c) values (6e-16, 6e-16, 6e-16), (NULL,NULL,NULL), (1.0001, 1.0001, 1.0001);
Warnings:
Note	1265	Data truncated for column 'c' at row 1
Note	1265	Data truncated for column 'c' at row 3
insert into t1 values ();
select * from t1 order by id;
id	a	b	c
1	10	10	10
2	12323	12323	12323
3	200	200	200
4	123.333	123.333	123
5	80	80	80
6	6e-16	6e-16	0
7	1.0001	1.0001	1
8	6e-16	6e-16	0
9	NULL	NULL	NULL
10	1.0001	1.0001	1
11	NULL	NULL	NULL
drop table t1;
create table t1 ( id int auto_increment primary key, a year, b date, c time, d datetime, e timestamp);
insert into t1(a,b,c,d,e) values (2000, "2002-03-04",'09:00:00','2003-03-01 00:00:00', "19990102030405"), (2001, "2002-03-05",'10:11:00','2004-04-01 00:00:00', "2004-12-31 23:59:59"), (2002, current_date, current_time, current_timestamp, current_timestamp), (1999, "2019-01-10",'10:10:10','2019-01-11 00:00:00', "19990102030407"),(1998, "2012-05-10",'11:11:11','2012-04-01 00:00:00',"2012-04-01 00:00:00"), (2020, "2020-12-10",'11:11:11','2030-11-01 00:00:00',"2020-04-01 23:59:59");
alter table t1 change a a year not null, algorithm=inplace;
alter table t1 change c c time not null, algorithm=inplace;
alter table t1 change e e timestamp not null, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` year(4) NOT NULL,
  `b` date DEFAULT NULL,
  `c` time NOT NULL,
  `d` datetime DEFAULT NULL,
  `e` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d,e) values(2000, "2002-03-04",'09:00:00','2003-03-01 00:00:00', "19990102030405"), (2001, "2002-03-05",'10:11:00','2004-04-01 00:00:00', "2004-12-31 23:59:59");
alter table t1 modify a year, algorithm=inplace;
alter table t1 modify b date, algorithm=inplace;
alter table t1 modify c time, algorithm=inplace;
alter table t1 modify d datetime default CURRENT_TIMESTAMP, algorithm=inplace;
alter table t1 modify e timestamp default CURRENT_TIMESTAMP, algorithm=inplace;
insert into t1 values ();
alter table t1 modify a year, algorithm=inplace;
alter table t1 modify b date, algorithm=inplace;
alter table t1 modify c time, algorithm=inplace;
alter table t1 modify d datetime, algorithm=inplace;
alter table t1 modify e timestamp, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` year(4) DEFAULT NULL,
  `b` date DEFAULT NULL,
  `c` time DEFAULT NULL,
  `d` datetime DEFAULT NULL,
  `e` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d,e) values(2020, "2020-02-02",'10:00:00','2020-02-10 00:00:00', "19990102030405"), (NULL,NULL,NULL,NULL,NULL), (2021, "2021-1-02",'10:11:00','2020-03-01 00:00:00', "2021-12-31 23:59:59");
drop table t1;
create table t1 ( id int auto_increment primary key, a bit(8), b bool, c enum('a','c','d'), d set('a','b','c','d','e'));
insert into t1(a,b,c,d) values (1, true, 'a', 'a,b'), (2, true, 'c', 'b,c'), (3, false, 'd', 'a,b,e'), (6, false, 'c', 'a,e'), (5, false, 'a', 'b,c'), (4, true, 'c', 'd' );
select * from t1 order by id;
id	a	b	c	d
1		1	a	a,b
2		1	c	b,c
3		0	d	a,b,e
4		0	c	a,e
5		0	a	b,c
6		1	c	d
alter table t1 change a a bit(8) not null, algorithm=inplace;
alter table t1 change b b bool not null, algorithm=inplace;
alter table t1 change c c enum('a','c','d') not null, algorithm=inplace;
alter table t1 change d d set('a','b','c','d','e') not null, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` bit(8) NOT NULL,
  `b` tinyint(1) NOT NULL,
  `c` enum('a','c','d') NOT NULL,
  `d` set('a','b','c','d','e') NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d) values (1, false, 'a', 'b,c'), (7, true, 'c', 'b,a,e');
select * from t1 order by id;
id	a	b	c	d
1		1	a	a,b
2		1	c	b,c
3		0	d	a,b,e
4		0	c	a,e
5		0	a	b,c
6		1	c	d
7		0	a	b,c
8		1	c	a,b,e
alter table t1 modify a bit(8), algorithm=inplace;
alter table t1 modify b bool, algorithm=inplace;
alter table t1 modify c enum('a','c','d'), algorithm=inplace;
alter table t1 modify d set('a','b','c','d','e'), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` bit(8) DEFAULT NULL,
  `b` tinyint(1) DEFAULT NULL,
  `c` enum('a','c','d') DEFAULT NULL,
  `d` set('a','b','c','d','e') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b,c,d) values (1, false, 'a', 'b,c'), (7, true, 'c', 'b,a,e');
insert into t1 values (),();
select * from t1 order by id;
id	a	b	c	d
1		1	a	a,b
2		1	c	b,c
3		0	d	a,b,e
4		0	c	a,e
5		0	a	b,c
6		1	c	d
7		0	a	b,c
8		1	c	a,b,e
9		0	a	b,c
10		1	c	a,b,e
11	NULL	NULL	NULL	NULL
12	NULL	NULL	NULL	NULL
drop table t1;
create table t1 ( id int auto_increment primary key, a json );
insert into t1(a) values ('{"a": 2}'), ('[1,2]'), ('{"a":"b", "c":"d","ab":"abc", "bc": ["x", "y"]}'), ('["here", ["I", "am"], "!!!"]'),('"scalar string"'),('123456');
select * from t1 order by id;
id	a
1	{"a": 2}
2	[1,2]
3	{"a":"b", "c":"d","ab":"abc", "bc": ["x", "y"]}
4	["here", ["I", "am"], "!!!"]
5	"scalar string"
6	123456
alter table t1 change a a json not null, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin NOT NULL CHECK (json_valid(`a`)),
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a) values ('-32768'),('2147483647'),('18446744073709551616');
select * from t1 order by id;
id	a
1	{"a": 2}
2	[1,2]
3	{"a":"b", "c":"d","ab":"abc", "bc": ["x", "y"]}
4	["here", ["I", "am"], "!!!"]
5	"scalar string"
6	123456
7	-32768
8	2147483647
9	18446744073709551616
alter table t1 change a a json, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`a`)),
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a) values (NULL), ('"scalar string"');
insert into t1 values ();
select * from t1 order by id;
id	a
1	{"a": 2}
2	[1,2]
3	{"a":"b", "c":"d","ab":"abc", "bc": ["x", "y"]}
4	["here", ["I", "am"], "!!!"]
5	"scalar string"
6	123456
7	-32768
8	2147483647
9	18446744073709551616
10	NULL
11	"scalar string"
12	NULL
drop table t1;
create table t1 ( a bigint primary key, b float unique key, c char(16), d text charset gbk, e binary comment "I am binary")COMMENT='sequoiadb:{ auto_partition: false }';
create table t2 ( id int primary key, a bigint, b float, foreign key(a) references t1(a) match full on delete RESTRICT );
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` bigint(20) NOT NULL,
  `b` float DEFAULT NULL,
  `c` char(16) DEFAULT NULL,
  `d` text CHARACTER SET gbk COLLATE gbk_chinese_ci DEFAULT NULL,
  `e` binary(1) DEFAULT NULL COMMENT 'I am binary',
  PRIMARY KEY (`a`),
  UNIQUE KEY `b` (`b`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ auto_partition: false }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `id` int(11) NOT NULL,
  `a` bigint(20) DEFAULT NULL,
  `b` float DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `a` (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (1,123.456,'abc','abc','a'), (10,12495.495,'aaa','aaa','1'),(55,539.32,'123','123','c'),(21,10.34,'Boe','Boe','A'),(0,348.39,'bbb','bbb','t'), (16,439.543, '43ls', '43ls', 'r');
insert into t2 values (1, 1, 123.456), (10, 10, 12495.495), (55, 55, 539.32), (21, 21, 10.34),(0, 0, 348.39), (16, 16, 439.543);
select * from t1 order by a;
a	b	c	d	e
0	348.39	bbb	bbb	t
1	123.456	abc	abc	a
10	12495.5	aaa	aaa	1
16	439.543	43ls	43ls	r
21	10.34	Boe	Boe	A
55	539.32	123	123	c
select * from t2 order by id;
id	a	b
0	0	348.39
1	1	123.456
10	10	12495.5
16	16	439.543
21	21	10.34
55	55	539.32
alter table t2 drop foreign key t2_ibfk_1, algorithm = inplace;
alter table t2 add foreign key (b) references t1(b) match PARTIAL on UPDATE CASCADE, algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` bigint(20) NOT NULL,
  `b` float DEFAULT NULL,
  `c` char(16) DEFAULT NULL,
  `d` text CHARACTER SET gbk COLLATE gbk_chinese_ci DEFAULT NULL,
  `e` binary(1) DEFAULT NULL COMMENT 'I am binary',
  PRIMARY KEY (`a`),
  UNIQUE KEY `b` (`b`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ auto_partition: false }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `id` int(11) NOT NULL,
  `a` bigint(20) DEFAULT NULL,
  `b` float DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `a` (`a`),
  KEY `b` (`b`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (-12,23.3,'43kd','43kd','0'), (-3,543.543,'gfd8','gfd8','1'),(-1,30.32,'kgf9','kgf9','2');
insert into t2 values (5, 5, 23.3), (2, 2, 543.543), (-19, -19, 30.32);
select * from t1 order by a;
a	b	c	d	e
-12	23.3	43kd	43kd	0
-3	543.543	gfd8	gfd8	1
-1	30.32	kgf9	kgf9	2
0	348.39	bbb	bbb	t
1	123.456	abc	abc	a
10	12495.5	aaa	aaa	1
16	439.543	43ls	43ls	r
21	10.34	Boe	Boe	A
55	539.32	123	123	c
select * from t2 order by id;
id	a	b
-19	-19	30.32
0	0	348.39
1	1	123.456
2	2	543.543
5	5	23.3
10	10	12495.5
16	16	439.543
21	21	10.34
55	55	539.32
drop table t2,t1;
create table t1 ( a int primary key, b bigint, c char(16) );
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  `b` bigint(20) DEFAULT NULL,
  `c` char(16) DEFAULT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (1, 1, 'a'), (10, 10, '1'), (-1, -1, '2d'), (8, 8, '4c'), (101, 101, 'BaC'), (2, 2, 'gkdel');
select * from t1 order by a;
a	b	c
-1	-1	2d
1	1	a
2	2	gkdel
8	8	4c
10	10	1
101	101	BaC
alter table t1 change a a int after b, algorithm = inplace;
alter table t1 modify c char(16) first, algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `c` char(16) DEFAULT NULL,
  `b` bigint(20) DEFAULT NULL,
  `a` int(11) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values ('o', 3, 3), ('p', -8, -8), ('A', 5, 5);
select * from t1 order by a;
c	b	a
p	-8	-8
2d	-1	-1
a	1	1
gkdel	2	2
o	3	3
A	5	5
4c	8	8
1	10	10
BaC	101	101
drop table t1;
create table t1 ( id int primary key, name char(8) );
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `name` char(8) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (1,'a'), (-1,'b'), (10, '12'), (0, 'Ab'), (1001, 'Test'), (103, 'hello');
alter table t1 force, algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `name` char(8) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (4,'1'), (2,'0');
select * from t1 order by id;
id	name
-1	b
0	Ab
1	a
2	0
4	1
10	12
103	hello
1001	Test
drop table t1;
create table t1 ( id int auto_increment primary key, a enum('b','a','z'), b set('1', 'a', 'c', '2', 'k', 'y', 'x') );
insert into t1(a,b) values ('a','k,y'), ('b', '1,2,x'), ('z', 'k,c'), ('b', 'k,y,2,a'), ('a', 'x,y'), ('z', 'a,x,k,1');
alter table t1 change a a enum('1','a'), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change a a enum('b'), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` enum('b','a','z') DEFAULT NULL,
  `b` set('1','a','c','2','k','y','x') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 change a a enum('b','c','z'), algorithm = inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` enum('b','a','z') DEFAULT NULL,
  `b` set('1','a','c','2','k','y','x') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 change a a enum('1','b','c','z'), algorithm = inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` enum('b','a','z') DEFAULT NULL,
  `b` set('1','a','c','2','k','y','x') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 change b b set('1','a','c','k'), algorithm = inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` enum('b','a','z') DEFAULT NULL,
  `b` set('1','a','c','2','k','y','x') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 change b b set('0', '1', 'a', 'c', '2', 'k', 'y', 'x'), algorithm = inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` enum('b','a','z') DEFAULT NULL,
  `b` set('1','a','c','2','k','y','x') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 change a a enum('b','a','z','x','1','c'), algorithm = inplace;
alter table t1 change b b set('1', 'a', 'c', '2', 'k', 'y', 'x','m','n','0'), algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` enum('b','a','z','x','1','c') DEFAULT NULL,
  `b` set('1','a','c','2','k','y','x','m','n','0') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b) values ('a', 'x,y'), ('x', '1,a'), ('1', 'c,k'), ('c', 'y,2'), ('1', '1,a,x,m,0'), ('c', 'k,y,x,m,n,0');
select * from t1 order by id;
id	a	b
1	a	k,y
2	b	1,2,x
3	z	c,k
4	b	a,2,k,y
5	a	y,x
6	z	1,a,k,x
7	a	y,x
8	x	1,a
9	1	c,k
10	c	2,y
11	1	1,a,x,m,0
12	c	k,y,x,m,n,0
drop table t1;
create table t1 ( id smallint auto_increment primary key , a int unique key, b char(16) ) auto_increment=11 COMMENT='sequoiadb:{ auto_partition: false }';
insert into t1(a,b) values (18,'rejow'),(5,'rjle'),(1,'fj39'),(20,'gt'),(99,'uitreo'), (30,'1234');
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` smallint(6) NOT NULL AUTO_INCREMENT,
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `a` (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=21 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ auto_partition: false }'
select * from t1 order by id;
id	a	b
11	18	rejow
12	5	rjle
13	1	fj39
14	20	gt
15	99	uitreo
16	30	1234
alter table t1 auto_increment=20, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` smallint(6) NOT NULL AUTO_INCREMENT,
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `a` (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=21 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ auto_partition: false }'
insert into t1(a,b) values (101, '2323o'), (98, 'r43of'), (-2, '-bgfd42il');
select * from t1;
id	a	b
11	18	rejow
12	5	rjle
13	1	fj39
14	20	gt
15	99	uitreo
16	30	1234
17	101	2323o
18	98	r43of
19	-2	-bgfd42il
alter table t1 auto_increment=1000000, algorithm=inplace;
ERROR HY000: Invalid Argument
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` smallint(6) NOT NULL AUTO_INCREMENT,
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `a` (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=21 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ auto_partition: false }'
alter table t1 auto_increment=30, algorithm=copy;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` smallint(6) NOT NULL AUTO_INCREMENT,
  `a` int(11) DEFAULT NULL,
  `b` char(16) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `a` (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=40 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb:{ auto_partition: false }'
insert into t1(a,b) values (-543, 'heo'), (53, 'te'), (9, '!2*rlw');
select * from t1 order by id;
id	a	b
11	18	rejow
12	5	rjle
13	1	fj39
14	20	gt
15	99	uitreo
16	30	1234
17	101	2323o
18	98	r43of
19	-2	-bgfd42il
30	-543	heo
31	53	te
32	9	!2*rlw
drop table t1;
create table t1 ( id tinyint primary key );
insert into t1 values (1), (-1), (0), (8), (18), (101), (22), (127), (-128);
alter table t1 change id id smallint, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` smallint(6) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (-32768), (32767);
select * from t1 order by id;
id
-32768
-128
-1
0
1
8
18
22
101
127
32767
alter table t1 change id id mediumint, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` mediumint(9) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (8388607), (-8388608);
select * from t1 order by id;
id
-8388608
-32768
-128
-1
0
1
8
18
22
101
127
32767
8388607
alter table t1 change id id int, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (-2147483648), (2147483647);
select * from t1 order by id;
id
-2147483648
-8388608
-32768
-128
-1
0
1
8
18
22
101
127
32767
8388607
2147483647
alter table t1 change id id bigint, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bigint(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (9223372036854775807), (-9223372036854775808);
select * from t1 order by id;
id
-9223372036854775808
-2147483648
-8388608
-32768
-128
-1
0
1
8
18
22
101
127
32767
8388607
2147483647
9223372036854775807
drop table t1;
create table t1 ( id tinyint primary key, i1 tinyint, i2 tinyint, s1 smallint, s2 smallint, s3 smallint );
insert into t1 values (1,1,1,1,1,1), (-1,-1,-1,-1,-1,-1), (0,0,0,0,0,0), (8,8,8,8,8,8), (18,18,18,18,18,18), (101,101,101,101,101,101), (22,22,22,22,22,22), (127,127,127,32767,32767,32767), (-128,-128,-128,-32768,-32768,-32768);
alter table t1 change id id float(4,1), algorithm=inplace;
alter table t1 modify i1 double, algorithm=inplace;
alter table t1 modify i2 decimal(6,3), algorithm=inplace;
alter table t1 change s1 s1 float(7,2), algorithm=inplace;
alter table t1 modify s2 double, algorithm=inplace;
alter table t1 modify s3 decimal(5,0), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` float(4,1) NOT NULL,
  `i1` double DEFAULT NULL,
  `i2` decimal(6,3) DEFAULT NULL,
  `s1` float(7,2) DEFAULT NULL,
  `s2` double DEFAULT NULL,
  `s3` decimal(5,0) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (1.1000000000000001,1.1000000000000001,1.1000000000000001,1.1000000000000001,1.1000000000000001,1.1000000000000001),(10.48,10.48E+03,10.48,10.48,10.48E+03,10.48E+03);
Warnings:
Note	1265	Data truncated for column 'i2' at row 1
Note	1265	Data truncated for column 's3' at row 1
select * from t1 order by id;
id	i1	i2	s1	s2	s3
-128.0	-128	-128.000	-32768.00	-32768	-32768
-1.0	-1	-1.000	-1.00	-1	-1
0.0	0	0.000	0.00	0	0
1.0	1	1.000	1.00	1	1
1.1	1.1	1.100	1.10	1.1	1
8.0	8	8.000	8.00	8	8
10.5	10480	10.480	10.48	10480	10480
18.0	18	18.000	18.00	18	18
22.0	22	22.000	22.00	22	22
101.0	101	101.000	101.00	101	101
127.0	127	127.000	32767.00	32767	32767
drop table t1;
create table t1 ( id mediumint primary key, m1 mediumint, m2 mediumint, b1 bigint, b2 bigint, b3 bigint );
insert into t1 values (1,1,1,1,1,1), (-1,-1,-1,-1,-1,-1), (0,0,0,0,0,0), (8,8,8,8,8,8), (18,18,18,18,18,18), (101,101,101,101,101,101), (22,22,22,22,22,22),(8388607,8388607,8388607,9223372036854775807,9223372036854775807,9223372036854775807), (-8388608,-8388608,-8388608,-9223372036854775808,-9223372036854775808,-9223372036854775808);
alter table t1 change id id float(9,1), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify m1 double, algorithm=inplace;
alter table t1 modify m2 decimal, algorithm=inplace;
alter table t1 change b1 b1 float(53,20), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify b2 double(21,2), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify b3 decimal(52,30), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` mediumint(9) NOT NULL,
  `m1` double DEFAULT NULL,
  `m2` decimal(10,0) DEFAULT NULL,
  `b1` bigint(20) DEFAULT NULL,
  `b2` bigint(20) DEFAULT NULL,
  `b3` decimal(52,30) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (5830,5830,5830,85039430942,85039430942,85039430942), (-683904,-683904,-683904,-5792293719,-5792293719,-5792293719);
select * from t1 order by id;
id	m1	m2	b1	b2	b3
-8388608	-8388608	-8388608	-9223372036854775808	-9223372036854775808	-9223372036854775808.000000000000000000000000000000
-683904	-683904	-683904	-5792293719	-5792293719	-5792293719.000000000000000000000000000000
-1	-1	-1	-1	-1	-1.000000000000000000000000000000
0	0	0	0	0	0.000000000000000000000000000000
1	1	1	1	1	1.000000000000000000000000000000
8	8	8	8	8	8.000000000000000000000000000000
18	18	18	18	18	18.000000000000000000000000000000
22	22	22	22	22	22.000000000000000000000000000000
101	101	101	101	101	101.000000000000000000000000000000
5830	5830	5830	85039430942	85039430942	85039430942.000000000000000000000000000000
8388607	8388607	8388607	9223372036854775807	9223372036854775807	9223372036854775807.000000000000000000000000000000
drop table t1;
create table t1 ( id int primary key, i1 int, i2 int );
insert into t1 values (1,1,1),(-1,-1,-1),(0,0,0),(8,8,8),(18,18,18),(101,101,101),(22,22,22),(-2147483648,-2147483648,-2147483648),(2147483647,2147483647,2147483647);
alter table t1 change id id float(12,1), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify i1 double, algorithm=inplace;
alter table t1 modify i2 decimal(11,1), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `i1` double DEFAULT NULL,
  `i2` decimal(11,1) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (5830,5830,5830),(85039430,85039430,85039430),(-683904,-683904,-683904),(-57922937,-57922937,-57922937);
select * from t1 order by id;
id	i1	i2
-2147483648	-2147483648	-2147483648.0
-57922937	-57922937	-57922937.0
-683904	-683904	-683904.0
-1	-1	-1.0
0	0	0.0
1	1	1.0
8	8	8.0
18	18	18.0
22	22	22.0
101	101	101.0
5830	5830	5830.0
85039430	85039430	85039430.0
2147483647	2147483647	2147483647.0
drop table t1;
create table t1 ( id float primary key, f1 float(24,2), f2 float(11,2), f3 float(2,0), f4 float(3,0), f5 float(4,0), f6 float(5,0), f7 float(6,0), f8 float(7,0), f9 float(9,0), f10 float(10,0), f11 float(18,0), f12 float(19,0) );
insert into t1 values (-3.402823466E+38,-3402823466.0,-34028235.01,9,9,9,9,9,9,9,9,9,9);
insert into t1 values (0.1111111,0.1111111,0.1111111,10,101,101,101,101,101,101,101,101,101);
insert into t1 values (1234.56789,1234.56789,1234.56789,11,111,111,111,111,111,111,111,111,111);
insert into t1 values (-1.175494351E-38,-117549435.0,-117549435.01,99,99,99,99,99,99,99,99,99,99);
insert into t1 values (3.402823466351E+38, 3402823466.0, 34028267.35,1,1,1,1,1,1,1,1,1,1);
insert into t1 values (68940E+30, 4823348320.2, 3180553.12,0,0,0,0,0,0,0,0,0,0);
alter table t1 modify f1 float(24,3), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify f1 float(26,3), algorithm=inplace;
alter table t1 modify f2 decimal(20,2), algorithm=inplace;
alter table t1 change f3 f3 bit(8), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f4 f4 tinyint, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f6 f6 smallint, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f8 f8 mediumint, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f10 f10 int, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f12 f12 bigint, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f3 f3 tinyint, algorithm=inplace;
alter table t1 change f5 f5 smallint, algorithm=inplace;
alter table t1 change f7 f7 mediumint, algorithm=inplace;
alter table t1 change f9 f9 int, algorithm=inplace;
alter table t1 change f11 f11 bigint, algorithm=inplace;
alter table t1 change id id double, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` double NOT NULL,
  `f1` float(26,3) DEFAULT NULL,
  `f2` decimal(20,2) DEFAULT NULL,
  `f3` tinyint(4) DEFAULT NULL,
  `f4` float(3,0) DEFAULT NULL,
  `f5` smallint(6) DEFAULT NULL,
  `f6` float(5,0) DEFAULT NULL,
  `f7` mediumint(9) DEFAULT NULL,
  `f8` float(7,0) DEFAULT NULL,
  `f9` int(11) DEFAULT NULL,
  `f10` float(10,0) DEFAULT NULL,
  `f11` bigint(20) DEFAULT NULL,
  `f12` float(19,0) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (5793842.23, 84209402834.45, 4820840.10,6,6,6,6,6,6,6,6,6,6);
select * from t1 order by id;
id	f1	f2	f3	f4	f5	f6	f7	f8	f9	f10	f11	f12
-3.4028234663852886e38	-3402823424.000	-34028236.00	9	9	9	9	9	9	9	9	9	9
-1.1754943508222875e-38	-117549432.000	-117549432.00	99	99	99	99	99	99	99	99	99	99
0.1111110970377922	0.110	0.11	10	101	101	101	101	101	101	101	101	101
1234.56787109375	1234.570	1234.57	11	111	111	111	111	111	111	111	111	111
5793842.23	84209401856.000	4820840.10	6	6	6	6	6	6	6	6	6	6
6.893999937449486e34	4823348224.000	3180553.00	0	0	0	0	0	0	0	0	0	0
3.4028234663852886e38	3402823424.000	34028268.00	1	1	1	1	1	1	1	1	1	1
drop table t1;
create table t1 ( id double primary key, d1 double(24,2), d2 double(11,2), d3 double(2,0), d4 double(3,0), d5 double(4,0), d6 double(5,0), d7 double(6,0), d8 double(7,0), d9 double(9,0), d10 double(10,0), d11 double(18,0), d12 double(19,0) );
insert into t1 values (-1.7976931348623157E+308,-340288493249223466.21,-34028235.01,9,9,9,9,9,9,9,9,9,9);
insert into t1 values (0.1111111111111,0.111111111111111,0.1111111,10,101,101,101,101,101,101,101,101,101);
insert into t1 values (12344321.56789,12344321.56789,1234.56789,11,111,111,111,111,111,111,111,111,111);
insert into t1 values (-2.2250738585072014E-308,-117549749202435.30, -117549435.01,99,99,99,99,99,99,99,99,99,99);
insert into t1 values (1.7976931348623157E+308, 34028234684593436.99, 34028267.35,1,1,1,1,1,1,1,1,1,1);
insert into t1 values (3849238024892.123, 15493749234289.1, 42934729.9,0,0,0,0,0,0,0,0,0,0);
alter table t1 modify d1 double(24,3), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify d1 double(26,3), algorithm=inplace;
alter table t1 modify d2 decimal(20,2), algorithm=inplace;
alter table t1 change d3 d3 bit(8), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d4 d4 tinyint, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d6 d6 smallint, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d8 d8 mediumint, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d10 d10 int, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d12 d12 bigint, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d3 d3 tinyint, algorithm=inplace;
alter table t1 change d5 d5 smallint, algorithm=inplace;
alter table t1 change d7 d7 mediumint, algorithm=inplace;
alter table t1 change d9 d9 int, algorithm=inplace;
alter table t1 change d11 d11 bigint, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` double NOT NULL,
  `d1` double(26,3) DEFAULT NULL,
  `d2` decimal(20,2) DEFAULT NULL,
  `d3` tinyint(4) DEFAULT NULL,
  `d4` double(3,0) DEFAULT NULL,
  `d5` smallint(6) DEFAULT NULL,
  `d6` double(5,0) DEFAULT NULL,
  `d7` mediumint(9) DEFAULT NULL,
  `d8` double(7,0) DEFAULT NULL,
  `d9` int(11) DEFAULT NULL,
  `d10` double(10,0) DEFAULT NULL,
  `d11` bigint(20) DEFAULT NULL,
  `d12` double(19,0) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (5793842.23, 84209402834.45, 4820840.10,6,6,6,6,6,6,6,6,6,6);
select * from t1 order by id;
id	d1	d2	d3	d4	d5	d6	d7	d8	d9	d10	d11	d12
-1.7976931348623157e308	-340288493249223500.000	-34028235.01	9	9	9	9	9	9	9	9	9	9
-2.2250738585072014e-308	-117549749202435.300	-117549435.01	99	99	99	99	99	99	99	99	99	99
0.1111111111111	0.110	0.11	10	101	101	101	101	101	101	101	101	101
5793842.23	84209402834.450	4820840.10	6	6	6	6	6	6	6	6	6	6
12344321.56789	12344321.570	1234.57	11	111	111	111	111	111	111	111	111	111
3849238024892.123	15493749234289.100	42934729.90	0	0	0	0	0	0	0	0	0	0
1.7976931348623157e308	34028234684593436.000	34028267.35	1	1	1	1	1	1	1	1	1	1
drop table t1;
create table t1 ( id decimal primary key, d1 decimal(24,2), d3 decimal(2,0), d4 decimal(3,0), d5 decimal(4,0), d6 decimal(5,0), d7 decimal(6,0), d8 decimal(7,0), d9 decimal(9,0), d10 decimal, d11 decimal(18,0), d12 decimal(19,0) );
insert into t1 values (-34028235,-340288493249223466.21,9,9,9,9,9,9,9,9,9,9);
insert into t1 values (111111111,1111111111.11,10,101,101,101,101,101,101,101,101,101);
insert into t1 values (12344321, 2250738585734.22,11,111,111,111,111,111,111,111,111,111);
insert into t1 values (-117549435, 7976931348623157.12,99,99,99,99,99,99,99,99,99,99);
insert into t1 values (56789, 56789.4321,1,1,1,1,1,1,1,1,1,1);
Warnings:
Note	1265	Data truncated for column 'd1' at row 1
insert into t1 values (4293749, 8549374927933329.2,0,0,0,0,0,0,0,0,0,0);
alter table t1 modify d1 decimal(24,3), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d1 d1 decimal(27,3), algorithm=inplace;
alter table t1 change d3 d3 bit(8), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d4 d4 tinyint, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d6 d6 smallint, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d8 d8 mediumint, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d10 d10 int, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d12 d12 bigint, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change d3 d3 tinyint, algorithm=inplace;
alter table t1 change d5 d5 smallint, algorithm=inplace;
alter table t1 change d7 d7 mediumint, algorithm=inplace;
alter table t1 change d9 d9 int, algorithm=inplace;
alter table t1 change d11 d11 bigint, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` decimal(10,0) NOT NULL,
  `d1` decimal(27,3) DEFAULT NULL,
  `d3` tinyint(4) DEFAULT NULL,
  `d4` decimal(3,0) DEFAULT NULL,
  `d5` smallint(6) DEFAULT NULL,
  `d6` decimal(5,0) DEFAULT NULL,
  `d7` mediumint(9) DEFAULT NULL,
  `d8` decimal(7,0) DEFAULT NULL,
  `d9` int(11) DEFAULT NULL,
  `d10` decimal(10,0) DEFAULT NULL,
  `d11` bigint(20) DEFAULT NULL,
  `d12` decimal(19,0) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (5793842, 584308008420940283456734.45,6,6,6,6,6,6,6,6,6,6);
select * from t1 order by id;
id	d1	d3	d4	d5	d6	d7	d8	d9	d10	d11	d12
-117549435	7976931348623157.120	99	99	99	99	99	99	99	99	99	99
-34028235	-340288493249223466.210	9	9	9	9	9	9	9	9	9	9
56789	56789.430	1	1	1	1	1	1	1	1	1	1
4293749	8549374927933329.200	0	0	0	0	0	0	0	0	0	0
5793842	584308008420940283456734.450	6	6	6	6	6	6	6	6	6	6
12344321	2250738585734.220	11	111	111	111	111	111	111	111	111	111
111111111	1111111111.110	10	101	101	101	101	101	101	101	101	101
drop table t1;
create table t1 ( id bit(8) primary key );
insert into t1 values (b'11111111'), (b'10000001'), (b'100001'),(b'10101010'),(b'0000000'),(b'1');
alter table t1 change id id bit(16), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bit(16) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (b'1111111111111111'), (b'10101010101010');
select * from t1 order by id;
id
  
 
 !
 
 
 
*

drop table t1;
create table t1 ( id int auto_increment primary key, a enum('b','a','z'), b set('1', 'a', 'c', '2', 'k', 'y', 'x') );
insert into t1(a,b) values ('a','k,y'), ('b', '1,2,x'), ('z', 'k,c'), ('b', 'k,y,2,a'), ('a', 'x,y'), ('z', 'a,x,k,1');
alter table t1 change a a enum('b','a','z','x','1','c'), algorithm = inplace;
alter table t1 change b b set('1', 'a', 'c', '2', 'k', 'y', 'x','m','n','0'), algorithm = inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a` enum('b','a','z','x','1','c') DEFAULT NULL,
  `b` set('1','a','c','2','k','y','x','m','n','0') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(a,b) values ('a', 'x,y'), ('x', '1,a'), ('1', 'c,k'), ('c', 'y,2'), ('1', '1,a,x,m,0'), ('c', 'k,y,x,m,n,0');
select * from t1 order by id;
id	a	b
1	a	k,y
2	b	1,2,x
3	z	c,k
4	b	a,2,k,y
5	a	y,x
6	z	1,a,k,x
7	a	y,x
8	x	1,a
9	1	c,k
10	c	2,y
11	1	1,a,x,m,0
12	c	k,y,x,m,n,0
drop table t1;
create table t1 ( id tinyint unsigned primary key, i1 tinyint unsigned, i2 tinyint unsigned, i3 tinyint unsigned, i4 tinyint unsigned, i5 tinyint unsigned);
insert into t1 values (109,109,109,109,109,109),(1,1,1,1,1,1),(20,20,20,20,20,20),(127,127,127,127,127,127),(0,0,0,0,0,0),(255,255,255,255,255,255);
alter table t1 change id id bit(8), algorithm=inplace;
alter table t1 change i1 i1 tinyint unsigned, algorithm=inplace;
alter table t1 change i2 i2 smallint unsigned, algorithm=inplace;
alter table t1 change i3 i3 mediumint unsigned, algorithm=inplace;
alter table t1 change i4 i4 int unsigned, algorithm=inplace;
alter table t1 change i5 i5 bigint unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bit(8) NOT NULL,
  `i1` tinyint(3) unsigned DEFAULT NULL,
  `i2` smallint(5) unsigned DEFAULT NULL,
  `i3` mediumint(8) unsigned DEFAULT NULL,
  `i4` int(10) unsigned DEFAULT NULL,
  `i5` bigint(20) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (b'10101010',254,65535,16777215,4294967295,4294967295), (b'1001',253,65534,16777214,4294967294,4294967294);
select * from t1 order by id;
id	i1	i2	i3	i4	i5
 	0	0	0	0	0
	1	1	1	1	1
		253	65534	16777214	4294967294	4294967294
	20	20	20	20	20
m	109	109	109	109	109
	127	127	127	127	127
	254	65535	16777215	4294967295	4294967295
	255	255	255	255	255
drop table t1;
create table t1 ( id tinyint unsigned primary key, i1 tinyint unsigned );
insert into t1 values (109,109),(1,1),(20,20),(127,127),(0,0),(255,255);
alter table t1 modify id enum('a1','a2','a3','a4','a5','a6','a7','a8','a9','a10','a11','a12','a13','a14','a15','a16','a17','a18','a19','a20','a21','a22','a23','a24','a25','a26','a27','a28','a29','a30','a31','a32','a33','a34','a35','a36','a37','a38','a39','a40','a41','a42','a43','a44','a45','a46','a47','a48','a49','a50','a51','a52','a53','a54','a55','a56','a57','a58','a59','a60','a61','a62','a63','a64','a65','a66','a67','a68','a69','a70','a71','a72','a73','a74','a75','a76','a77','a78','a79','a80','a81','a82','a83','a84','a85','a86','a87','a88','a89','a90','a91','a92','a93','a94','a95','a96','a97','a98','a99','a100','a101','a102','a103','a104','a105','a106','a107','a108','a109','a110','a111','a112','a113','a114','a115','a116','a117','a118','a119','a120','a121','a122','a123','a124','a125','a126','a127','a128','b1','b2','b3','b4','b5','b6','b7','b8','b9','b10','b11','b12','b13','b14','b15','b16','b17','b18','b19','b20','b21','b22','b23','b24','b25','b26','b27','b28','b29','b30','b31','b32','b33','b34','b35','b36','b37','b38','b39','b40','b41','b42','b43','b44','b45','b46','b47','b48','b49','b50','b51','b52','b53','b54','b55','b56','b57','b58','b59','b60','b61','b62','b63','b64','b65','b66','b67','b68','b69','b70','b71','b72','b73','b74','b75','b76','b77','b78','b79','b80','b81','b82','b83','b84','b85','b86','b87','b88','b89','b90','b91','b92','b93','b94','b95','b96','b97','b98','b99','b100','b101','b102','b103','b104','b105','b106','b107','b108','b109','b110','b111','b112','b113','b114','b115','b116','b117','b118','b119','b120','b121','b122','b123','b124','b125','b126','b127','b128'), algorithm=inplace;
alter table t1 modify i1 set('a1','a2','a3','a4','a5','a6','a7','a8'), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` enum('a1','a2','a3','a4','a5','a6','a7','a8','a9','a10','a11','a12','a13','a14','a15','a16','a17','a18','a19','a20','a21','a22','a23','a24','a25','a26','a27','a28','a29','a30','a31','a32','a33','a34','a35','a36','a37','a38','a39','a40','a41','a42','a43','a44','a45','a46','a47','a48','a49','a50','a51','a52','a53','a54','a55','a56','a57','a58','a59','a60','a61','a62','a63','a64','a65','a66','a67','a68','a69','a70','a71','a72','a73','a74','a75','a76','a77','a78','a79','a80','a81','a82','a83','a84','a85','a86','a87','a88','a89','a90','a91','a92','a93','a94','a95','a96','a97','a98','a99','a100','a101','a102','a103','a104','a105','a106','a107','a108','a109','a110','a111','a112','a113','a114','a115','a116','a117','a118','a119','a120','a121','a122','a123','a124','a125','a126','a127','a128','b1','b2','b3','b4','b5','b6','b7','b8','b9','b10','b11','b12','b13','b14','b15','b16','b17','b18','b19','b20','b21','b22','b23','b24','b25','b26','b27','b28','b29','b30','b31','b32','b33','b34','b35','b36','b37','b38','b39','b40','b41','b42','b43','b44','b45','b46','b47','b48','b49','b50','b51','b52','b53','b54','b55','b56','b57','b58','b59','b60','b61','b62','b63','b64','b65','b66','b67','b68','b69','b70','b71','b72','b73','b74','b75','b76','b77','b78','b79','b80','b81','b82','b83','b84','b85','b86','b87','b88','b89','b90','b91','b92','b93','b94','b95','b96','b97','b98','b99','b100','b101','b102','b103','b104','b105','b106','b107','b108','b109','b110','b111','b112','b113','b114','b115','b116','b117','b118','b119','b120','b121','b122','b123','b124','b125','b126','b127','b128') NOT NULL,
  `i1` set('a1','a2','a3','a4','a5','a6','a7','a8') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values ('b23', 'a1,a2');
select * from t1 order by id;
id	i1
	
a1	a1
a20	a3,a5
a109	a1,a3,a4,a6,a7
a127	a1,a2,a3,a4,a5,a6,a7
b23	a1,a2
b127	a1,a2,a3,a4,a5,a6,a7,a8
drop table t1;
create table t1 ( id tinyint unsigned primary key, i1 tinyint unsigned, i2 tinyint unsigned );
insert into t1 values (109,109,109),(1,1,1),(20,20,20),(127,127,127),(0,0,0),(255,255,255);
alter table t1 change id id float(4,1) unsigned, algorithm=inplace;
alter table t1 modify i1 double unsigned, algorithm=inplace;
alter table t1 modify i2 decimal(6,3) unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` float(4,1) unsigned NOT NULL,
  `i1` double unsigned DEFAULT NULL,
  `i2` decimal(6,3) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (1.1000000000000001,1.1000000000000001,1.1000000000000001),(10.48,10.48E+03,10.48);
Warnings:
Note	1265	Data truncated for column 'i2' at row 1
select * from t1 order by id;
id	i1	i2
0.0	0	0.000
1.0	1	1.000
1.1	1.1	1.100
10.5	10480	10.480
20.0	20	20.000
109.0	109	109.000
127.0	127	127.000
255.0	255	255.000
alter table t1 change id id float(4,1), algorithm=inplace;
alter table t1 modify i1 double, algorithm=inplace;
alter table t1 modify i2 decimal(6,3), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` float(4,1) NOT NULL,
  `i1` double DEFAULT NULL,
  `i2` decimal(6,3) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (-1.1000000000000001,-1.1000000000000001,-1.1000000000000001),(-10.48,-10.48E+03,-10.48);
Warnings:
Note	1265	Data truncated for column 'i2' at row 1
select * from t1 order by id;
id	i1	i2
-10.5	-10480	-10.480
-1.1	-1.1	-1.100
0.0	0	0.000
1.0	1	1.000
1.1	1.1	1.100
10.5	10480	10.480
20.0	20	20.000
109.0	109	109.000
127.0	127	127.000
255.0	255	255.000
drop table t1;
create table t1 ( id smallint unsigned primary key, i1 smallint unsigned, i2 smallint unsigned, i3 smallint unsigned, i4 smallint unsigned);
insert into t1 values (109,109,109,109,109),(1,1,1,1,1),(20,20,20,20,20),(32768,32768,32768,32768,32768),(0,0,0,0,0),(65535,65535,65535,65535,65535);
alter table t1 change id id bit(16), algorithm=inplace;
alter table t1 change i1 i1 smallint unsigned, algorithm=inplace;
alter table t1 change i2 i2 mediumint unsigned, algorithm=inplace;
alter table t1 change i3 i3 int unsigned, algorithm=inplace;
alter table t1 change i4 i4 bigint unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bit(16) NOT NULL,
  `i1` smallint(5) unsigned DEFAULT NULL,
  `i2` mediumint(8) unsigned DEFAULT NULL,
  `i3` int(10) unsigned DEFAULT NULL,
  `i4` bigint(20) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (b'1010101010101010',65534,16777215,4294967295,18446744073709551615), (b'100110011',65533,16777214,4294967294,18446744073709551614);
select * from t1 order by id;
id	i1	i2	i3	i4
  	0	0	0	0
 	1	1	1	1
 	20	20	20	20
 m	109	109	109	109
3	65533	16777214	4294967294	18446744073709551614
 	32768	32768	32768	32768
	65534	16777215	4294967295	18446744073709551615
	65535	65535	65535	65535
drop table t1;
create table t1 ( id smallint unsigned primary key, i1 smallint unsigned );
insert into t1 values (109,109),(1,1),(20,20),(32768,32768),(0,0),(65535,65535);
alter table t1 modify i1 set('a1','a2','a3','a4','a5','a6','a7','a8','a9','a10','a11', 'a12', 'a13', 'a14', 'a15', 'a16'), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` smallint(5) unsigned NOT NULL,
  `i1` set('a1','a2','a3','a4','a5','a6','a7','a8','a9','a10','a11','a12','a13','a14','a15','a16') DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (110, 'a1,a2');
select * from t1 order by id;
id	i1
0	
1	a1
20	a3,a5
109	a1,a3,a4,a6,a7
110	a1,a2
32768	a16
65535	a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16
drop table t1;
create table t1 ( id smallint unsigned primary key, i1 smallint unsigned, i2 smallint unsigned );
insert into t1 values (109,109,109),(1,1,1),(20,20,20),(32768,32768,32768),(0,0,0),(65535,65535,65535);
alter table t1 change id id float(6,1) unsigned, algorithm=inplace;
alter table t1 modify i1 double unsigned, algorithm=inplace;
alter table t1 modify i2 decimal(10,3) unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` float(6,1) unsigned NOT NULL,
  `i1` double unsigned DEFAULT NULL,
  `i2` decimal(10,3) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (1.1000000000000001,1.1000000000000001,1.1000000000000001),(10.48,10.48E+03,10.48);
Warnings:
Note	1265	Data truncated for column 'i2' at row 1
select * from t1 order by id;
id	i1	i2
0.0	0	0.000
1.0	1	1.000
1.1	1.1	1.100
10.5	10480	10.480
20.0	20	20.000
109.0	109	109.000
32768.0	32768	32768.000
65535.0	65535	65535.000
alter table t1 change id id float(7,1), algorithm=inplace;
alter table t1 modify i1 double, algorithm=inplace;
alter table t1 modify i2 decimal(12,3), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` float(7,1) NOT NULL,
  `i1` double DEFAULT NULL,
  `i2` decimal(12,3) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (-1.1000000000000001,-1.1000000000000001,-1.1000000000000001),(-10.48,-10.48E+03,-10.48);
Warnings:
Note	1265	Data truncated for column 'i2' at row 1
select * from t1 order by id;
id	i1	i2
-10.5	-10480	-10.480
-1.1	-1.1	-1.100
0.0	0	0.000
1.0	1	1.000
1.1	1.1	1.100
10.5	10480	10.480
20.0	20	20.000
109.0	109	109.000
32768.0	32768	32768.000
65535.0	65535	65535.000
drop table t1;
create table t1 ( id mediumint unsigned primary key, i1 mediumint unsigned, i2 mediumint unsigned, i3 mediumint unsigned );
insert into t1 values (109,109,109,109),(1,1,1,1),(20,20,20,20),(8388608,8388608,8388608,8388608),(0,0,0,0),(16777215,16777215,16777215,16777215);
alter table t1 change id id bit(32), algorithm=inplace;
alter table t1 change i1 i1 mediumint unsigned, algorithm=inplace;
alter table t1 change i2 i2 int unsigned, algorithm=inplace;
alter table t1 change i3 i3 bigint unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bit(32) NOT NULL,
  `i1` mediumint(8) unsigned DEFAULT NULL,
  `i2` int(10) unsigned DEFAULT NULL,
  `i3` bigint(20) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (b'10101010101010101010101010101010',16777214,4294967295,18446744073709551615), (b'100110011100110011',16777213,4294967294,18446744073709551614);
select * from t1 order by id;
id	i1	i2	i3
    	0	0	0
   	1	1	1
   	20	20	20
   m	109	109	109
 g3	16777213	4294967294	18446744073709551614
   	8388608	8388608	8388608
 	16777215	16777215	16777215
	16777214	4294967295	18446744073709551615
drop table t1;
create table t1 ( id mediumint unsigned primary key );
insert into t1 values (109),(1),(20),(8388608),(0),(16777215);
alter table t1 modify id set('a1','a2','a3','a4','a5','a6','a7','a8','a9','a10','a11', 'a12', 'a13', 'a14', 'a15', 'a16', 'b1','b2','b3','b4','b5','b6','b7','b8','b9','b10','b11', 'b12', 'b13', 'b14', 'b15', 'b16'), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` set('a1','a2','a3','a4','a5','a6','a7','a8','a9','a10','a11','a12','a13','a14','a15','a16','b1','b2','b3','b4','b5','b6','b7','b8','b9','b10','b11','b12','b13','b14','b15','b16') NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values ('a1,b2');
select * from t1 order by id;
id

a1
a3,a5
a1,a3,a4,a6,a7
a1,b2
b8
a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16,b1,b2,b3,b4,b5,b6,b7,b8
drop table t1;
create table t1 ( id mediumint unsigned primary key, i1 mediumint unsigned, i2 mediumint unsigned );
insert into t1 values (109,109,109),(1,1,1),(20,20,20),(8388608,8388608,8388608),(0,0,0),(16777215,16777215,16777215);
alter table t1 change id id float(12,1) unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify i1 double unsigned, algorithm=inplace;
alter table t1 modify i2 decimal(16,3) unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` mediumint(8) unsigned NOT NULL,
  `i1` double unsigned DEFAULT NULL,
  `i2` decimal(16,3) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (2.1000000000000001,1.1000000000000001,1.1000000000000001),(10.48,10.48E+03,10.48);
Warnings:
Note	1265	Data truncated for column 'i2' at row 1
select * from t1 order by id;
id	i1	i2
0	0	0.000
1	1	1.000
2	1.1	1.100
10	10480	10.480
20	20	20.000
109	109	109.000
8388608	8388608	8388608.000
16777215	16777215	16777215.000
alter table t1 change id id float(12,1), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify i1 double, algorithm=inplace;
alter table t1 modify i2 decimal(16,3), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` mediumint(8) unsigned NOT NULL,
  `i1` double DEFAULT NULL,
  `i2` decimal(16,3) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (3.1000000000000001,-1.1000000000000001,-1.1000000000000001),(30.48,-10.48E+03,-10.48);
Warnings:
Note	1265	Data truncated for column 'i2' at row 1
select * from t1 order by id;
id	i1	i2
0	0	0.000
1	1	1.000
2	1.1	1.100
3	-1.1	-1.100
10	10480	10.480
20	20	20.000
30	-10480	-10.480
109	109	109.000
8388608	8388608	8388608.000
16777215	16777215	16777215.000
drop table t1;
create table t1 ( id int unsigned primary key, i1 int unsigned, i2 int unsigned );
insert into t1 values (109,109,109),(1,1,1),(20,20,20),(2147483648,2147483648,2147483648),(0,0,0),(4294967295,4294967295,4294967295);
alter table t1 change id id bit(32), algorithm=inplace;
alter table t1 change i1 i1 int unsigned, algorithm=inplace;
alter table t1 change i2 i2 bigint unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bit(32) NOT NULL,
  `i1` int(10) unsigned DEFAULT NULL,
  `i2` bigint(20) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (b'10101010101010101010101010101010',4294967294,18446744073709551615), (b'100110011100110011',4294967293,18446744073709551613);
select * from t1 order by id;
id	i1	i2
    	0	0
   	1	1
   	20	20
   m	109	109
 g3	4294967293	18446744073709551613
   	2147483648	2147483648
	4294967294	18446744073709551615
	4294967295	4294967295
drop table t1;
create table t1 ( id int unsigned primary key );
insert into t1 values (109),(1),(20),(2147483648),(0),(4294967295);
alter table t1 modify id set('a1','a2','a3','a4','a5','a6','a7','a8','a9','a10','a11', 'a12', 'a13', 'a14', 'a15', 'a16', 'b1','b2','b3','b4','b5','b6','b7','b8','b9','b10','b11', 'b12', 'b13', 'b14', 'b15', 'b16'), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` set('a1','a2','a3','a4','a5','a6','a7','a8','a9','a10','a11','a12','a13','a14','a15','a16','b1','b2','b3','b4','b5','b6','b7','b8','b9','b10','b11','b12','b13','b14','b15','b16') NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values ('a1,b2,a15,b16');
select * from t1 order by id;
id

a1
a3,a5
a1,a3,a4,a6,a7
b16
a1,a15,b2,b16
a1,a2,a3,a4,a5,a6,a7,a8,a9,a10,a11,a12,a13,a14,a15,a16,b1,b2,b3,b4,b5,b6,b7,b8,b9,b10,b11,b12,b13,b14,b15,b16
drop table t1;
create table t1 ( id int unsigned primary key, i1 int unsigned, i2 int unsigned );
insert into t1 values (109,109,109),(1,1,1),(20,20,20),(2147483648,2147483648,2147483648),(0,0,0),(4294967295,4294967295,4294967295);
alter table t1 change id id float(12,1) unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify i1 double unsigned, algorithm=inplace;
alter table t1 modify i2 decimal(16,3) unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(10) unsigned NOT NULL,
  `i1` double unsigned DEFAULT NULL,
  `i2` decimal(16,3) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (2.1000000000000001,1.1000000000000001,1.1000000000000001),(10.48,10.48E+03,10.48);
Warnings:
Note	1265	Data truncated for column 'i2' at row 1
select * from t1 order by id;
id	i1	i2
0	0	0.000
1	1	1.000
2	1.1	1.100
10	10480	10.480
20	20	20.000
109	109	109.000
2147483648	2147483648	2147483648.000
4294967295	4294967295	4294967295.000
alter table t1 change id id float(12,1), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify i1 double, algorithm=inplace;
alter table t1 modify i2 decimal(16,3), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(10) unsigned NOT NULL,
  `i1` double DEFAULT NULL,
  `i2` decimal(16,3) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (3.1000000000000001,-1.1000000000000001,-1.1000000000000001),(30.48,-10.48E+03,-10.48);
Warnings:
Note	1265	Data truncated for column 'i2' at row 1
select * from t1 order by id;
id	i1	i2
0	0	0.000
1	1	1.000
2	1.1	1.100
3	-1.1	-1.100
10	10480	10.480
20	20	20.000
30	-10480	-10.480
109	109	109.000
2147483648	2147483648	2147483648.000
4294967295	4294967295	4294967295.000
drop table t1;
create table t1 ( id bigint unsigned primary key, i1 bigint unsigned, i2 bigint unsigned, i3 bigint unsigned );
insert into t1 values (109,109,109,109),(1,1,1,1),(20,20,20,20),(9223372036854775808,9223372036854775808,9223372036854775808,9223372036854775808),(0,0,0,0),(18446744073709551613,18446744073709551613,18446744073709551613,18446744073709551613);
alter table t1 change id id bit(64), algorithm=inplace;
alter table t1 change i1 i1 float(22,2), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change i2 i2 double(22,2), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change i3 i3 decimal(30,5), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` bit(64) NOT NULL,
  `i1` bigint(20) unsigned DEFAULT NULL,
  `i2` bigint(20) unsigned DEFAULT NULL,
  `i3` decimal(30,5) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (b'1010101010101010101010101010101010101010101010101010101010101010',429496729448320.22,429496729448320.22,1844674407370955161584320.8342), (b'100110011100110011100110011100110011',429496729348293342.99,429496729348293342.99,48302446744073709551613.7239);
select hex(id), i1, i2, i3 from t1 order by id,i1;
hex(id)	i1	i2	i3
AAAAAAAAAAAAAAAA	429496729448320	429496729448320	1844674407370955161584320.83420
0	0	0	0.00000
1	1	1	1.00000
14	20	20	20.00000
6D	109	109	109.00000
99CCE6733	429496729348293343	429496729348293343	48302446744073709551613.72390
FFFFFFFFFFFFFFFF	9223372036854775808	9223372036854775808	9223372036854775808.00000
FFFFFFFFFFFFFFFF	18446744073709551613	18446744073709551613	18446744073709551613.00000
drop table t1;
create table t1 ( id float unsigned primary key, f1 float(20,0) unsigned, f2 float(25,2) unsigned, f3 float(31,2) unsigned, f4 float(2,0) unsigned, f5 float(3,0) unsigned, f6 float(4,0) unsigned, f7 float(5,0) unsigned, f8 float(6,0) unsigned, f9 float(7,0) unsigned, f10 float(9,0) unsigned, f11 float(10,0) unsigned, f12 float(19,0) unsigned, f13 float(20,0) unsigned );
insert into t1 values (1.1000000000000001,1,1.1000000000000001,1.1000000000000001,9,9,9,9,9,9,9,9,9,9);
insert into t1 values (10.48,10,10.48,10.48E+03,10,101,101,101,101,101,101,101,101,101);
insert into t1 values (432908.32082,432908,432908.32,432908.32,11,111,111,111,111,111,111,111,111,111);
insert into t1 values (43829.32,43829,43829.32,43829.32,99,99,99,99,99,99,99,99,99,99);
insert into t1 values (4793.23,4793,4793.23,4793.23,1,1,1,1,1,1,1,1,1,1);
insert into t1 values (3240.12,3240,3240.12,3240.12,0,0,0,0,0,0,0,0,0,0);
alter table t1 change id id double unsigned, algorithm=inplace;
alter table t1 change f2 f2 float(28,2) unsigned, algorithm=inplace;
alter table t1 change f3 f3 decimal(40,2) unsigned, algorithm=inplace;
alter table t1 change f4 f4 bit(8), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f5 f5 tinyint unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f7 f7 smallint unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f10 f10 mediumint unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f11 f11 int unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f13 f13 bigint unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f4 f4 tinyint , algorithm=inplace;
alter table t1 change f6 f6 smallint unsigned, algorithm=inplace;
alter table t1 change f8 f8 mediumint , algorithm=inplace;
alter table t1 change f10 f10 int unsigned, algorithm=inplace;
alter table t1 change f12 f12 bigint unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` double unsigned NOT NULL,
  `f1` float(20,0) unsigned DEFAULT NULL,
  `f2` float(28,2) unsigned DEFAULT NULL,
  `f3` decimal(40,2) unsigned DEFAULT NULL,
  `f4` tinyint(4) DEFAULT NULL,
  `f5` float(3,0) unsigned DEFAULT NULL,
  `f6` smallint(5) unsigned DEFAULT NULL,
  `f7` float(5,0) unsigned DEFAULT NULL,
  `f8` mediumint(9) DEFAULT NULL,
  `f9` float(7,0) unsigned DEFAULT NULL,
  `f10` int(10) unsigned DEFAULT NULL,
  `f11` float(10,0) unsigned DEFAULT NULL,
  `f12` bigint(20) unsigned DEFAULT NULL,
  `f13` float(20,0) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (48329.3429,b'11111111111111111111111111111111111111111',4832948230840.11,480249208340274203842.23,6,6,6,6,6,6,6,6,6,6);
select * from t1 order by id;
id	f1	f2	f3	f4	f5	f6	f7	f8	f9	f10	f11	f12	f13
1.100000023841858	1	1.10	1.10	9	9	9	9	9	9	9	9	9	9
10.479999542236328	10	10.48	10480.00	10	101	101	101	101	101	101	101	101	101
3240.1201171875	3240	3240.12	3240.12	0	0	0	0	0	0	0	0	0	0
4793.22998046875	4793	4793.23	4793.23	1	1	1	1	1	1	1	1	1	1
43829.3203125	43829	43829.32	43829.32	99	99	99	99	99	99	99	99	99	99
48329.3429	2199023255552	4832948125696.00	480249208340274203842.23	6	6	6	6	6	6	6	6	6	6
432908.3125	432908	432908.31	432908.31	11	111	111	111	111	111	111	111	111	111
alter table t1 change id id double, algorithm=inplace;
alter table t1 change f2 f2 float(28,2), algorithm=inplace;
alter table t1 change f3 f3 decimal(40,2), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` double NOT NULL,
  `f1` float(20,0) unsigned DEFAULT NULL,
  `f2` float(28,2) DEFAULT NULL,
  `f3` decimal(40,2) DEFAULT NULL,
  `f4` tinyint(4) DEFAULT NULL,
  `f5` float(3,0) unsigned DEFAULT NULL,
  `f6` smallint(5) unsigned DEFAULT NULL,
  `f7` float(5,0) unsigned DEFAULT NULL,
  `f8` mediumint(9) DEFAULT NULL,
  `f9` float(7,0) unsigned DEFAULT NULL,
  `f10` int(10) unsigned DEFAULT NULL,
  `f11` float(10,0) unsigned DEFAULT NULL,
  `f12` bigint(20) unsigned DEFAULT NULL,
  `f13` float(20,0) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (-48329.3429,b'11111111111111111111111111111111111111111',-4832948230840.11,-480249208340274203842.23,7,7,7,7,7,7,7,7,7,7);
select * from t1 order by id;
id	f1	f2	f3	f4	f5	f6	f7	f8	f9	f10	f11	f12	f13
-48329.3429	2199023255552	-4832948125696.00	-480249208340274203842.23	7	7	7	7	7	7	7	7	7	7
1.100000023841858	1	1.10	1.10	9	9	9	9	9	9	9	9	9	9
10.479999542236328	10	10.48	10480.00	10	101	101	101	101	101	101	101	101	101
3240.1201171875	3240	3240.12	3240.12	0	0	0	0	0	0	0	0	0	0
4793.22998046875	4793	4793.23	4793.23	1	1	1	1	1	1	1	1	1	1
43829.3203125	43829	43829.32	43829.32	99	99	99	99	99	99	99	99	99	99
48329.3429	2199023255552	4832948125696.00	480249208340274203842.23	6	6	6	6	6	6	6	6	6	6
432908.3125	432908	432908.31	432908.31	11	111	111	111	111	111	111	111	111	111
drop table t1;
create table t1 ( id double unsigned primary key, f1 double(20,0) unsigned, f2 double(25,2) unsigned, f4 double(2,0) unsigned, f5 double(3,0) unsigned, f6 double(4,0) unsigned, f7 double(5,0) unsigned, f8 double(6,0) unsigned, f9 double(7,0) unsigned, f10 double(9,0) unsigned, f11 double(10,0) unsigned, f12 double(19,0) unsigned, f13 double(20,0) unsigned );
insert into t1 values (1.1000000000000001,1,1.1000000000000001,9,9,9,9,9,9,9,9,9,9);
insert into t1 values (10.48,10,10.48,10,101,101,101,101,101,101,101,101,101);
insert into t1 values (432908.32082,432908,432908.32,11,111,111,111,111,111,111,111,111,111);
insert into t1 values (43829.32,43829,43829.32,99,99,99,99,99,99,99,99,99,99);
insert into t1 values (4793.23,4793,4793.23,1,1,1,1,1,1,1,1,1,1);
insert into t1 values (3240.12,3240,3240.12,0,0,0,0,0,0,0,0,0,0);
alter table t1 change f2 f2 decimal(40,2) unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` double unsigned NOT NULL,
  `f1` double(20,0) unsigned DEFAULT NULL,
  `f2` decimal(40,2) unsigned DEFAULT NULL,
  `f4` double(2,0) unsigned DEFAULT NULL,
  `f5` double(3,0) unsigned DEFAULT NULL,
  `f6` double(4,0) unsigned DEFAULT NULL,
  `f7` double(5,0) unsigned DEFAULT NULL,
  `f8` double(6,0) unsigned DEFAULT NULL,
  `f9` double(7,0) unsigned DEFAULT NULL,
  `f10` double(9,0) unsigned DEFAULT NULL,
  `f11` double(10,0) unsigned DEFAULT NULL,
  `f12` double(19,0) unsigned DEFAULT NULL,
  `f13` double(20,0) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (48329.3429,b'11111111111111111111111111111111111111111',4832948230840.11,6,6,6,6,6,6,6,6,6,6);
select * from t1 order by id;
id	f1	f2	f4	f5	f6	f7	f8	f9	f10	f11	f12	f13
1.1	1	1.10	9	9	9	9	9	9	9	9	9	9
10.48	10	10.48	10	101	101	101	101	101	101	101	101	101
3240.12	3240	3240.12	0	0	0	0	0	0	0	0	0	0
4793.23	4793	4793.23	1	1	1	1	1	1	1	1	1	1
43829.32	43829	43829.32	99	99	99	99	99	99	99	99	99	99
48329.3429	2199023255551	4832948230840.11	6	6	6	6	6	6	6	6	6	6
432908.32082	432908	432908.32	11	111	111	111	111	111	111	111	111	111
alter table t1 change f2 f2 decimal(40,2), algorithm=inplace;
alter table t1 change f4 f4 bit(8), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f5 f5 tinyint unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f7 f7 smallint unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f10 f10 mediumint unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f11 f11 int unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f13 f13 bigint unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f4 f4 tinyint , algorithm=inplace;
alter table t1 change f6 f6 smallint unsigned, algorithm=inplace;
alter table t1 change f8 f8 mediumint , algorithm=inplace;
alter table t1 change f10 f10 int unsigned, algorithm=inplace;
alter table t1 change f12 f12 bigint unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` double unsigned NOT NULL,
  `f1` double(20,0) unsigned DEFAULT NULL,
  `f2` decimal(40,2) DEFAULT NULL,
  `f4` tinyint(4) DEFAULT NULL,
  `f5` double(3,0) unsigned DEFAULT NULL,
  `f6` smallint(5) unsigned DEFAULT NULL,
  `f7` double(5,0) unsigned DEFAULT NULL,
  `f8` mediumint(9) DEFAULT NULL,
  `f9` double(7,0) unsigned DEFAULT NULL,
  `f10` int(10) unsigned DEFAULT NULL,
  `f11` double(10,0) unsigned DEFAULT NULL,
  `f12` bigint(20) unsigned DEFAULT NULL,
  `f13` double(20,0) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (74293.32,b'11111111111111111111111111111111111111111',480249208340274203842.23,7,7,7,7,7,7,7,7,7,7);
select * from t1 order by id;
id	f1	f2	f4	f5	f6	f7	f8	f9	f10	f11	f12	f13
1.1	1	1.10	9	9	9	9	9	9	9	9	9	9
10.48	10	10.48	10	101	101	101	101	101	101	101	101	101
3240.12	3240	3240.12	0	0	0	0	0	0	0	0	0	0
4793.23	4793	4793.23	1	1	1	1	1	1	1	1	1	1
43829.32	43829	43829.32	99	99	99	99	99	99	99	99	99	99
48329.3429	2199023255551	4832948230840.11	6	6	6	6	6	6	6	6	6	6
74293.32	2199023255551	480249208340274203842.23	7	7	7	7	7	7	7	7	7	7
432908.32082	432908	432908.32	11	111	111	111	111	111	111	111	111	111
drop table t1;
create table t1 ( id decimal unsigned primary key, f1 decimal(20,0) unsigned, f2 decimal(25,2) unsigned, f4 decimal(2,0) unsigned, f5 decimal(3,0) unsigned, f6 decimal(4,0) unsigned, f7 decimal(5,0) unsigned, f8 decimal(6,0) unsigned, f9 decimal(7,0) unsigned, f10 decimal(9,0) unsigned, f11 decimal unsigned, f12 decimal(19,0) unsigned, f13 decimal(20,0) unsigned  );
insert into t1 values (1.1000000000000001,1,1.1000000000000001,9,9,9,9,9,9,9,9,9,9);
Warnings:
Note	1265	Data truncated for column 'id' at row 1
Note	1265	Data truncated for column 'f2' at row 1
insert into t1 values (10.48,10,10.48,10,101,101,101,101,101,101,101,101,101);
Warnings:
Note	1265	Data truncated for column 'id' at row 1
insert into t1 values (432908.32082,432908,432908.32,11,111,111,111,111,111,111,111,111,111);
Warnings:
Note	1265	Data truncated for column 'id' at row 1
insert into t1 values (43829.32,43829,43829.32,99,99,99,99,99,99,99,99,99,99);
Warnings:
Note	1265	Data truncated for column 'id' at row 1
insert into t1 values (4793.23,4793,4793.23,1,1,1,1,1,1,1,1,1,1);
Warnings:
Note	1265	Data truncated for column 'id' at row 1
insert into t1 values (3240.12,3240,3240.12,0,0,0,0,0,0,0,0,0,0);
Warnings:
Note	1265	Data truncated for column 'id' at row 1
alter table t1 change id id decimal(40,2) unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` decimal(40,2) unsigned NOT NULL,
  `f1` decimal(20,0) unsigned DEFAULT NULL,
  `f2` decimal(25,2) unsigned DEFAULT NULL,
  `f4` decimal(2,0) unsigned DEFAULT NULL,
  `f5` decimal(3,0) unsigned DEFAULT NULL,
  `f6` decimal(4,0) unsigned DEFAULT NULL,
  `f7` decimal(5,0) unsigned DEFAULT NULL,
  `f8` decimal(6,0) unsigned DEFAULT NULL,
  `f9` decimal(7,0) unsigned DEFAULT NULL,
  `f10` decimal(9,0) unsigned DEFAULT NULL,
  `f11` decimal(10,0) unsigned DEFAULT NULL,
  `f12` decimal(19,0) unsigned DEFAULT NULL,
  `f13` decimal(20,0) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (48329.3429,b'11111111111111111111111111111111111111111',4832948230840.11,6,6,6,6,6,6,6,6,6,6);
Warnings:
Note	1265	Data truncated for column 'id' at row 1
select * from t1 order by id;
id	f1	f2	f4	f5	f6	f7	f8	f9	f10	f11	f12	f13
1.00	1	1.10	9	9	9	9	9	9	9	9	9	9
10.00	10	10.48	10	101	101	101	101	101	101	101	101	101
3240.00	3240	3240.12	0	0	0	0	0	0	0	0	0	0
4793.00	4793	4793.23	1	1	1	1	1	1	1	1	1	1
43829.00	43829	43829.32	99	99	99	99	99	99	99	99	99	99
48329.34	2199023255551	4832948230840.11	6	6	6	6	6	6	6	6	6	6
432908.00	432908	432908.32	11	111	111	111	111	111	111	111	111	111
alter table t1 change id id decimal(40,2), algorithm=inplace;
alter table t1 change f4 f4 bit(8), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f5 f5 tinyint unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f7 f7 smallint unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f10 f10 mediumint unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f11 f11 int unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f13 f13 bigint unsigned, algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change f4 f4 tinyint , algorithm=inplace;
alter table t1 change f6 f6 smallint unsigned, algorithm=inplace;
alter table t1 change f8 f8 mediumint , algorithm=inplace;
alter table t1 change f10 f10 int unsigned, algorithm=inplace;
alter table t1 change f12 f12 bigint unsigned, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` decimal(40,2) NOT NULL,
  `f1` decimal(20,0) unsigned DEFAULT NULL,
  `f2` decimal(25,2) unsigned DEFAULT NULL,
  `f4` tinyint(4) DEFAULT NULL,
  `f5` decimal(3,0) unsigned DEFAULT NULL,
  `f6` smallint(5) unsigned DEFAULT NULL,
  `f7` decimal(5,0) unsigned DEFAULT NULL,
  `f8` mediumint(9) DEFAULT NULL,
  `f9` decimal(7,0) unsigned DEFAULT NULL,
  `f10` int(10) unsigned DEFAULT NULL,
  `f11` decimal(10,0) unsigned DEFAULT NULL,
  `f12` bigint(20) unsigned DEFAULT NULL,
  `f13` decimal(20,0) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (-48329.3429,b'11111111111111111111111111111111111111111',480249208340274203842.23,7,7,7,7,7,7,7,7,7,7);
Warnings:
Note	1265	Data truncated for column 'id' at row 1
select * from t1 order by id;
id	f1	f2	f4	f5	f6	f7	f8	f9	f10	f11	f12	f13
-48329.34	2199023255551	480249208340274203842.23	7	7	7	7	7	7	7	7	7	7
1.00	1	1.10	9	9	9	9	9	9	9	9	9	9
10.00	10	10.48	10	101	101	101	101	101	101	101	101	101
3240.00	3240	3240.12	0	0	0	0	0	0	0	0	0	0
4793.00	4793	4793.23	1	1	1	1	1	1	1	1	1	1
43829.00	43829	43829.32	99	99	99	99	99	99	99	99	99	99
48329.34	2199023255551	4832948230840.11	6	6	6	6	6	6	6	6	6	6
432908.00	432908	432908.32	11	111	111	111	111	111	111	111	111	111
drop table t1;
create table t1 ( id char(8) primary key, c1 char(16), c2 char(32), c3 char(64), c4 char(128), c5 char(255) );
insert into t1 values ("ufsdo2","ufsdo2","ufsdo2","ufsdo2","ufsdo2","ufsdo2"),("24ijrfsw","24ijrfsw","24ijrfsw","24ijrfsw","24ijrfsw","24ijrfsw"),("e29wdf","e29wdf","e29wdf","e29wdf","e29wdf","e29wdf"),("aaa","aaa","aaa","aaa","aaa","aaa"),("47293jr","47293jr","47293jr","47293jr","47293jr","47293jr"),("he",'he','he','he','he','he');
alter table t1 modify id char(9), algorithm=inplace;
alter table t1 modify c1 varchar(16), algorithm=inplace;
alter table t1 modify c2 tinytext, algorithm=inplace;
alter table t1 modify c3 text, algorithm=inplace;
alter table t1 modify c4 mediumtext, algorithm=inplace;
alter table t1 modify c5 longtext, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` char(9) NOT NULL,
  `c1` varchar(16) DEFAULT NULL,
  `c2` tinytext DEFAULT NULL,
  `c3` text DEFAULT NULL,
  `c4` mediumtext DEFAULT NULL,
  `c5` longtext DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values ("123456789","123456789abcdefg","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj");
select * from t1 order by id;
id	c1	c2	c3	c4	c5
123456789	123456789abcdefg	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj
24ijrfsw	24ijrfsw	24ijrfsw	24ijrfsw	24ijrfsw	24ijrfsw
47293jr	47293jr	47293jr	47293jr	47293jr	47293jr
aaa	aaa	aaa	aaa	aaa	aaa
e29wdf	e29wdf	e29wdf	e29wdf	e29wdf	e29wdf
he	he	he	he	he	he
ufsdo2	ufsdo2	ufsdo2	ufsdo2	ufsdo2	ufsdo2
drop table t1;
create table t1 ( id varchar(32) primary key, c1 varchar(128), c2 varchar(256), c3 varchar(512), c4 varchar(4096) );
insert into t1 values ("ufsdo2","ufsdo2","ufsdo2","ufsdo2","ufsdo2"),("24ijrfsw","24ijrfsw","24ijrfsw","24ijrfsw","24ijrfsw"),("e29wdf","e29wdf","e29wdf","e29wdf","e29wdf"),("aaa","aaa","aaa","aaa","aaa"),("47293jr","47293jr","47293jr","47293jr","47293jr"),("he",'he','he','he','he');
alter table t1 modify c1 char(255), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify c1 varchar(129), algorithm=inplace;
alter table t1 modify c2 text, algorithm=inplace;
alter table t1 modify c3 mediumtext, algorithm=inplace;
alter table t1 modify c4 longtext, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` varchar(32) NOT NULL,
  `c1` varchar(129) DEFAULT NULL,
  `c2` text DEFAULT NULL,
  `c3` mediumtext DEFAULT NULL,
  `c4` longtext DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values ("123456789","123456789abcdefg","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj");
select * from t1 order by id;
id	c1	c2	c3	c4
123456789	123456789abcdefg	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj
24ijrfsw	24ijrfsw	24ijrfsw	24ijrfsw	24ijrfsw
47293jr	47293jr	47293jr	47293jr	47293jr
aaa	aaa	aaa	aaa	aaa
e29wdf	e29wdf	e29wdf	e29wdf	e29wdf
he	he	he	he	he
ufsdo2	ufsdo2	ufsdo2	ufsdo2	ufsdo2
drop table t1;
create table t1 ( id int auto_increment primary key, c1 tinytext, c2 tinytext, c3 tinytext, c4 tinytext );
insert into t1(c1,c2,c3,c4) values ("ufsdo2","ufsdo2","ufsdo2","ufsdo2"),("24ijrfsw","24ijrfsw","24ijrfsw","24ijrfsw"),("e29wdf","e29wdf","e29wdf","e29wdf"),("aaa","aaa","aaa","aaa"),("47293jr","47293jr","47293jr","47293jr"),("he",'he','he','he');
alter table t1 modify c1 varchar(255), algorithm=inplace;
alter table t1 modify c1 char(255), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify c2 text, algorithm=inplace;
alter table t1 modify c3 mediumtext, algorithm=inplace;
alter table t1 modify c4 longtext, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `c1` varchar(255) DEFAULT NULL,
  `c2` text DEFAULT NULL,
  `c3` mediumtext DEFAULT NULL,
  `c4` longtext DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(c1,c2,c3,c4) values ("123456789abcdefg","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj");
select * from t1 order by id;
id	c1	c2	c3	c4
1	ufsdo2	ufsdo2	ufsdo2	ufsdo2
2	24ijrfsw	24ijrfsw	24ijrfsw	24ijrfsw
3	e29wdf	e29wdf	e29wdf	e29wdf
4	aaa	aaa	aaa	aaa
5	47293jr	47293jr	47293jr	47293jr
6	he	he	he	he
7	123456789abcdefg	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj
drop table t1;
create table t1 ( id int auto_increment primary key, c1 text, c2 text, c3 text );
insert into t1(c1,c2,c3) values ("ufsdo2","ufsdo2","ufsdo2"),("24ijrfsw","24ijrfsw","24ijrfsw"),("e29wdf","e29wdf","e29wdf"),("aaa","aaa","aaa"),("47293jr","47293jr","47293jr"),("he",'he','he');
alter table t1 modify c1 char(255), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change c1 c1 text, algorithm=inplace;
alter table t1 change c2 c2 mediumtext, algorithm=inplace;
alter table t1 change c3 c3 longtext, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `c1` text DEFAULT NULL,
  `c2` mediumtext DEFAULT NULL,
  `c3` longtext DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(c1,c2,c3) values ("gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj");
select * from t1 order by id;
id	c1	c2	c3
1	ufsdo2	ufsdo2	ufsdo2
2	24ijrfsw	24ijrfsw	24ijrfsw
3	e29wdf	e29wdf	e29wdf
4	aaa	aaa	aaa
5	47293jr	47293jr	47293jr
6	he	he	he
7	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj
drop table t1;
create table t1 ( id int auto_increment primary key, c1 mediumtext, c2 mediumtext );
insert into t1(c1,c2) values ("ufsdo2","ufsdo2"),("24ijrfsw","24ijrfsw"),("e29wdf","e29wdf"),("aaa","aaa"),("47293jr","47293jr"),("he",'he');
alter table t1 modify c1 char(255), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change c1 c1 mediumtext, algorithm=inplace;
alter table t1 change c2 c2 longtext, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `c1` mediumtext DEFAULT NULL,
  `c2` longtext DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(c1,c2) values ("gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj");
select * from t1 order by id;
id	c1	c2
1	ufsdo2	ufsdo2
2	24ijrfsw	24ijrfsw
3	e29wdf	e29wdf
4	aaa	aaa
5	47293jr	47293jr
6	he	he
7	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj
drop table t1;
create table t1 ( id int auto_increment primary key, c1 longtext );
insert into t1(c1) values ("ufsdo2"),("24ijrfsw"),("e29wdf"),("aaa"),("47293jr"),("he");
alter table t1 modify c1 char(255), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change c1 c1 longtext, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `c1` longtext DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(c1) values ("gjoewjrlw342982jlfsfjslfjslr942lj");
select * from t1 order by id;
id	c1
1	ufsdo2
2	24ijrfsw
3	e29wdf
4	aaa
5	47293jr
6	he
7	gjoewjrlw342982jlfsfjslfjslr942lj
drop table t1;
create table t1 ( id int auto_increment primary key, b1 binary(8), b2 binary(16), b3 binary(32), b4 binary(64), b5 binary(128), b6 binary(255) );
insert into t1(b1,b2,b3,b4,b5,b6) values ("ufsdo2","ufsdo2","ufsdo2","ufsdo2","ufsdo2","ufsdo2"),("24ijrfsw","24ijrfsw","24ijrfsw","24ijrfsw","24ijrfsw","24ijrfsw"),("e29wdf","e29wdf","e29wdf","e29wdf","e29wdf","e29wdf"),("aaa","aaa","aaa","aaa","aaa","aaa"),("47293jr","47293jr","47293jr","47293jr","47293jr","47293jr"),("he",'he','he',"he",'he','he');
alter table t1 modify b1 binary(17), algorithm=inplace;
alter table t1 modify b2 varbinary(32), algorithm=inplace;
alter table t1 modify b3 tinyblob, algorithm=inplace;
alter table t1 modify b4 blob, algorithm=inplace;
alter table t1 modify b5 mediumblob, algorithm=inplace;
alter table t1 modify b6 longblob, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `b1` binary(17) DEFAULT NULL,
  `b2` varbinary(32) DEFAULT NULL,
  `b3` tinyblob DEFAULT NULL,
  `b4` blob DEFAULT NULL,
  `b5` mediumblob DEFAULT NULL,
  `b6` longblob DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(b1,b2,b3,b4,b5,b6) values ("123456789","123456789abcdefg","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj");
select * from t1 order by id;
id	b1	b2	b3	b4	b5	b6
1	ufsdo2           	ufsdo2          	ufsdo2                          	ufsdo2                                                          	ufsdo2                                                                                                                          	ufsdo2                                                                                                                                                                                                                                                         
2	24ijrfsw         	24ijrfsw        	24ijrfsw                        	24ijrfsw                                                        	24ijrfsw                                                                                                                        	24ijrfsw                                                                                                                                                                                                                                                       
3	e29wdf           	e29wdf          	e29wdf                          	e29wdf                                                          	e29wdf                                                                                                                          	e29wdf                                                                                                                                                                                                                                                         
4	aaa              	aaa             	aaa                             	aaa                                                             	aaa                                                                                                                             	aaa                                                                                                                                                                                                                                                            
5	47293jr          	47293jr         	47293jr                         	47293jr                                                         	47293jr                                                                                                                         	47293jr                                                                                                                                                                                                                                                        
6	he               	he              	he                              	he                                                              	he                                                                                                                              	he                                                                                                                                                                                                                                                             
7	123456789        	123456789abcdefg	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj
drop table t1;
create table t1 ( id int auto_increment primary key, b1 varbinary(128), b2 varbinary(256), b3 varbinary(512), b4 varbinary(4096), b5 varbinary(8192) );
insert into t1(b1,b2,b3,b4,b5) values ("ufsdo2","ufsdo2","ufsdo2","ufsdo2","ufsdo2"),("24ijrfsw","24ijrfsw","24ijrfsw","24ijrfsw","24ijrfsw"),("e29wdf","e29wdf","e29wdf","e29wdf","e29wdf"),("aaa","aaa","aaa","aaa","aaa"),("47293jr","47293jr","47293jr","47293jr","47293jr"),("he",'he','he',"he",'he');
alter table t1 modify b1 binary(255), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify b1 varbinary(129), algorithm=inplace;
alter table t1 modify b2 blob, algorithm=inplace;
alter table t1 modify b3 mediumblob, algorithm=inplace;
alter table t1 modify b4 longblob, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `b1` varbinary(129) DEFAULT NULL,
  `b2` blob DEFAULT NULL,
  `b3` mediumblob DEFAULT NULL,
  `b4` longblob DEFAULT NULL,
  `b5` varbinary(8192) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(b1,b2,b3,b4,b5) values ("123456789","123456789abcdefg","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj");
select * from t1 order by id;
id	b1	b2	b3	b4	b5
1	ufsdo2	ufsdo2	ufsdo2	ufsdo2	ufsdo2
2	24ijrfsw	24ijrfsw	24ijrfsw	24ijrfsw	24ijrfsw
3	e29wdf	e29wdf	e29wdf	e29wdf	e29wdf
4	aaa	aaa	aaa	aaa	aaa
5	47293jr	47293jr	47293jr	47293jr	47293jr
6	he	he	he	he	he
7	123456789	123456789abcdefg	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj
drop table t1;
create table t1 ( id int auto_increment primary key, c1 tinyblob, c2 tinyblob, c3 tinyblob, c4 tinyblob );
insert into t1(c1,c2,c3,c4) values ("ufsdo2","ufsdo2","ufsdo2","ufsdo2"),("24ijrfsw","24ijrfsw","24ijrfsw","24ijrfsw"),("e29wdf","e29wdf","e29wdf","e29wdf"),("aaa","aaa","aaa","aaa"),("47293jr","47293jr","47293jr","47293jr"),("he",'he','he',"he");
alter table t1 modify c1 binary(255), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify c1 varbinary(255), algorithm=inplace;
alter table t1 modify c2 blob, algorithm=inplace;
alter table t1 modify c3 mediumblob, algorithm=inplace;
alter table t1 modify c4 longblob, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `c1` varbinary(255) DEFAULT NULL,
  `c2` blob DEFAULT NULL,
  `c3` mediumblob DEFAULT NULL,
  `c4` longblob DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(c1,c2,c3,c4) values ("123456789abcdefg","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj");
select * from t1 order by id;
id	c1	c2	c3	c4
1	ufsdo2	ufsdo2	ufsdo2	ufsdo2
2	24ijrfsw	24ijrfsw	24ijrfsw	24ijrfsw
3	e29wdf	e29wdf	e29wdf	e29wdf
4	aaa	aaa	aaa	aaa
5	47293jr	47293jr	47293jr	47293jr
6	he	he	he	he
7	123456789abcdefg	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj
drop table t1;
create table t1 ( id int auto_increment primary key, c1 blob, c2 blob, c3 blob );
insert into t1(c1,c2,c3) values ("ufsdo2","ufsdo2","ufsdo2"),("24ijrfsw","24ijrfsw","24ijrfsw"),("e29wdf","e29wdf","e29wdf"),("aaa","aaa","aaa"),("47293jr","47293jr","47293jr"),("he",'he','he');
alter table t1 modify c1 binary(255), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change c1 c1 blob, algorithm=inplace;
alter table t1 change c2 c2 mediumblob, algorithm=inplace;
alter table t1 change c3 c3 longblob, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `c1` blob DEFAULT NULL,
  `c2` mediumblob DEFAULT NULL,
  `c3` longblob DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(c1,c2,c3) values ("gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj");
select * from t1 order by id;
id	c1	c2	c3
1	ufsdo2	ufsdo2	ufsdo2
2	24ijrfsw	24ijrfsw	24ijrfsw
3	e29wdf	e29wdf	e29wdf
4	aaa	aaa	aaa
5	47293jr	47293jr	47293jr
6	he	he	he
7	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj
drop table t1;
create table t1 ( id int auto_increment primary key, c1 mediumblob, c2 mediumblob );
insert into t1(c1,c2) values ("ufsdo2","ufsdo2"),("24ijrfsw","24ijrfsw"),("e29wdf","e29wdf"),("aaa","aaa"),("47293jr","47293jr"),("he",'he');
alter table t1 modify c1 binary(255), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change c1 c1 mediumblob, algorithm=inplace;
alter table t1 change c2 c2 longblob, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `c1` mediumblob DEFAULT NULL,
  `c2` longblob DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(c1,c2) values ("gjoewjrlw342982jlfsfjslfjslr942lj","gjoewjrlw342982jlfsfjslfjslr942lj");
select * from t1 order by id;
id	c1	c2
1	ufsdo2	ufsdo2
2	24ijrfsw	24ijrfsw
3	e29wdf	e29wdf
4	aaa	aaa
5	47293jr	47293jr
6	he	he
7	gjoewjrlw342982jlfsfjslfjslr942lj	gjoewjrlw342982jlfsfjslfjslr942lj
drop table t1;
create table t1 ( id int auto_increment primary key, c1 longblob );
insert into t1(c1) values ("ufsdo2"),("24ijrfsw"),("e29wdf"),("aaa"),("47293jr"),("he");
alter table t1 modify c1 binary(255), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 change c1 c1 longblob, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `c1` longblob DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(c1) values ("gjoewjrlw342982jlfsfjslfjslr942lj");
select * from t1 order by id;
id	c1
1	ufsdo2
2	24ijrfsw
3	e29wdf
4	aaa
5	47293jr
6	he
7	gjoewjrlw342982jlfsfjslfjslr942lj
drop table t1;
create table t1 ( id int auto_increment primary key, y1 year );
insert into t1(y1) values (1901),(2019),(2001),(2020),(2155),(2154);
alter table t1 change y1 y1 year, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `y1` year(4) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(y1) values (1999),(2008),(2111);
select * from t1 order by id;
id	y1
1	1901
2	2019
3	2001
4	2020
5	2155
6	2154
7	1999
8	2008
9	2111
drop table t1;
create table t1 ( id int auto_increment primary key, y1 time(4) );
insert into t1(y1) values ("23:59:59.000"),("837:59:59.9999"),("09:50:50.998"),("00:00:00.111"),("12:12:12.12"),("838:59:00.9999");
alter table t1 modify y1 time(6), algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `y1` time(6) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(y1) values ("02:02:02.009900"),("-837:59:59.999");
select * from t1 order by id;
id	y1
1	23:59:59.000000
2	837:59:59.999900
3	09:50:50.998000
4	00:00:00.111000
5	12:12:12.120000
6	838:59:00.999900
7	02:02:02.009900
8	-837:59:59.999000
drop table t1;
create table t1 ( id int auto_increment primary key, d1 date );
insert into t1(d1) values ("2010-10-10"),("2005-05-05"),("2000-1-19"),("1999-09-09"),("2013-07-01"),("2019-12-25");
alter table t1 modify d1 date, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `d1` date DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(d1) values ("2037-12-31"),("2021-01-01");
select * from t1 order by id;
id	d1
1	2010-10-10
2	2005-05-05
3	2000-01-19
4	1999-09-09
5	2013-07-01
6	2019-12-25
7	2037-12-31
8	2021-01-01
drop table t1;
create table t1 ( id int auto_increment primary key, d1 datetime(4) );
insert into t1(d1) values ("2010-10-10 23:59:59.000"),("2005-05-05 09:50:50.998"),("2000-1-19 00:00:00.111"),("1999-09-09 12:12:12.12 "),("2013-07-01 19:19:19.992"),("2019-12-25 01:01:01.9999"),('2021-01-15 15:30:34');
alter table t1 modify d1 datetime(6), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify d1 datetime(6), algorithm=copy;
select * from t1 where d1 = '2021-01-15 15:30:34';
id	d1
7	2021-01-15 15:30:34.000000
alter table t1 modify d1 datetime(5), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `d1` datetime(6) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=2001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(d1) values ("2037-12-31 02:02:02.009900"),("2021-01-01 10:11:12.131415");
select * from t1 order by id;
id	d1
1	2010-10-10 23:59:59.000000
2	2005-05-05 09:50:50.998000
3	2000-01-19 00:00:00.111000
4	1999-09-09 12:12:12.120000
5	2013-07-01 19:19:19.992000
6	2019-12-25 01:01:01.999900
7	2021-01-15 15:30:34.000000
1001	2037-12-31 02:02:02.009900
1002	2021-01-01 10:11:12.131415
drop table t1;
create table t1 ( id int auto_increment primary key, d1 timestamp(4) );
insert into t1(d1) values ("2010-10-10 23:59:59.000"),("2005-05-05 09:50:50.998"),("2000-1-19 00:00:00.111"),("1999-09-09 12:12:12.12 "),("2013-07-01 19:19:19.992"),("2019-12-25 01:01:01.9999");
alter table t1 modify d1 timestamp(6), algorithm=inplace;
alter table t1 modify d1 timestamp(5), algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `d1` timestamp(6) NOT NULL DEFAULT current_timestamp(6) ON UPDATE current_timestamp(6),
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(d1) values ("2037-12-31 02:02:02.009900"),("2021-01-01 10:11:12.131415");
select * from t1 order by id;
id	d1
1	2010-10-10 23:59:59.000000
2	2005-05-05 09:50:50.998000
3	2000-01-19 00:00:00.111000
4	1999-09-09 12:12:12.120000
5	2013-07-01 19:19:19.992000
6	2019-12-25 01:01:01.999900
7	2037-12-31 02:02:02.009900
8	2021-01-01 10:11:12.131415
drop table t1;
create table t1 ( id int auto_increment primary key, j json );
insert into t1(j) values (NULL),('{"a": 2}'),('[1,2]'),('{"a":"b", "c":"d","ab":"abc", "bc": ["x", "y"]}'),('["here", ["I", "am"], "!!!"]'),('"scalar string"');
alter table t1 change j j json, algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `j` longtext CHARACTER SET utf8mb4 COLLATE utf8mb4_bin DEFAULT NULL CHECK (json_valid(`j`)),
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1(j) values ('true'),('false');
select * from t1 order by id;
id	j
1	NULL
2	{"a": 2}
3	[1,2]
4	{"a":"b", "c":"d","ab":"abc", "bc": ["x", "y"]}
5	["here", ["I", "am"], "!!!"]
6	"scalar string"
7	true
8	false
drop table t1;
CREATE TABLE t1(a TINYINT NOT NULL AUTO_INCREMENT,  PRIMARY KEY(a));
ALTER TABLE t1 AUTO_INCREMENT = 0;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` tinyint(4) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
ALTER TABLE t1 AUTO_INCREMENT = 1;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` tinyint(4) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
ALTER TABLE t1 AUTO_INCREMENT = 100;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` tinyint(4) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=100 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
ALTER TABLE t1 AUTO_INCREMENT = 126;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` tinyint(4) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=126 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
ALTER TABLE t1 AUTO_INCREMENT = 127;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` tinyint(4) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=127 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
ALTER TABLE t1 AUTO_INCREMENT = 127;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` tinyint(4) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=127 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
DROP TABLE t1;
CREATE TABLE t1(a TINYINT NOT NULL AUTO_INCREMENT,  PRIMARY KEY(a));
INSERT INTO t1 VALUES(),(),();
ALTER TABLE t1 AUTO_INCREMENT = 0;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` tinyint(4) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
ALTER TABLE t1 AUTO_INCREMENT = 1;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` tinyint(4) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
ALTER TABLE t1 AUTO_INCREMENT = 100;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` tinyint(4) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=100 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
ALTER TABLE t1 AUTO_INCREMENT = 126;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` tinyint(4) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=126 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
ALTER TABLE t1 AUTO_INCREMENT = 127;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` tinyint(4) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=127 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
ALTER TABLE t1 AUTO_INCREMENT = 127;
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` tinyint(4) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=127 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
DROP TABLE t1;
create table t1(a int(10)unsigned not null auto_increment primary key, b varchar(255) not null) default charset=utf8;
insert into t1 values(1,'aaa'),(2,'bbb');
alter table t1 auto_increment=1;
insert into t1 values(NULL, 'ccc');
select * from t1 order by a;
a	b
1	aaa
2	bbb
3	ccc
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `b` varchar(255) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci
alter table t1 auto_increment=3;
insert into t1 values(NULL, 'ddd');
select * from t1 order by a;
a	b
1	aaa
2	bbb
3	ccc
4	ddd
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `b` varchar(255) NOT NULL,
  PRIMARY KEY (`a`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=utf8 COLLATE=utf8_general_ci
drop table t1;
create table t1( id int ) comment = "sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }";
alter table t1 comment = "sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true, StrictDataMode:false } }", ALGORITHM=copy;
ERROR 0A000: Cannot change table options of comment. Try drop and create again.
drop table t1;
create table t1( id int auto_increment primary key ) comment = "sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }";
alter table t1 rename t2, ALGORITHM=copy;
show create table t1;
ERROR 42S02: Table 'test_alter.t1' doesn't exist
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }'
alter table t2 auto_increment = 10, ALGORITHM=copy;
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=10 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }'
drop table t2;
create table t1( id int primary key, b blob, c char(16), key c(c(2)) ) comment = "sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }";
create table t2( id int primary key, c char(16), key c(c(2)) ) comment = "sequoiadb : { table_options: { ShardingKey: {id : 1} } }";
alter table t1 drop index c, add index c_new(c(8)), ALGORITHM=copy;
alter table t1 drop primary key, ALGORITHM=copy;
alter table t2 drop index c, add index c_new(c(8)), ALGORITHM=copy;
alter table t2 drop primary key, ALGORITHM=copy;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `b` blob DEFAULT NULL,
  `c` char(16) DEFAULT NULL,
  KEY `c_new` (`c`(8))
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `id` int(11) NOT NULL,
  `c` char(16) DEFAULT NULL,
  KEY `c_new` (`c`(8))
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1} } }'
alter table t1 add primary key (id), ALGORITHM=copy;
alter table t1 drop index c_new, add unique key c_new(c(8),id), ALGORITHM=copy;
alter table t2 add primary key (id), ALGORITHM=copy;
alter table t2 drop index c_new, add unique key c_new(c(8),id), ALGORITHM=copy;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `b` blob DEFAULT NULL,
  `c` char(16) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `c_new` (`c`(8),`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `id` int(11) NOT NULL,
  `c` char(16) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `c_new` (`c`(8),`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1} } }'
alter table t1 add index b(b(1)), ALGORITHM=copy;
ERROR 0A000: column 'b' cannot be used in key specification.
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `b` blob DEFAULT NULL,
  `c` char(16) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `c_new` (`c`(8),`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }'
alter table t1 drop primary key, add index(id) using hash, ALGORITHM=copy;
alter table t2 drop primary key, add index(id) using hash, ALGORITHM=copy;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL,
  `b` blob DEFAULT NULL,
  `c` char(16) DEFAULT NULL,
  UNIQUE KEY `c_new` (`c`(8),`id`),
  KEY `id` (`id`) USING HASH
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `id` int(11) NOT NULL,
  `c` char(16) DEFAULT NULL,
  UNIQUE KEY `c_new` (`c`(8),`id`),
  KEY `id` (`id`) USING HASH
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1} } }'
drop table t1,t2;
create table t1( c char(16) ) comment = "sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }";
create table t2( c char(16) ) comment = "sequoiadb : { table_options: { ShardingKey: {id : 1} } }";
alter table t1 add column id int auto_increment primary key, ALGORITHM=copy;
alter table t1 change c c char(16) comment 'column c', add column t text comment 'column t', add index t(t(2)), ALGORITHM=copy;
alter table t2 add column id int auto_increment primary key, ALGORITHM=copy;
alter table t2 change c c char(16) comment 'column c', add column t text comment 'column t', add index t(t(2)), ALGORITHM=copy;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `c` char(16) DEFAULT NULL COMMENT 'column c',
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `t` text DEFAULT NULL COMMENT 'column t',
  PRIMARY KEY (`id`),
  KEY `t` (`t`(2))
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `c` char(16) DEFAULT NULL COMMENT 'column c',
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `t` text DEFAULT NULL COMMENT 'column t',
  PRIMARY KEY (`id`),
  KEY `t` (`t`(2))
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1} } }'
alter table t1 change id id1 int, ALGORITHM=copy;
ERROR HY000: The unique index must include all fields in sharding key
alter table t1 add unique index c(c), ALGORITHM=copy;
ERROR HY000: The unique index must include all fields in sharding key
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `c` char(16) DEFAULT NULL COMMENT 'column c',
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `t` text DEFAULT NULL COMMENT 'column t',
  PRIMARY KEY (`id`),
  KEY `t` (`t`(2))
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }'
alter table t1 change id id int, ALGORITHM=copy;
alter table t2 change id id int, ALGORITHM=copy;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `c` char(16) DEFAULT NULL COMMENT 'column c',
  `id` int(11) NOT NULL,
  `t` text DEFAULT NULL COMMENT 'column t',
  PRIMARY KEY (`id`),
  KEY `t` (`t`(2))
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `c` char(16) DEFAULT NULL COMMENT 'column c',
  `id` int(11) NOT NULL,
  `t` text DEFAULT NULL COMMENT 'column t',
  PRIMARY KEY (`id`),
  KEY `t` (`t`(2))
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1} } }'
alter table t1 add column id1 int auto_increment, add index id1(id1), ALGORITHM=copy;
alter table t2 add column id1 int auto_increment, add index id1(id1), ALGORITHM=copy;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `c` char(16) DEFAULT NULL COMMENT 'column c',
  `id` int(11) NOT NULL,
  `t` text DEFAULT NULL COMMENT 'column t',
  `id1` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`),
  KEY `t` (`t`(2)),
  KEY `id1` (`id1`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `c` char(16) DEFAULT NULL COMMENT 'column c',
  `id` int(11) NOT NULL,
  `t` text DEFAULT NULL COMMENT 'column t',
  `id1` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`),
  KEY `t` (`t`(2)),
  KEY `id1` (`id1`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1} } }'
alter table t1 drop column id1, add column b blob, change c c1 char(16), ALGORITHM=copy;
alter table t2 drop column id1, add column b blob, change c c1 char(16), ALGORITHM=copy;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `c1` char(16) DEFAULT NULL,
  `id` int(11) NOT NULL,
  `t` text DEFAULT NULL COMMENT 'column t',
  `b` blob DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `t` (`t`(2))
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }'
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `c1` char(16) DEFAULT NULL,
  `id` int(11) NOT NULL,
  `t` text DEFAULT NULL COMMENT 'column t',
  `b` blob DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `t` (`t`(2))
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1} } }'
drop table t1,t2;
create table t1( c char(16) ) comment = "sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true, ReplSize: 2 } }";
create table t2( c char(16) ) comment = "sequoiadb : { table_options: { ShardingKey: {id : 1}, AutoIndexId: false, StrictDataMode: false  } }";
create table t1_new like t1;
create table t2_new like t2;
show create table t1_new;
Table	Create Table
t1_new	CREATE TABLE `t1_new` (
  `c` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true, ReplSize: 2 } }'
show create table t2_new;
Table	Create Table
t2_new	CREATE TABLE `t2_new` (
  `c` char(16) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='sequoiadb : { table_options: { ShardingKey: {id : 1}, AutoIndexId: false, StrictDataMode: false  } }'
drop table t1,t2,t1_new,t2_new;
create table t1( id int ) comment = "sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }";
alter table t1 comment = "user string, sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }", ALGORITHM=copy;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci COMMENT='user string, sequoiadb : { table_options: { ShardingKey: {id : 1}, IsMainCL: true } }'
drop table t1;
create table t1 ( POPulation int(11) not null default '0', index (POPulation));
insert into t1 values (1);
alter table t1 change population population int(11) null;
ERROR 0A000: Cannot change column name case. Try 'POPulation' instead of 'population'.
alter table t1 change population population int(11) null, ALGORITHM=COPY;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `population` int(11) DEFAULT NULL,
  KEY `POPulation` (`population`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
drop table t1;
create table t1 ( a int ) comment = 'sequoiadb:{ table_options: { Compressed: false }, ShardingKey: { wk: 1 }, EnsureShardingIndex: false } }';
ERROR HY000: Invalid comment option 'ShardingKey'.
create table t1 ( a int ) comment = 'sequoiadb:{ table_options: { ReplSize: 2 }, shardType: \"range\" }';
ERROR HY000: Invalid comment option 'shardType'.
create table t1 ( a int ) comment = 'sequoiadb:{ partition_options: { Partition: 1024 }, Compressed: false }';
ERROR HY000: Invalid comment option 'Compressed'.
create table t1 ( a int ) comment = 'sequoiadb:{ partition_option: { Partition: 1024 } }';
ERROR HY000: Invalid comment option 'partition_option'.
create table t1 ( a int ) comment = 'sequoiadb:{ table_option: { ReplSize: 2 } }';
ERROR HY000: Invalid comment option 'table_option'.
create table t1 ( a int ) comment = 'sequoiadb:{ auto_partion: true }';
ERROR HY000: Invalid comment option 'auto_partion'.
create table t1 ( a int );
alter table t1 comment = 'sequoiadb:{ table_options: { Compressed: false }, ShardingKey: { wk: 1 }, EnsureShardingIndex: false } }';
ERROR HY000: Invalid comment option 'ShardingKey'.
alter table t1 comment = 'sequoiadb:{ partition_options: { Partition: 1024 }, Compressed: false }';
ERROR HY000: Invalid comment option 'Compressed'.
alter table t1 comment = 'sequoiadb:{ partition_option: { Partition: 1024 } }';
ERROR HY000: Invalid comment option 'partition_option'.
alter table t1 comment = 'sequoiadb:{ table_option: { ReplSize: 2 } }';
ERROR HY000: Invalid comment option 'table_option'.
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
drop table t1;
create table t1 ( a int not null, index(a) ) ;
insert into t1 values (1);
alter table t1 modify a int null;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  KEY `a` (`a`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (null);
select * from t1;
a
1
NULL
drop table t1;
create table t1 ( a int not null, b int not null, c char(16) not null, index(a,b,c) );
create table t2 ( a int not null, b int not null, c char(16) not null, index(a,b,c) );
insert into t1 values (1,1,'a');
insert into t2 values (1,1,'a');
alter table t1 change a a int null, change b b int null;
alter table t2 change a a int null, change b b int null, change c c char(16) null;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) DEFAULT NULL,
  `b` int(11) DEFAULT NULL,
  `c` char(16) NOT NULL,
  KEY `a` (`a`,`b`,`c`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` int(11) DEFAULT NULL,
  `b` int(11) DEFAULT NULL,
  `c` char(16) DEFAULT NULL,
  KEY `a` (`a`,`b`,`c`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (null,null,'b');
insert into t2 values (null,null,null);
select * from t1;
a	b	c
1	1	a
NULL	NULL	b
select * from t2;
a	b	c
1	1	a
NULL	NULL	NULL
drop table t1,t2;
create table t1 ( a int, b int, c char(16) not null, index(a,b,c) );
create table t2 ( a int, b int, c char(16), index(a,b,c) );
insert into t1 values (1,1,'a'),(null,null,'b');
insert into t2 values (1,1,'a'),(null,null,null);
alter table t1 change a a int not null, change b b int not null;
ERROR 22004: Invalid use of NULL value
alter table t2 change a a int not null, change b b int not null, change c c char(16) not null;
ERROR 22004: Invalid use of NULL value
delete from t1 where a is null;
delete from t2 where a is null;
alter table t1 change a a int not null, change b b int not null;
alter table t2 change a a int not null, change b b int not null, change c c char(16) not null;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int(11) NOT NULL,
  `b` int(11) NOT NULL,
  `c` char(16) NOT NULL,
  KEY `a` (`a`,`b`,`c`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
show create table t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` int(11) NOT NULL,
  `b` int(11) NOT NULL,
  `c` char(16) NOT NULL,
  KEY `a` (`a`,`b`,`c`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 values (2,2,'b');
insert into t2 values (2,2,'b');
select * from t1;
a	b	c
1	1	a
2	2	b
select * from t2;
a	b	c
1	1	a
2	2	b
drop table t1,t2;
create table t1 ( id int , c char(8) );
create table t2 ( id int primary key );
alter table t1 add foreign key f1(id) references t2(id);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) DEFAULT NULL,
  `c` char(8) DEFAULT NULL,
  KEY `f1` (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 drop foreign key t1_ibfk_1;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) DEFAULT NULL,
  `c` char(8) DEFAULT NULL,
  KEY `f1` (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
drop table t1,t2;
create table t1 (id int auto_increment primary key, a char(10));
alter table t1 modify a char(9),algorithm=inplace;
insert into t1(a) values('aaaaaaaa'),('aaaaaaaa'),('aaaaaaaa'),('aaaaaaaa'),('aaaaaaa '),('aaaaaa ');
alter table t1 modify a char(7),algorithm=inplace;
ERROR 22001: Data too long for column 'a' at row 1
alter table t1 modify a char(8),algorithm=inplace;
alter table t1 modify a varchar(7),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a varchar(8),algorithm=inplace;
alter table t1 modify a char(255);
alter table t1 modify a tinytext,algorithm=inplace;
alter table t1 modify a char(255);
alter table t1 modify a binary(100),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
set sql_mode='';
alter table t1 modify a char(100),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
set sql_mode=default;
select * from t1 order by id;
id	a
1	aaaaaaaa
2	aaaaaaaa
3	aaaaaaaa
4	aaaaaaaa
5	aaaaaaa
6	aaaaaa
drop table t1;
create table t1 (id int auto_increment primary key, a varchar(10));
alter table t1 modify a varchar(9),algorithm=inplace;
insert into t1(a) values('aaaaaaaa'),('aaaaaaaa'),('aaaaaaaa'),('aaaaaaaa'),('aaaaaaa '),('aaaaaa ');
alter table t1 modify a varchar(7),algorithm=inplace;
ERROR 22001: Data too long for column 'a' at row 1
alter table t1 modify a varchar(8),algorithm=inplace;
alter table t1 modify a char(8),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a varchar(255),algorithm=inplace;
alter table t1 modify a tinytext,algorithm=inplace;
alter table t1 modify a varchar(255);
alter table t1 modify a varbinary(100),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
set sql_mode='';
alter table t1 modify a varchar(100),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
set sql_mode=default;
select * from t1 order by id;
id	a
1	aaaaaaaa
2	aaaaaaaa
3	aaaaaaaa
4	aaaaaaaa
5	aaaaaaa 
6	aaaaaa 
drop table t1;
create table t1 (id int auto_increment primary key, a longtext);
alter table t1 modify a mediumtext,algorithm=inplace;
insert into t1(a) values('aaaaaaaa'),('aaaaaaaa'),('aaaaaaaa'),('aaaaaaaa'),('aaaaaaa '),('aaaaaa ');
insert into t1(a) values(repeat('a', 256));
alter table t1 modify a tinytext,algorithm=inplace;
ERROR 22001: Data too long for column 'a' at row 1
alter table t1 modify a text,algorithm=inplace;
delete from t1 where length(a)>254;
alter table t1 modify a char(255),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a varchar(255),algorithm=inplace;
alter table t1 modify a text,algorithm=inplace;
alter table t1 modify a tinyblob,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
set sql_mode='';
alter table t1 modify a tinytext,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
set sql_mode=default;
select * from t1 order by id;
id	a
1	aaaaaaaa
2	aaaaaaaa
3	aaaaaaaa
4	aaaaaaaa
5	aaaaaaa 
6	aaaaaa 
drop table t1;
create table t1 (id int auto_increment primary key, a binary(255), b varbinary(255), c blob, d set('a','b','c'), e enum('a','b','c'));
alter table t1 modify a binary(100),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify b varbinary(100),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify c tinyblob,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify d set('a','b'),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify e enum('a','b'),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
drop table t1;
create table t1 (id int auto_increment primary key, a bigint, b bigint unsigned);
alter table t1 modify a int, modify b int unsigned,algorithm=inplace;
insert into t1(a, b) values(-32769,0),(-32768,1),(0,2),(32767,65535),(32768,65536);
alter table t1 modify a mediumint, modify b mediumint unsigned,algorithm=inplace;
alter table t1 modify a smallint, modify b smallint unsigned,algorithm=inplace;
ERROR 22001: Data too long for column 'a' at row 1
alter table t1 modify a float, modify b smallint unsigned,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a int unsigned, modify b smallint unsigned,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
delete from t1 where a not between -128 and 127;
set sql_mode='';
alter table t1 modify a tinyint,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
set sql_mode=default;
select * from t1 order by id;
id	a	b
3	0	2
drop table t1;
create table t1 (id int auto_increment primary key, a float, b double, c decimal);
alter table t1 modify a float(2,0),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify b double(2,0),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify c decimal(2,0),algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
drop table t1;
create table `t1` (
id int not null auto_increment primary key,
`geom` geometry DEFAULT NULL,
`poin` point DEFAULT NULL,
`line` linestring DEFAULT NULL,
`poly` polygon DEFAULT NULL,
`mpoin` multipoint DEFAULT NULL,
`mline` multilinestring DEFAULT NULL,
`mploy` multipolygon DEFAULT NULL,
`geocol` geometrycollection DEFAULT NULL,
`geom1` geometry not null,
`poin1` point not null,
`line1` linestring not null,
`poly1` polygon not null,
`mpoin1` multipoint not null,
`mline1` multilinestring not null,
`mploy1` multipolygon not null,
`geocol1` geometrycollection not null
);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `geom` geometry DEFAULT NULL,
  `poin` point DEFAULT NULL,
  `line` linestring DEFAULT NULL,
  `poly` polygon DEFAULT NULL,
  `mpoin` multipoint DEFAULT NULL,
  `mline` multilinestring DEFAULT NULL,
  `mploy` multipolygon DEFAULT NULL,
  `geocol` geometrycollection DEFAULT NULL,
  `geom1` geometry NOT NULL,
  `poin1` point NOT NULL,
  `line1` linestring NOT NULL,
  `poly1` polygon NOT NULL,
  `mpoin1` multipoint NOT NULL,
  `mline1` multilinestring NOT NULL,
  `mploy1` multipolygon NOT NULL,
  `geocol1` geometrycollection NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
set @a1 = ST_PointFromText('POINT(1 1)');
set @a2 = ST_LineFromText('LINESTRING(0 0,10 10,20 25,50 60)');
set @a3 = ST_PolygonFromText('POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))');
set @a4 = ST_MultiPointFromText('MULTIPOINT(10 10,20 20)');
set @a5 = ST_MLineFromText('MULTILINESTRING((10 10,20 20),(15 15,30 15))');
set @a6 = ST_MPolyFromText('MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7,5 5)))');
set @a7 = ST_GeomFromText('GEOMETRYCOLLECTION(POINT(10 10),LINESTRING(1 1,2 2,3 3,4 4))');
set @a8 = ST_GeomFromText('GEOMETRYCOLLECTION(POINT(10 10),POINT(30 30),LINESTRING(15 15,20 20))');
insert into t1 value(1,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
insert into t1 value(2,null,null,null,null,null,null,null,null,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
select id,ST_AsText(geom),ST_AsText(poin),ST_AsText(line),ST_AsText(poly),ST_AsText(mpoin),ST_AsText(mline),ST_AsText(mploy),ST_AsText(geocol) from t1 order by id;
id	ST_AsText(geom)	ST_AsText(poin)	ST_AsText(line)	ST_AsText(poly)	ST_AsText(mpoin)	ST_AsText(mline)	ST_AsText(mploy)	ST_AsText(geocol)
1	POINT(1 1)	POINT(1 1)	LINESTRING(0 0,10 10,20 25,50 60)	POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))	MULTIPOINT(10 10,20 20)	MULTILINESTRING((10 10,20 20),(15 15,30 15))	MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7,5 5)))	GEOMETRYCOLLECTION(POINT(10 10),LINESTRING(1 1,2 2,3 3,4 4))
2	NULL	NULL	NULL	NULL	NULL	NULL	NULL	NULL
select id,ST_AsText(geom1),ST_AsText(line1),ST_AsText(poly1),ST_AsText(mpoin1),ST_AsText(mline1),ST_AsText(mploy1),ST_AsText(geocol1) from t1 order by id;
id	ST_AsText(geom1)	ST_AsText(line1)	ST_AsText(poly1)	ST_AsText(mpoin1)	ST_AsText(mline1)	ST_AsText(mploy1)	ST_AsText(geocol1)
1	POINT(1 1)	LINESTRING(0 0,10 10,20 25,50 60)	POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))	MULTIPOINT(10 10,20 20)	MULTILINESTRING((10 10,20 20),(15 15,30 15))	MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7,5 5)))	GEOMETRYCOLLECTION(POINT(10 10),LINESTRING(1 1,2 2,3 3,4 4))
2	POINT(1 1)	LINESTRING(0 0,10 10,20 25,50 60)	POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))	MULTIPOINT(10 10,20 20)	MULTILINESTRING((10 10,20 20),(15 15,30 15))	MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7,5 5)))	GEOMETRYCOLLECTION(POINT(10 10),LINESTRING(1 1,2 2,3 3,4 4))
alter table t1 change geom newgeom geometry null;
alter table t1 change poin newpoin  point null;
alter table t1 change line newline linestring null;
alter table t1 change poly newpoly polygon null;
alter table t1 change mpoin newmpoin multipoint null;
alter table t1 change mline newmline multilinestring null;
alter table t1 change mploy newmploy multipolygon null;
alter table t1 change geocol newgeocol geometrycollection null;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `newgeom` geometry DEFAULT NULL,
  `newpoin` point DEFAULT NULL,
  `newline` linestring DEFAULT NULL,
  `newpoly` polygon DEFAULT NULL,
  `newmpoin` multipoint DEFAULT NULL,
  `newmline` multilinestring DEFAULT NULL,
  `newmploy` multipolygon DEFAULT NULL,
  `newgeocol` geometrycollection DEFAULT NULL,
  `geom1` geometry NOT NULL,
  `poin1` point NOT NULL,
  `line1` linestring NOT NULL,
  `poly1` polygon NOT NULL,
  `mpoin1` multipoint NOT NULL,
  `mline1` multilinestring NOT NULL,
  `mploy1` multipolygon NOT NULL,
  `geocol1` geometrycollection NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=9001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 modify newgeom geometry not null,algorithm=inplace;
ERROR 22004: Invalid use of NULL value
alter table t1 modify newpoin point not null,algorithm=inplace;
ERROR 22004: Invalid use of NULL value
alter table t1 modify newline linestring not null,algorithm=inplace;
ERROR 22004: Invalid use of NULL value
alter table t1 modify newpoly polygon not null,algorithm=inplace;
ERROR 22004: Invalid use of NULL value
alter table t1 modify newmpoin multipoint not null,algorithm=inplace;
ERROR 22004: Invalid use of NULL value
alter table t1 modify newmline multilinestring not null,algorithm=inplace;
ERROR 22004: Invalid use of NULL value
alter table t1 modify newmploy multipolygon not null,algorithm=inplace;
ERROR 22004: Invalid use of NULL value
alter table t1 modify newgeocol geometrycollection not null,algorithm=inplace;
ERROR 22004: Invalid use of NULL value
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `newgeom` geometry DEFAULT NULL,
  `newpoin` point DEFAULT NULL,
  `newline` linestring DEFAULT NULL,
  `newpoly` polygon DEFAULT NULL,
  `newmpoin` multipoint DEFAULT NULL,
  `newmline` multilinestring DEFAULT NULL,
  `newmploy` multipolygon DEFAULT NULL,
  `newgeocol` geometrycollection DEFAULT NULL,
  `geom1` geometry NOT NULL,
  `poin1` point NOT NULL,
  `line1` linestring NOT NULL,
  `poly1` polygon NOT NULL,
  `mpoin1` multipoint NOT NULL,
  `mline1` multilinestring NOT NULL,
  `mploy1` multipolygon NOT NULL,
  `geocol1` geometrycollection NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=9001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
set sql_mode = "";
alter table t1 modify newgeom geometry not null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: cannot convert NULL to non-constant DEFAULT. Try ALGORITHM=COPY
alter table t1 modify newpoin point not null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: cannot convert NULL to non-constant DEFAULT. Try ALGORITHM=COPY
alter table t1 modify newline linestring not null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: cannot convert NULL to non-constant DEFAULT. Try ALGORITHM=COPY
alter table t1 modify newpoly polygon not null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: cannot convert NULL to non-constant DEFAULT. Try ALGORITHM=COPY
alter table t1 modify newmpoin multipoint not null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: cannot convert NULL to non-constant DEFAULT. Try ALGORITHM=COPY
alter table t1 modify newmline multilinestring not null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: cannot convert NULL to non-constant DEFAULT. Try ALGORITHM=COPY
alter table t1 modify newmploy multipolygon not null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: cannot convert NULL to non-constant DEFAULT. Try ALGORITHM=COPY
alter table t1 modify newgeocol geometrycollection not null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: cannot convert NULL to non-constant DEFAULT. Try ALGORITHM=COPY
set sql_mode = default;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `newgeom` geometry DEFAULT NULL,
  `newpoin` point DEFAULT NULL,
  `newline` linestring DEFAULT NULL,
  `newpoly` polygon DEFAULT NULL,
  `newmpoin` multipoint DEFAULT NULL,
  `newmline` multilinestring DEFAULT NULL,
  `newmploy` multipolygon DEFAULT NULL,
  `newgeocol` geometrycollection DEFAULT NULL,
  `geom1` geometry NOT NULL,
  `poin1` point NOT NULL,
  `line1` linestring NOT NULL,
  `poly1` polygon NOT NULL,
  `mpoin1` multipoint NOT NULL,
  `mline1` multilinestring NOT NULL,
  `mploy1` multipolygon NOT NULL,
  `geocol1` geometrycollection NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=9001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
delete from t1 where id = 2 ;
select id,ST_AsText(geom1),ST_AsText(line1),ST_AsText(poly1),ST_AsText(mpoin1),ST_AsText(mline1),ST_AsText(mploy1),ST_AsText(geocol1) from t1 order by id;
id	ST_AsText(geom1)	ST_AsText(line1)	ST_AsText(poly1)	ST_AsText(mpoin1)	ST_AsText(mline1)	ST_AsText(mploy1)	ST_AsText(geocol1)
1	POINT(1 1)	LINESTRING(0 0,10 10,20 25,50 60)	POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))	MULTIPOINT(10 10,20 20)	MULTILINESTRING((10 10,20 20),(15 15,30 15))	MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7,5 5)))	GEOMETRYCOLLECTION(POINT(10 10),LINESTRING(1 1,2 2,3 3,4 4))
alter table t1 modify newgeom geometry not null,algorithm=inplace;
alter table t1 modify newpoin point not null,algorithm=inplace;
alter table t1 modify newline linestring not null,algorithm=inplace;
alter table t1 modify newpoly polygon not null,algorithm=inplace;
alter table t1 modify newmpoin multipoint not null,algorithm=inplace;
alter table t1 modify newmline multilinestring not null,algorithm=inplace;
alter table t1 modify newmploy multipolygon not null,algorithm=inplace;
alter table t1 modify newgeocol geometrycollection not null,algorithm=inplace;
alter table t1 modify geom1 geometry null,algorithm=inplace;
alter table t1 modify poin1 point null,algorithm=inplace;
alter table t1 modify line1 linestring null,algorithm=inplace;
alter table t1 modify poly1 polygon null,algorithm=inplace;
alter table t1 modify mpoin1 multipoint null,algorithm=inplace;
alter table t1 modify mline1 multilinestring null,algorithm=inplace;
alter table t1 modify mploy1 multipolygon null,algorithm=inplace;
alter table t1 modify geocol1 geometrycollection null,algorithm=inplace;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `newgeom` geometry NOT NULL,
  `newpoin` point NOT NULL,
  `newline` linestring NOT NULL,
  `newpoly` polygon NOT NULL,
  `newmpoin` multipoint NOT NULL,
  `newmline` multilinestring NOT NULL,
  `newmploy` multipolygon NOT NULL,
  `newgeocol` geometrycollection NOT NULL,
  `geom1` geometry DEFAULT NULL,
  `poin1` point DEFAULT NULL,
  `line1` linestring DEFAULT NULL,
  `poly1` polygon DEFAULT NULL,
  `mpoin1` multipoint DEFAULT NULL,
  `mline1` multilinestring DEFAULT NULL,
  `mploy1` multipolygon DEFAULT NULL,
  `geocol1` geometrycollection DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=9001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
insert into t1 value(2,null,@a1,@a2,@a3,@a4,@a5,@a6,@a7,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
ERROR 23000: Column 'newgeom' cannot be null
insert into t1 value(3,@a1,null,@a2,@a3,@a4,@a5,@a6,@a7,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
ERROR 23000: Column 'newpoin' cannot be null
insert into t1 value(4,@a1,@a1,null,@a3,@a4,@a5,@a6,@a7,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
ERROR 23000: Column 'newline' cannot be null
insert into t1 value(5,@a1,@a1,@a2,null,@a4,@a5,@a6,@a7,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
ERROR 23000: Column 'newpoly' cannot be null
insert into t1 value(6,@a1,@a1,@a2,@a3,null,@a5,@a6,@a7,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
ERROR 23000: Column 'newmpoin' cannot be null
insert into t1 value(7,@a1,@a1,@a2,@a3,@a4,null,@a6,@a7,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
ERROR 23000: Column 'newmline' cannot be null
insert into t1 value(8,@a1,@a1,@a2,@a3,@a4,@a5,null,@a7,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
ERROR 23000: Column 'newmploy' cannot be null
insert into t1 value(9,@a1,@a1,@a2,@a3,@a4,@a5,@a6,null,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
ERROR 23000: Column 'newgeocol' cannot be null
insert into t1 value(10,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7,null,null,null,null,null,null,null,null);
insert into t1 value(11,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
select id,ST_AsText(geom1),ST_AsText(line1),ST_AsText(poly1),ST_AsText(mpoin1),ST_AsText(mline1),ST_AsText(mploy1),ST_AsText(geocol1) from t1 order by id;
id	ST_AsText(geom1)	ST_AsText(line1)	ST_AsText(poly1)	ST_AsText(mpoin1)	ST_AsText(mline1)	ST_AsText(mploy1)	ST_AsText(geocol1)
1	POINT(1 1)	LINESTRING(0 0,10 10,20 25,50 60)	POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))	MULTIPOINT(10 10,20 20)	MULTILINESTRING((10 10,20 20),(15 15,30 15))	MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7,5 5)))	GEOMETRYCOLLECTION(POINT(10 10),LINESTRING(1 1,2 2,3 3,4 4))
10	NULL	NULL	NULL	NULL	NULL	NULL	NULL
11	POINT(1 1)	LINESTRING(0 0,10 10,20 25,50 60)	POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))	MULTIPOINT(10 10,20 20)	MULTILINESTRING((10 10,20 20),(15 15,30 15))	MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7,5 5)))	GEOMETRYCOLLECTION(POINT(10 10),LINESTRING(1 1,2 2,3 3,4 4))
alter table t1 drop column newgeom;
alter table t1 drop column newpoin;
alter table t1 drop column newline;
alter table t1 drop column newpoly;
alter table t1 drop column newmpoin;
alter table t1 drop column newmline;
alter table t1 drop column newmploy;
alter table t1 drop column newgeocol;
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `geom1` geometry DEFAULT NULL,
  `poin1` point DEFAULT NULL,
  `line1` linestring DEFAULT NULL,
  `poly1` polygon DEFAULT NULL,
  `mpoin1` multipoint DEFAULT NULL,
  `mline1` multilinestring DEFAULT NULL,
  `mploy1` multipolygon DEFAULT NULL,
  `geocol1` geometrycollection DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=9001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select id,ST_AsText(geom1),ST_AsText(line1),ST_AsText(poly1),ST_AsText(mpoin1),ST_AsText(mline1),ST_AsText(mploy1),ST_AsText(geocol1) from t1 order by id;
id	ST_AsText(geom1)	ST_AsText(line1)	ST_AsText(poly1)	ST_AsText(mpoin1)	ST_AsText(mline1)	ST_AsText(mploy1)	ST_AsText(geocol1)
1	POINT(1 1)	LINESTRING(0 0,10 10,20 25,50 60)	POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))	MULTIPOINT(10 10,20 20)	MULTILINESTRING((10 10,20 20),(15 15,30 15))	MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7,5 5)))	GEOMETRYCOLLECTION(POINT(10 10),LINESTRING(1 1,2 2,3 3,4 4))
10	NULL	NULL	NULL	NULL	NULL	NULL	NULL
11	POINT(1 1)	LINESTRING(0 0,10 10,20 25,50 60)	POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))	MULTIPOINT(10 10,20 20)	MULTILINESTRING((10 10,20 20),(15 15,30 15))	MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7,5 5)))	GEOMETRYCOLLECTION(POINT(10 10),LINESTRING(1 1,2 2,3 3,4 4))
drop table t1;
create table `t1` (
id int not null auto_increment primary key,
`a1` geometry DEFAULT NULL,
`a2` geometry DEFAULT NULL,
`a3` geometry DEFAULT NULL,
`a4` geometry DEFAULT NULL,
`a5` geometry DEFAULT NULL,
`a6` geometry DEFAULT NULL,
`a7` geometry DEFAULT NULL,
`a8` geometry DEFAULT NULL,
`a9` geometry DEFAULT NULL,
`a10` geometry DEFAULT NULL,
`a11` geometry DEFAULT NULL,
`a12` geometry DEFAULT NULL,
`a13` geometry DEFAULT NULL,
`a14` geometry DEFAULT NULL,
`a15` geometry DEFAULT NULL,
`a16` geometry DEFAULT NULL
);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a1` geometry DEFAULT NULL,
  `a2` geometry DEFAULT NULL,
  `a3` geometry DEFAULT NULL,
  `a4` geometry DEFAULT NULL,
  `a5` geometry DEFAULT NULL,
  `a6` geometry DEFAULT NULL,
  `a7` geometry DEFAULT NULL,
  `a8` geometry DEFAULT NULL,
  `a9` geometry DEFAULT NULL,
  `a10` geometry DEFAULT NULL,
  `a11` geometry DEFAULT NULL,
  `a12` geometry DEFAULT NULL,
  `a13` geometry DEFAULT NULL,
  `a14` geometry DEFAULT NULL,
  `a15` geometry DEFAULT NULL,
  `a16` geometry DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
set @a1 = ST_PointFromText('POINT(1 1)');
set @a2 = ST_LineFromText('LINESTRING(0 0,10 10,20 25,50 60)');
set @a3 = ST_PolygonFromText('POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))');
set @a4 = ST_MultiPointFromText('MULTIPOINT(10 10,20 20)');
set @a5 = ST_MLineFromText('MULTILINESTRING((10 10,20 20),(15 15,30 15))');
set @a6 = ST_MPolyFromText('MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7,5 5)))');
set @a7 = ST_GeomFromText('GEOMETRYCOLLECTION(POINT(10 10),LINESTRING(1 1,2 2,3 3,4 4))');
set @a8 = ST_GeomFromText('GEOMETRYCOLLECTION(POINT(10 10),POINT(30 30),LINESTRING(15 15,20 20))');
insert into t1 value(10,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
alter table t1 modify a1 bool null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a2 tinyint null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a3 int null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a4 float null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a5 double null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a6 decimal null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a7 char null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a8 tinyblob null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a9 bit null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a10 date null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a11 tinytext null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a12 text null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a13 longblob null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a14 timestamp null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
drop table t1;
create table `t1` (
id int not null auto_increment primary key,
`a1` bool ,
`a2` tinyint ,
`a3` smallint ,
`a4` int ,
`a5` bigint ,
`a6` float ,
`a7` double ,
`a8` decimal ,
`a9` char,
`a12` bit ,
`a13` year,
`a14` time ,
`a15` date ,
`a16` datetime ,
`a17` tinytext ,
`a18` text ,
`a19` mediumText ,
`a20` longtext ,
`a21` tinyblob ,
`a22` mediumblob, 
`a23` longblob ,
`a24` timestamp 
);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a1` tinyint(1) DEFAULT NULL,
  `a2` tinyint(4) DEFAULT NULL,
  `a3` smallint(6) DEFAULT NULL,
  `a4` int(11) DEFAULT NULL,
  `a5` bigint(20) DEFAULT NULL,
  `a6` float DEFAULT NULL,
  `a7` double DEFAULT NULL,
  `a8` decimal(10,0) DEFAULT NULL,
  `a9` char(1) DEFAULT NULL,
  `a12` bit(1) DEFAULT NULL,
  `a13` year(4) DEFAULT NULL,
  `a14` time DEFAULT NULL,
  `a15` date DEFAULT NULL,
  `a16` datetime DEFAULT NULL,
  `a17` tinytext DEFAULT NULL,
  `a18` text DEFAULT NULL,
  `a19` mediumtext DEFAULT NULL,
  `a20` longtext DEFAULT NULL,
  `a21` tinyblob DEFAULT NULL,
  `a22` mediumblob DEFAULT NULL,
  `a23` longblob DEFAULT NULL,
  `a24` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 modify a1 geometry,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a2 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a3 geometry,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a4 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a5 geometry,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a6 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a7 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a8 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a9 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a12 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a13 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a14 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a15 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a16 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a17 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a18 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a19 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a20 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a24 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a21 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a22 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify a23 geometry ,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `a1` tinyint(1) DEFAULT NULL,
  `a2` tinyint(4) DEFAULT NULL,
  `a3` smallint(6) DEFAULT NULL,
  `a4` int(11) DEFAULT NULL,
  `a5` bigint(20) DEFAULT NULL,
  `a6` float DEFAULT NULL,
  `a7` double DEFAULT NULL,
  `a8` decimal(10,0) DEFAULT NULL,
  `a9` char(1) DEFAULT NULL,
  `a12` bit(1) DEFAULT NULL,
  `a13` year(4) DEFAULT NULL,
  `a14` time DEFAULT NULL,
  `a15` date DEFAULT NULL,
  `a16` datetime DEFAULT NULL,
  `a17` tinytext DEFAULT NULL,
  `a18` text DEFAULT NULL,
  `a19` mediumtext DEFAULT NULL,
  `a20` longtext DEFAULT NULL,
  `a21` tinyblob DEFAULT NULL,
  `a22` mediumblob DEFAULT NULL,
  `a23` longblob DEFAULT NULL,
  `a24` timestamp NOT NULL DEFAULT current_timestamp() ON UPDATE current_timestamp(),
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
drop table t1;
create table `t1` (
id int not null auto_increment primary key,
`geom` geometry DEFAULT NULL,
`poin` geometry DEFAULT NULL,
`line` geometry DEFAULT NULL,
`poly` geometry DEFAULT NULL,
`mpoin` geometry DEFAULT NULL,
`mline` geometry DEFAULT NULL,
`mploy` geometry DEFAULT NULL,
`geocol` geometry DEFAULT NULL,
`geom1` geometry DEFAULT NULL,
`poin1` point  DEFAULT NULL,
`line1` linestring DEFAULT NULL,
`poly1` polygon  DEFAULT NULL,
`mpoin1` multipoint  DEFAULT NULL,
`mline1` multilinestring DEFAULT NULL,
`mploy1` multipolygon DEFAULT NULL,
`geocol1` geometrycollection DEFAULT NULL
);
insert into t1 value(10,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7,@a1,@a1,@a2,@a3,@a4,@a5,@a6,@a7);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `geom` geometry DEFAULT NULL,
  `poin` geometry DEFAULT NULL,
  `line` geometry DEFAULT NULL,
  `poly` geometry DEFAULT NULL,
  `mpoin` geometry DEFAULT NULL,
  `mline` geometry DEFAULT NULL,
  `mploy` geometry DEFAULT NULL,
  `geocol` geometry DEFAULT NULL,
  `geom1` geometry DEFAULT NULL,
  `poin1` point DEFAULT NULL,
  `line1` linestring DEFAULT NULL,
  `poly1` polygon DEFAULT NULL,
  `mpoin1` multipoint DEFAULT NULL,
  `mline1` multilinestring DEFAULT NULL,
  `mploy1` multipolygon DEFAULT NULL,
  `geocol1` geometrycollection DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
alter table t1 modify poin point null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify line linestring null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify poly polygon null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify mpoin multipoint null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify mline multilinestring null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify mploy multipolygon null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify geocol geometrycollection null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
alter table t1 modify poin1 geometry null,algorithm=inplace;
ERROR 0A000: ALGORITHM=INPLACE is not supported. Reason: Can't do such type conversion.. Try ALGORITHM=COPY
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `geom` geometry DEFAULT NULL,
  `poin` geometry DEFAULT NULL,
  `line` geometry DEFAULT NULL,
  `poly` geometry DEFAULT NULL,
  `mpoin` geometry DEFAULT NULL,
  `mline` geometry DEFAULT NULL,
  `mploy` geometry DEFAULT NULL,
  `geocol` geometry DEFAULT NULL,
  `geom1` geometry DEFAULT NULL,
  `poin1` point DEFAULT NULL,
  `line1` linestring DEFAULT NULL,
  `poly1` polygon DEFAULT NULL,
  `mpoin1` multipoint DEFAULT NULL,
  `mline1` multilinestring DEFAULT NULL,
  `mploy1` multipolygon DEFAULT NULL,
  `geocol1` geometrycollection DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=SequoiaDB AUTO_INCREMENT=1001 DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
select id,ST_AsText(geom),ST_AsText(poin),ST_AsText(line),ST_AsText(poly),ST_AsText(mpoin),ST_AsText(mline),ST_AsText(mploy),ST_AsText(geocol) from t1 order by id;
id	ST_AsText(geom)	ST_AsText(poin)	ST_AsText(line)	ST_AsText(poly)	ST_AsText(mpoin)	ST_AsText(mline)	ST_AsText(mploy)	ST_AsText(geocol)
10	POINT(1 1)	POINT(1 1)	LINESTRING(0 0,10 10,20 25,50 60)	POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))	MULTIPOINT(10 10,20 20)	MULTILINESTRING((10 10,20 20),(15 15,30 15))	MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7,5 5)))	GEOMETRYCOLLECTION(POINT(10 10),LINESTRING(1 1,2 2,3 3,4 4))
select id,ST_AsText(geom1),ST_AsText(line1),ST_AsText(poly1),ST_AsText(mpoin1),ST_AsText(mline1),ST_AsText(mploy1),ST_AsText(geocol1) from t1 order by id;
id	ST_AsText(geom1)	ST_AsText(line1)	ST_AsText(poly1)	ST_AsText(mpoin1)	ST_AsText(mline1)	ST_AsText(mploy1)	ST_AsText(geocol1)
10	POINT(1 1)	LINESTRING(0 0,10 10,20 25,50 60)	POLYGON((0 0,10 0,10 10,0 10,0 0),(5 5,7 5,7 7,5 7,5 5))	MULTIPOINT(10 10,20 20)	MULTILINESTRING((10 10,20 20),(15 15,30 15))	MULTIPOLYGON(((0 0,10 0,10 10,0 10,0 0)),((5 5,7 5,7 7,5 7,5 5)))	GEOMETRYCOLLECTION(POINT(10 10),LINESTRING(1 1,2 2,3 3,4 4))
drop table t1;
create table t1(id int,g geometry,index(g(128)));
ERROR 0A000: column 'g' cannot be used in key specification.
create table t1(id int,g geometry);
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `id` int(11) DEFAULT NULL,
  `g` geometry DEFAULT NULL
) ENGINE=SequoiaDB DEFAULT CHARSET=latin1 COLLATE=latin1_swedish_ci
create index geoindex on t1 (g(128));
ERROR 0A000: column 'g' cannot be used in key specification.
drop table t1;
drop database test_alter;
