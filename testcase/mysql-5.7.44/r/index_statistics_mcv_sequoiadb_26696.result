CREATE DATABASE  IF NOT EXISTS index_statistics_mcv_sequoiadb_26696;
DROP DATABASE IF EXISTS index_statistics_mcv_sequoiadb_26696;
CREATE DATABASE  IF NOT EXISTS index_statistics_mcv_sequoiadb_26696;
use index_statistics_mcv_sequoiadb_26696;
CREATE TABLE t1(
a INT NOT NULL,
b INT NOT NULL,
c INT NOT NULL,
INDEX idx_a(a),
INDEX idx_b(b)
)
PARTITION BY RANGE COLUMNS (a)
SUBPARTITION BY KEY (b)
SUBPARTITIONS 2 (
PARTITION p0 VALUES LESS THAN (13),
PARTITION p1 VALUES LESS THAN (26),
PARTITION p2 VALUES LESS THAN (41)
);
CREATE PROCEDURE p1()
BEGIN
DECLARE i INT;
DECLARE j INT;
SET i=1;
WHILE i<=40 DO
set j=1;
WHILE j<=20 DO
INSERT INTO t1(a,b,c) values (i, i, i);
SET j=j+1;
END WHILE;
SET i=i+1;
END WHILE;
END $
CALL p1();
SELECT * FROM t1 WHERE b<=5;
a	b	c
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
1	1	1
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
SELECT * FROM t1 WHERE b>=2;
a	b	c
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
10	10	10
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
11	11	11
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
12	12	12
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
13	13	13
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
14	14	14
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
15	15	15
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
16	16	16
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
17	17	17
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
18	18	18
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
19	19	19
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
20	20	20
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
21	21	21
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
22	22	22
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
23	23	23
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
24	24	24
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
25	25	25
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
26	26	26
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
27	27	27
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
28	28	28
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
29	29	29
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
30	30	30
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
31	31	31
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
32	32	32
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
33	33	33
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
34	34	34
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
35	35	35
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
36	36	36
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
37	37	37
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
38	38	38
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
39	39	39
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
40	40	40
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
6	6	6
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
7	7	7
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
8	8	8
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
9	9	9
SELECT * FROM t1 WHERE b>=2 and b <=5;
a	b	c
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
2	2	2
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
3	3	3
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
4	4	4
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
5	5	5
ANALYZE TABLE t1;
Table	Op	Msg_type	Msg_text
index_statistics_mcv_sequoiadb_26696.t1	analyze	status	OK
EXPLAIN SELECT * FROM t1 WHERE b<=5;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	t1	p0_p0sp0,p0_p0sp1,p1_p1sp0,p1_p1sp1,p2_p2sp0,p2_p2sp1	range	idx_b	idx_b	4	NULL	100	100.00	Using where with pushed condition (`index_statistics_mcv_sequoiadb_26696`.`t1`.`b` <= 5)
Warnings:
Note	1003	/* select#1 */ select `index_statistics_mcv_sequoiadb_26696`.`t1`.`a` AS `a`,`index_statistics_mcv_sequoiadb_26696`.`t1`.`b` AS `b`,`index_statistics_mcv_sequoiadb_26696`.`t1`.`c` AS `c` from `index_statistics_mcv_sequoiadb_26696`.`t1` where (`index_statistics_mcv_sequoiadb_26696`.`t1`.`b` <= 5)
EXPLAIN SELECT * FROM t1 WHERE b>=2;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	t1	p0_p0sp0,p0_p0sp1,p1_p1sp0,p1_p1sp1,p2_p2sp0,p2_p2sp1	ALL	idx_b	NULL	NULL	NULL	800	97.50	Using where with pushed condition (`index_statistics_mcv_sequoiadb_26696`.`t1`.`b` >= 2)
Warnings:
Note	1003	/* select#1 */ select `index_statistics_mcv_sequoiadb_26696`.`t1`.`a` AS `a`,`index_statistics_mcv_sequoiadb_26696`.`t1`.`b` AS `b`,`index_statistics_mcv_sequoiadb_26696`.`t1`.`c` AS `c` from `index_statistics_mcv_sequoiadb_26696`.`t1` where (`index_statistics_mcv_sequoiadb_26696`.`t1`.`b` >= 2)
EXPLAIN SELECT * FROM t1 WHERE b>=2 and b <=5;
id	select_type	table	partitions	type	possible_keys	key	key_len	ref	rows	filtered	Extra
1	SIMPLE	t1	p0_p0sp0,p0_p0sp1,p1_p1sp0,p1_p1sp1,p2_p2sp0,p2_p2sp1	range	idx_b	idx_b	4	NULL	80	100.00	Using where with pushed condition ((`index_statistics_mcv_sequoiadb_26696`.`t1`.`b` >= 2) and (`index_statistics_mcv_sequoiadb_26696`.`t1`.`b` <= 5))
Warnings:
Note	1003	/* select#1 */ select `index_statistics_mcv_sequoiadb_26696`.`t1`.`a` AS `a`,`index_statistics_mcv_sequoiadb_26696`.`t1`.`b` AS `b`,`index_statistics_mcv_sequoiadb_26696`.`t1`.`c` AS `c` from `index_statistics_mcv_sequoiadb_26696`.`t1` where ((`index_statistics_mcv_sequoiadb_26696`.`t1`.`b` >= 2) and (`index_statistics_mcv_sequoiadb_26696`.`t1`.`b` <= 5))
DROP PROCEDURE p1;
DROP TABLE t1;
DROP DATABASE index_statistics_mcv_sequoiadb_26696;
